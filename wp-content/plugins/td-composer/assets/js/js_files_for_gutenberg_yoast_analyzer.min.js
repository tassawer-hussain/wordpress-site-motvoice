var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
var tdcYoastAnalyzer=function(){if("undefined"!==typeof YoastSEO&&"undefined"!==typeof YoastSEO.analysis&&"undefined"!==typeof YoastSEO.analysis.worker){YoastSEO.app.registerPlugin("tdcYoastAnalyzer",{status:"loading"});this.shortcodesToBeParsed=["tdc_zone"];var a="("+this.shortcodesToBeParsed.join("|")+")";this.shortcodesRegex=new RegExp(a,"g");this.closingTagRegex=new RegExp("\\[\\/"+a+"\\]","g");this.nonCaptureRegex=new RegExp("\\["+a+"[^\\]]*?\\]","g");this.parsedShortcodes=[];this.loadShortcodes(this.declareReady.bind(this));
this.bindElementEvents()}};
tdcYoastAnalyzer.prototype.bindElementEvents=function(){var a=_.debounce(this.loadShortcodes.bind(this,this.declareReloaded.bind(this)),500);"undefined"!==typeof tinyMCE&&"function"===typeof tinyMCE.on&&(tinyMCE.on("addEditor",function(b){a();b.editor.on("change",a);b.editor.on("keyup",a)}),0<tinyMCE.editors.length&&tinyMCE.editors.forEach(function(b){b.id&&!0!==b.initialized&&(tinyMCE.get(b.id).on("init",function(b){a()}),tinyMCE.get(b.id).editor.on("change",a),tinyMCE.get(b.id).editor.on("keyup",a))}))};
tdcYoastAnalyzer.prototype.declareReady=function(){YoastSEO.app.pluginReady("tdcYoastAnalyzer");this.registerModifications()};tdcYoastAnalyzer.prototype.declareReloaded=function(){YoastSEO.app.pluginReloaded("tdcYoastAnalyzer")};tdcYoastAnalyzer.prototype.registerModifications=function(){YoastSEO.app.registerModification("content",this.replaceShortcodes.bind(this),"tdcYoastAnalyzer")};
tdcYoastAnalyzer.prototype.loadShortcodes=function(a){var b=this.getUnparsedShortcodes(this.getShortcodes(this.getContentTinyMCE()));if(0<b.length)this.parseShortcodes(b,a);else return a()};tdcYoastAnalyzer.prototype.removeUnknownShortCodes=function(a){a=a.replace(/\[[^<>&/\[\]\x00- =]+?( [^\]]+?)?\]/g,"");return a=a.replace(/\[\/[^<>&/\[\]\x00- =]+?\]/g,"")};
tdcYoastAnalyzer.prototype.replaceShortcodes=function(a){"string"===typeof a&&this.parsedShortcodes.forEach(function(b){a=a.replace(b.shortcode,b.output)});return a};tdcYoastAnalyzer.prototype.getUnparsedShortcodes=function(a){var b=this;return"object"!==typeof a?(console.error("tdcYoastAnalyzer: Failed to get unparsed shortcodes. Expected parameter to be an array, instead received "+typeof a),!1):a.filter(function(a){return b.isUnparsedShortcode(a)})};
tdcYoastAnalyzer.prototype.isUnparsedShortcode=function(a){return!this.parsedShortcodes.some(function(b){return b.shortcode===a})};tdcYoastAnalyzer.prototype.getContentTinyMCE=function(){var a="";"undefined"!==typeof tinyMCE&&"undefined"!==typeof tinyMCE.editors&&0!==tinyMCE.editors.length&&tinyMCE.editors.forEach(function(b){b.id&&b.initialized&&(b=tinyMCE.get(b.id).getContent(),a+=b)});return a};
tdcYoastAnalyzer.prototype.getShortcodes=function(a){if("string"!==typeof a)return console.error("tdcYoastAnalyzer: Failed to get shortcodes. Expected parameter to be a string, instead received"+typeof a),!1;var b=this.matchCapturingShortcodes(a);b.forEach(function(b){a=a.replace(b,"")});var c=this.matchNonCapturingShortcodes(a);return b.concat(c)};
tdcYoastAnalyzer.prototype.matchCapturingShortcodes=function(a){var b=(a.match(this.closingTagRegex)||[]).join(" ").match(this.shortcodesRegex)||[];return _.flatten(b.map(function(b){return a.match(new RegExp("\\["+b+"[^\\]]*?\\].*?\\[\\/"+b+"\\]","gs"))||[]}))};tdcYoastAnalyzer.prototype.matchNonCapturingShortcodes=function(a){return a.match(this.nonCaptureRegex)||[]};
tdcYoastAnalyzer.prototype.parseShortcodes=function(a,b){if("function"!==typeof b)return console.error("tdcYoastAnalyzer: Failed to parse shortcodes. Expected parameter to be a function, instead received "+typeof b),!1;if("object"===typeof a&&0<a.length)jQuery.post(td_ajax_url,{action:"td_render_shortcodes",data:a},function(a){this.saveParsedShortcodes(a,b)}.bind(this));else return b()};
tdcYoastAnalyzer.prototype.saveParsedShortcodes=function(a,b){a=JSON.parse(a);this.parsedShortcodes.push.apply(this.parsedShortcodes,$jscomp.arrayFromIterable(a));b()};if("undefined"!==typeof YoastSEO&&"undefined"!==typeof YoastSEO.app)new tdcYoastAnalyzer;else jQuery(window).on("YoastSEO:ready",function(){new tdcYoastAnalyzer});
