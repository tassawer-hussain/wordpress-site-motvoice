var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(f){var c=0;return function(){return c<f.length?{done:!1,value:f[c++]}:{done:!0}}};$jscomp.arrayIterator=function(f){return{next:$jscomp.arrayIteratorImpl(f)}};$jscomp.makeIterator=function(f){var c="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return c?c.call(f):$jscomp.arrayIterator(f)};$jscomp.arrayFromIterator=function(f){for(var c,b=[];!(c=f.next()).done;)b.push(c.value);return b};
$jscomp.arrayFromIterable=function(f){return f instanceof Array?f:$jscomp.arrayFromIterator($jscomp.makeIterator(f))};var tdcNotice;
(function(f,c){tdcNotice={$_noticeWrapper:c,_isInitialized:!1,_errorNotices:[],inError:!1,notice:function(b,d,a){var e={};_.isUndefined(d)||!0!==d||(e.type="error");_.isUndefined(a)||!0!==a||(e.hasClose=!0);tdcNotice.showNotice(b,e)},showNotice:function(b,d){if(tdcNotice._isInitialized){var a="",e="",c=!1,g=5E3;if("undefined"!==typeof d){if("undefined"!==typeof d.type)switch(d.type){case "error":a="tdc-notice-error";c=!0;break;case "info":a="tdc-notice-info"}"undefined"!==typeof d.hasClose&&!0===
d.hasClose&&(e='<div class="tdc-close-notice"></div>');"undefined"!==typeof d.timeout&&(g=d.timeout)}c&&(b+=" Current state has involved an issue. You could try an UNDO operation (CTRL+Z / CTRL+SHIFT+Z)");var m=f('<div class="tdc-notice '+a+'"><span class="tdc-msg-tag"></span>'+b+e+"</div>");tdcNotice.$_noticeWrapper.append(m);setTimeout(function(){m.addClass("tdc-notice-in")},100);if(c)throw tdcNotice._errorNotices.push(m),tdcNotice.inError=!0,tdcRecycle.init(),f("body").addClass("tdcComposerLoaded"),
b;setTimeout(function(){m.removeClass("tdc-notice-in")},g-1E3);setTimeout(function(){m.css("margin-top","-"+m.outerHeight()+"px")},g-500);setTimeout(function(){m.remove()},g)}},removeAll:function(){tdcNotice._errorNotices.forEach(function(b,d){b.remove()})},init:function(){tdcNotice._isInitialized||(tdcNotice.$_noticeWrapper=f('<div class="tdc-notice-wrapper"></div>'),tdcNotice.$_noticeWrapper.on("click",".tdc-close-notice",function(b){f(this).closest(".tdc-notice").remove()}),f("#tdc-live-iframe-wrapper").append(tdcNotice.$_noticeWrapper),
tdcNotice._isInitialized=!0)}};tdcNotice.init()})(jQuery);var tdcDebug;
(function(f,c){tdcDebug={_debug:!0,_logWindowObj:c,_content:c,_disabled:!1,log:function(b){tdcDebug._debug&&console.log(b)},dumpAllItems:function(){var b=tdcAdminIFrameUI.getIframeWindow();console.group("All items dump:");"undefined"!==typeof b.tdcComposerBlocksApi&&(console.log("%c tdcComposerBlocksApi.items ","background: #222; color: white"),console.log(b.tdcComposerBlocksApi.items));"undefined"!==typeof b.tdPullDown&&(console.log("%c tdPullDown.items ","background: #222; color: white"),console.log(b.tdPullDown.items));
"undefined"!==typeof b.tdAnimationSprite&&(console.log("%c tdAnimationSprite.items ","background: #222; color: white"),console.log(b.tdAnimationSprite.items));"undefined"!==typeof b.tdHomepageFull&&(console.log("%c tdHomepageFull.items ","background: #222; color: white"),console.log(b.tdHomepageFull.items));"undefined"!==typeof b.tdTrendingNow&&(console.log("%c tdTrendingNow.items ","background: #222; color: white"),console.log(b.tdTrendingNow.items));console.groupEnd()},group:function(b,d){!1!==
tdcDebug._debug&&(console.group?console.group(b,d):console.log(b))},groupCollapsed:function(b,d){!1!==tdcDebug._debug&&(console.groupCollapsed?console.groupCollapsed(b,d):console.log(b))},groupEnd:function(){!1!==tdcDebug._debug&&console.groupEnd&&console.groupEnd()},logWindow:function(b){if(c===tdcDebug._logWindowObj){tdcDebug._logWindowObj=f("<div></div>");var d=f('<div style="width: 50px; cursor: pointer; float: left; border: 1px solid black">Clear</div>'),a=f('<div style="width: 50px; cursor: pointer; float: left; border: 1px solid black">Disable</div>');
tdcDebug._content=f('<div style="clear: both"></div>');tdcDebug._logWindowObj.append(d);tdcDebug._logWindowObj.append(a);d.click(function(a){tdcDebug._content.html("")});a.click(function(a){tdcDebug._disabled=!tdcDebug._disabled;tdcDebug._disabled?f(this).css("background-color","#FF000"):f(this).css("background-color","")});tdcDebug._logWindowObj.append(tdcDebug._content);f("body").append(tdcDebug._logWindowObj);tdcDebug._logWindowObj.css({width:300,height:500,border:"1px solid red",position:"fixed",
bottom:0,right:20,"background-color":"#FFFFFF",overflow:"scroll","z-index":1E4})}tdcDebug._disabled||tdcDebug._content.html(b+"<br>"+tdcDebug._content.html())}}})(jQuery);var tdcUtil={};
(function(){tdcUtil={getRestEndPoint:function(f,c){return _.isEmpty(window.tdcAdminSettings.permalinkStructure)?window.tdcAdminSettings.wpRestUrl+f+"&"+c:window.tdcAdminSettings.wpRestUrl+f+"?"+c},makeSafeForCSS:function(f){return f.replace(/[^a-z0-9]/g,function(c){var b=c.charCodeAt(0);return 32===b?"-":65<=b&&90>=b?c.toLowerCase():"__"+("000"+b.toString(16)).slice(-4)})},updateTdcSavings:function(f,c){jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_parts","uuid="+
tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{tdc_savings:window.tdcAdminSettings.tdcSavings,action:"tdc_ajax_save_parts"}}).done(function(b,d,a){"success"===d&&(_.isObject(b)&&_.has(b,"errors")?new tdcNotice.notice(b.errors,!0,!1):("undefined"!==typeof c&&c.call(f),tdcSidebar.updateSavedShortcodes()))}).fail(function(b,d,a){})},b64EncodeUnicode:function(f){return btoa(encodeURIComponent(f).replace(/%([0-9A-F]{2})/g,
function(c,b){return String.fromCharCode("0x"+b)}))},b64DecodeUnicode:function(f){return decodeURIComponent(atob(f).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))},setStorageItem:function(f,c){tdcStore.add(f,c)},getStorageItem:function(f){return tdcStore.get(f)},setLocalStorageItem:function(f,c){var b=tdcUtil._getStorage();b=null===b?{}:JSON.parse(tdcUtil.b64DecodeUnicode(b));b[f]=c;tdcUtil._setStorage(tdcUtil.b64EncodeUnicode(JSON.stringify(b)))},getLocalStorageItem:function(f){var c=
tdcUtil._getStorage();if(null!==c)try{if(c=JSON.parse(tdcUtil.b64DecodeUnicode(c)),c.hasOwnProperty(f))return c[f]}catch(b){}},getScrollBarWidth:function(){var f=jQuery("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),c=jQuery("<div>").css({width:"100%"}).appendTo(f).outerWidth();f.remove();return 100-c},clearItem:function(){},_getStorage:function(){return window.localStorage.getItem(window.tdcAdminSettings.themeName)},_setStorage:function(f){window.localStorage.setItem(window.tdcAdminSettings.themeName,
f)}}})();var tdcRecycle;
(function(f,c,b){tdcRecycle={_maxItems:20,_currentIndex:0,_items:[],_timeout:b,_timoutSavingHistory:b,$_restoreItem:b,$_restoreContent:b,$_undo:b,$_redo:b,snapshotPath:"tdc_"+tdcAdminSettings.themeName,_enabled:b,_isInitialized:!1,item:function(b,a,e,c){this.timestamp=b;this.description=a;this.shortcode=e;this.headerTemplateData=c},init:function(){tdcRecycle._isInitialized||(tdcRecycle.$_restoreItem=f("#tdc-restore"),tdcRecycle.$_restoreContent=f("#tdc-restore-content"),tdcRecycle.$_undo=f(".tdc-restore-undo"),
tdcRecycle.$_redo=f(".tdc-restore-redo"),tdcRecycle.$_restoreItem.on("click",function(b){tdcRecycle.$_restoreContent.toggle()}),tdcRecycle.$_restoreContent.on("click",".tdc-snapshot",function(d){c.isUndefined(tdcRecycle._timeout)||clearTimeout(tdcRecycle._timeout);tdcRecycle._timeout=setTimeout(function(a){a=f(a);var e=new tdcJobManager.job,d=a.find(".tdc-snapshot-shortcode"),g=a.find(".tdc-snapshot-header"),m=tdcUtil.b64DecodeUnicode(d.html()),n=JSON.parse(tdcUtil.b64DecodeUnicode(g.html()));tdcNotice.removeAll();
tdcRecycle._currentIndex=a.prevAll(".tdc-snapshot").length;tdcRecycle.$_restoreContent.find(".tdc-snapshot-active").removeClass("tdc-snapshot-active");a.addClass("tdc-snapshot-active");e.shortcode=m;e.columns=3;e.success_callback=function(a){var e=f(tdcAdminIFrameUI._$liveIframe).contents(),h=e.find(".tdc-content-wrap");c.has(a,"replyHtml")&&h.html(a.replyHtml);window.addWrappers(e,".td-main-content-wrap","tdc_content");tdcIFrameData._isInitialized=!1;tdcIFrameData._postOriginalContentJSON=b;window.tdcPostSettings.postContent=
tdcUtil.b64EncodeUnicode(a.shortcode);tdcState.getHeaderTemplateId()!==n.tdc_header_template_id||tdcState.getHeaderTemplateContent()!==n.tdc_header_template_content?(tdcState.setHeaderTemplateId(n.tdc_header_template_id),tdcState.setHeaderTemplateContent(n.tdc_header_template_content),""===n.tdc_assoc_header_template?tdcState.setGlobalHeaderTemplate():tdcState.unsetGlobalHeaderTemplate(),"no_header"===n.tdc_header_template_id?tdcState.setNoHeader():tdcState.unsetNoHeader(),tdcState.isGlobalHeaderTemplate()?
tdcSidebar.$_headerTemplateList.val(""):tdcState.isNoHeader()?tdcSidebar.$_headerTemplateList.val(n.tdc_header_template_id):tdcSidebar.$_headerTemplateList.val("tdb_template_"+n.tdc_header_template_id),tdcIFrameData.setHeaderTemplate(n.tdc_header_template_content,b,{is_snapshot:!0,indexPath:d.data("index_path")})):(tdcState.isNoHeader()&&["tdc_header_desktop","tdc_header_desktop_sticky","tdc_header_mobile","tdc_header_mobile_sticky"].forEach(function(a,e){tdcIFrameData.rebuildZone(a,"[tdc_zone][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]",
b,{is_snapshot:!0})}),tdcIFrameData._callbackShortcodeRender({lateCallback:function(){var e=f(tdcAdminIFrameUI._$liveIframe).contents();tdcSidebar._currentModel=b;tdcIFrameData.init(e,!0);tdcRecycle.clearJsItems();tdcOperationUI.init(e);c.has(a,"replyJsForEval")&&tdcAdminIFrameUI.evalInIframe(a.replyJsForEval);tdcSidebarPanel.showShortcodeFromPath(d.data("index_path"))}}))};e.error_callback=function(a,e){tdcDebug.log(e);tdcDebug.log(a)};e.is_snapshot=!0;tdcJobManager.addJob(e);tdcSidebarPanel.clearPanel()},
500,this)}),tdcRecycle.$_undo.on("click",tdcRecycle._undo),tdcRecycle.$_redo.on("click",tdcRecycle._redo),tdcRecycle._enabled=tdcRecycle.isEnable(),tdcRecycle._isInitialized=!0,tdcRecycle._getData(),tdcRecycle.takeSnapshot(),tdcRecycle.setEnable(tdcRecycle._enabled),tdcRecycle.saveHeaderState(),tdcRecycle.saveFooterState(),document.body.addEventListener("keydown",tdcRecycle._checkKeyDown,!0),document.getElementById("tdc-live-iframe").contentDocument.addEventListener("keydown",tdcRecycle._checkKeyDown,
!0))},reinit:function(){tdcRecycle._isInitialized=!1;tdcRecycle.init()},isEnable:function(){var b=!1;"undefined"!==typeof window.tdcAdminSettings.globalSettings.tdcSavingHistory&&(b="true"===window.tdcAdminSettings.globalSettings.tdcSavingHistory);return b},setEnable:function(b){tdcRecycle._enabled=b;tdcRecycle._enabled?(tdcRecycle.$_undo.show(),tdcRecycle.$_redo.show(),tdcRecycle.takeSnapshot()):(tdcRecycle.$_undo.hide(),tdcRecycle.$_redo.hide())},_getData:function(){var b=tdcRecycle.$_restoreContent.find(".tdc-snapshot");
b.length&&b.each(function(){var a=f(this);a=new tdcRecycle.item(a.children(":nth-child(1)").data("timestamp"),"Restore point",tdcUtil.b64DecodeUnicode(a.children(":nth-child(3)").html()),a.children(":nth-child(4)").html());tdcRecycle._items.unshift(a)});1<tdcRecycle._items.length&&(tdcRecycle.$_undo.addClass("tdc-restore-active"),tdcRecycle.$_redo.removeClass("tdc-restore-active"))},_getIndexPath:function(b){var a="";if(!c.isUndefined(b)){a=b.get("parentModel");if(c.isUndefined(a))return"tdc_zone"===
b.get("tag")?tdcIFrameData.tdcTopCollection.indexOf(b):"";var e=a.get("childCollection");a=tdcRecycle._getIndexPath(a)+"_"+e.models.indexOf(b)}return a},_undo:function(b){1!==tdcRecycle._items.length&&(tdcRecycle._currentIndex++,tdcRecycle._currentIndex>tdcRecycle._items.length-1&&(tdcRecycle._currentIndex=tdcRecycle._items.length-1),tdcRecycle._currentIndex===tdcRecycle._items.length-1&&tdcRecycle.$_undo.removeClass("tdc-restore-active"),b=tdcRecycle.$_restoreContent.find(".tdc-snapshot:eq("+tdcRecycle._currentIndex+
")"),b.length&&b.trigger("click"),1<tdcRecycle._items.length&&tdcRecycle.$_redo.addClass("tdc-restore-active"))},_redo:function(b){1!==tdcRecycle._items.length&&(tdcRecycle._currentIndex--,0>tdcRecycle._currentIndex&&(tdcRecycle._currentIndex=0),0===tdcRecycle._currentIndex&&tdcRecycle.$_redo.removeClass("tdc-restore-active"),b=tdcRecycle.$_restoreContent.find(".tdc-snapshot:eq("+tdcRecycle._currentIndex+")"),b.length&&b.trigger("click"),1<tdcRecycle._items.length&&tdcRecycle.$_undo.addClass("tdc-restore-active"))},
_checkKeyDown:function(b){if(90===b.keyCode&&b.ctrlKey){if(b.shiftKey)return tdcRecycle._redo(),!1;b.preventDefault();tdcNotice.inError&&(tdcNotice.inError=!1);tdcRecycle._undo();return!1}if(83===b.keyCode&&b.ctrlKey)return b.preventDefault(),tdcAdminWrapperUI.savePostHandler(b),!1},saveHeaderState:function(){if(tdcRecycle._isInitialized){var d={error:b,getShortcode:""};tdcIFrameData.getShortcodeFromData(d);c.isUndefined(d.error)||tdcDebug.log(d.error);c.isUndefined(d.getShortcode)||""===d.getShortcode?
window.tdcAdminSettings.lastHeaderTemplateData="":(d=tdcSavePost.getHeaderTemplateData(),window.tdcAdminSettings.lastHeaderTemplateData=d.tdc_header_template_content)}},saveFooterState:function(){if(tdcRecycle._isInitialized){var d={error:b,getShortcode:""};tdcIFrameData.getShortcodeFromData(d);c.isUndefined(d.error)||tdcDebug.log(d.error);c.isUndefined(d.getShortcode)||""===d.getShortcode?window.tdcAdminSettings.lastFooterTemplateData="":(d=tdcSavePost.getFooterTemplateData(),window.tdcAdminSettings.lastFooterTemplateData=
tdcUtil.b64EncodeUnicode(JSON.stringify(d.tdc_footer_template_content)))}},takeSnapshot:function(d){if(tdcRecycle._isInitialized&&tdcRecycle._enabled){var a={error:b,getShortcode:""};tdcIFrameData.getShortcodeFromData(a);c.isUndefined(a.error)||tdcDebug.log(a.error);if(!c.isUndefined(a.getShortcode)&&""!==a.getShortcode){var e=tdcUtil.b64EncodeUnicode(JSON.stringify(tdcSavePost.getHeaderTemplateData()));if(!tdcRecycle._isLastSnapshot(a.getShortcode,e)){tdcRecycle._currentIndex=0;c.isUndefined(d)&&
(d="Restore point");var h=new Date;d=new tdcRecycle.item(h.getTime(),d,a.getShortcode,e);a=tdcRecycle._getIndexPath(tdcSidebar.getCurrentModel());tdcRecycle._maxItems===tdcRecycle._items.length&&(tdcRecycle._items.splice(tdcRecycle._items.length-1,1),tdcRecycle.$_restoreContent.find(".tdc-snapshot:last").remove());e=tdcRecycle.$_restoreContent.find(".tdc-snapshot-active");e.length&&(e.prevAll().each(function(a,e){tdcRecycle._items.splice(tdcRecycle._items.length-1,1);f(e).remove()}),e.removeClass("tdc-snapshot-active"));
tdcRecycle._items.push(d);tdcRecycle.$_restoreContent.prepend('<div class="tdc-snapshot tdc-snapshot-active"><div style="width: 150px; float: left">'+h.toLocaleDateString()+" "+h.toLocaleTimeString()+'</div><div style="width: 350px; float: left">Before '+d.description+'</div><div class="tdc-snapshot-shortcode" style="display: none" data-index_path="'+a+'">'+tdcUtil.b64EncodeUnicode(d.shortcode)+'</div><div class="tdc-snapshot-header" style="display: none">'+d.headerTemplateData+"</div></div>");1<
tdcRecycle._items.length&&(tdcRecycle.$_undo.addClass("tdc-restore-active"),tdcRecycle.$_redo.removeClass("tdc-restore-active"));clearTimeout(tdcRecycle._timoutSavingHistory);tdcRecycle._timoutSavingHistory=setTimeout(function(){tdcSavePost.saveHistory()},1E3)}}}},_isLastSnapshot:function(b,a){return 0===tdcRecycle._currentIndex&&tdcRecycle._items.length&&tdcRecycle._items[tdcRecycle._items.length-1].shortcode===b&&tdcRecycle._items[tdcRecycle._items.length-1].headerTemplateData===a?!0:!1},_cloneCurrentItem:function(){if(0!==
tdcRecycle._currentIndex){var b=tdcRecycle._items.find(function(a,e,b){return e===tdcRecycle._items.length-1-tdcRecycle._currentIndex});if(!c.isUndefined(b)){var a=new Date,e=new tdcRecycle.item(a.getTime(),b.description+" - restored",b.shortcode,b.headerTemplateData),h=tdcRecycle._getIndexPath(tdcSidebar.getCurrentModel());tdcRecycle._maxItems===tdcRecycle._items.length&&(tdcRecycle._items.splice(tdcRecycle._items.length-1,1),tdcRecycle.$_restoreContent.find(".tdc-snapshot:last").remove());tdcRecycle._items.push(e);
tdcRecycle.$_restoreContent.prepend('<div class="tdc-snapshot"><div style="width: 150px; float: left">'+a.toLocaleDateString()+" "+a.toLocaleTimeString()+'</div><div style="width: 350px; float: left">Before '+e.description+'</div><div class="tdc-snapshot-shortcode" style="display: none" data-index_path="'+h+'">'+tdcUtil.b64EncodeUnicode(e.shortcode)+'</div><div class="tdc-snapshot-header" style="display: none" data-index_path="'+h+'">'+tdcUtil.b64EncodeUnicode(e.headerTemplateData)+"</div></div>");
1<tdcRecycle._items.length&&(tdcRecycle.$_undo.addClass("tdc-restore-active"),tdcRecycle.$_redo.removeClass("tdc-restore-active"));return b.shortcode}}},clearJsItems:function(){if(tdcRecycle._isInitialized){var b=tdcAdminIFrameUI.getIframeWindow();if("undefined"!==typeof b.tdcComposerBlocksApi)for(;b.tdcComposerBlocksApi.items.length;)b.tdcComposerBlocksApi.deleteItem(b.tdcComposerBlocksApi.items[b.tdcComposerBlocksApi.items.length-1].blockUid);if("undefined"!==typeof b.tdPullDown)for(;b.tdPullDown.items.length;)b.tdPullDown.deleteItem(b.tdPullDown.items[b.tdPullDown.items.length-
1].blockUid);if("undefined"!==typeof b.tdAnimationSprite)for(;b.tdAnimationSprite.items.length;)b.tdAnimationSprite.deleteItem(b.tdAnimationSprite.items[b.tdAnimationSprite.items.length-1].blockUid);if("undefined"!==typeof b.tdHomepageFull)for(;b.tdHomepageFull.items.length;)b.tdHomepageFull.deleteItem(b.tdHomepageFull.items[b.tdHomepageFull.items.length-1].blockUid);if("undefined"!==typeof b.tdTrendingNow)for(;b.tdTrendingNow.items.length;)b.tdTrendingNow.deleteItem(b.tdTrendingNow.items[b.tdTrendingNow.items.length-
1].blockUid)}}}})(jQuery,_);var tdcState;
(function(f,c,b,d){tdcState={_headerTemplateId:"",_headerTemplateContent:"",_isGlobalHeaderTemplate:!1,_isNoHeader:!1,_isHeaderSticky:!1,_isMobileHeaderSticky:!1,_isGlobalFooterTemplate:!1,_isNoFooter:!1,_lang:"",_isMobileTemplate:!1,init:function(a,e,b,c,d,h,g,m,k,n){tdcState.setHeaderTemplateId(a);tdcState.setHeaderTemplateContent(e);b&&tdcState.setGlobalHeaderTemplate();c&&tdcState.setNoHeader();tdcState.setFooterTemplateId(d);tdcState.setFooterTemplateContent(h);g&&tdcState.setGlobalFooterTemplate();
m&&tdcState.setNoFooter();tdcState._isMobileTemplate=k;tdcState._lang=n},setHeaderTemplateId:function(a){tdcState._headerTemplateId=a;"no_header"===tdcState._headerTemplateId?tdcState.setNoHeader():tdcState.unsetNoHeader()},getHeaderTemplateId:function(){return tdcState._headerTemplateId},setHeaderTemplateContent:function(a){tdcState._headerTemplateContent=a},getHeaderTemplateContent:function(){return tdcState._headerTemplateContent},setGlobalHeaderTemplate:function(){tdcState._isGlobalHeaderTemplate=
!0},unsetGlobalHeaderTemplate:function(){tdcState._isGlobalHeaderTemplate=!1},isGlobalHeaderTemplate:function(){return tdcState._isGlobalHeaderTemplate},setNoHeader:function(){tdcState._isNoHeader=!0},unsetNoHeader:function(){tdcState._isNoHeader=!1},isNoHeader:function(){return tdcState._isNoHeader},setHeaderSticky:function(){tdcState._isHeaderSticky=!0},unsetHeaderSticky:function(){tdcState._isHeaderSticky=!1},isHeaderSticky:function(){return tdcState._isHeaderSticky},setMobileHeaderSticky:function(){tdcState._isMobileHeaderSticky=
!0},unsetMobileHeaderSticky:function(){tdcState._isMobileHeaderSticky=!1},isMobileHeaderSticky:function(){return tdcState._isMobileHeaderSticky},setFooterTemplateId:function(a){tdcState._footerTemplateId=a},getFooterTemplateId:function(){return tdcState._footerTemplateId},setFooterTemplateContent:function(a){tdcState._footerTemplateContent=a},getFooterTemplateContent:function(){return tdcState._footerTemplateContent},setGlobalFooterTemplate:function(){tdcState._isGlobalFooterTemplate=!0},unsetGlobalFooterTemplate:function(){tdcState._isGlobalFooterTemplate=
!1},isGlobalFooterTemplate:function(){return tdcState._isGlobalFooterTemplate},setNoFooter:function(){tdcState._isNoFooter=!0},unsetNoFooter:function(){tdcState._isNoFooter=!1},isNoFooter:function(){return tdcState._isNoFooter},setLang:function(a){tdcState._lang=a},getLang:function(){return tdcState._lang},isMobileComposer:function(){return"1"===tdcState._isMobileTemplate}};f=window.tdcPostSettings.headerTemplateId;c=window.tdcPostSettings.headerTemplateContent;var a=d=!1,e=window.tdcPostSettings.footerTemplateId,
h=tdcUtil.b64DecodeUnicode(window.tdcPostSettings.footerTemplateContent),g=!1,m=!1,n="";""===f?(f=window.tdcAdminSettings.globalHeaderTemplateId.toString().replace("tdb_template_",""),c=window.tdcAdminSettings.globalHeaderTemplateContent,d=!0):"no_header"===f&&(a=!0);if(""!==c){var k=JSON.parse(tdcUtil.b64DecodeUnicode(c));b.isUndefined(k.tdc_is_header_sticky)||!0!==k.tdc_is_header_sticky||tdcState.setHeaderSticky();b.isUndefined(k.tdc_is_mobile_header_sticky)||!0!==k.tdc_is_mobile_header_sticky||
tdcState.setMobileHeaderSticky()}""===e?(e=window.tdcAdminSettings.globalFooterTemplateId.toString().replace("tdb_template_",""),h=tdcUtil.b64DecodeUnicode(window.tdcAdminSettings.globalFooterTemplateContent),g=!0):"no_footer"===e&&(m=!0);""!==window.tdcAdminSettings.lang&&(n=window.tdcAdminSettings.lang);tdcState.init(f,c,d,a,e,h,g,m,tdcPostSettings.isMobileTemplate,n)})(jQuery,Backbone,_);var tdcStore;
(function(f,c,b){tdcStore={_db:b,_dbName:b,_dbStoreName:b,_indexedDB:b,_isInitialized:!1,init:function(b,a){tdcStore._isInitialized||(tdcStore._indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,tdcStore._indexedDB?(tdcStore._dbName=b,tdcStore._dbStoreName=a):console.log("Your browser doesn't support a stable version of IndexedDB. The TagDiv composer can not keep the history!"),tdcStore._isInitialized=!0)},openDb:function(){if(tdcStore._isInitialized){var b=
tdcStore._indexedDB.open(tdcStore._dbName);b.onsuccess=function(a){tdcStore._db=this.result};b.onupgradeneeded=function(a){a.currentTarget.result.createObjectStore(tdcStore._dbStoreName,{keyPath:"id"})}}},getObjectStore:function(b,a){if(tdcStore._isInitialized)return tdcStore._db.transaction(b,a).objectStore(b)},add:function(b,a){if(tdcStore._isInitialized){b={id:b,content:a};a=tdcStore.getObjectStore(tdcStore._dbStoreName,"readwrite");try{var e=a.put(b)}catch(h){throw console.log(h.name),h;}e.onsuccess=
function(a){};e.onerror=function(){}}},get:function(b){var a=f.Deferred(),e=tdcStore.getObjectStore(tdcStore._dbStoreName,"readwrite");try{var c=e.get(b)}catch(g){throw console.log(g.name),g;}c.onsuccess=function(e){a.resolve(this)};c.onerror=function(){};return a}};tdcStore.init("TagDivComposer","History");tdcStore.openDb()})(jQuery,_);var tdcSavePost;
(function(f,c,b,d){tdcSavePost={content:d,savePost:function(){if(b.isUndefined(window.tdcPostSettings.tdbTemplateType)||"header"!==window.tdcPostSettings.tdbTemplateType&&"footer"!==window.tdcPostSettings.tdbTemplateType){if("single"===window.tdcPostSettings.tdbTemplateType){var a=f("#tdc-live-iframe");if(a.length){var e=a.contents().find(".td_block_wrap.tdb_single_content:first");if(e.length){var c=a.width();a.width("100%");tdcLivePanel.$tdcSinglePostContentWidth.val(e.outerWidth(!0));a.width(c)}}}a=
{error:d,getShortcode:""};tdcIFrameData.getShortcodeFromData(a);b.isUndefined(a.error)||tdcDebug.log(a.error);b.isUndefined(a.getShortcode)||b.isUndefined(window.tdcPostSettings)||(tdcSavePost.content=a.getShortcode,tdcLivePanel.$tdcAction.val("tdc_ajax_save_post"),tdcLivePanel.$tdcContent.val(tdcSavePost.content),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_post","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce);
tdcLivePanelMenuSettings.saveMenuSettings()},data:tdcLivePanel.$panel.serialize()}).done(function(a,e,c){window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(tdcSavePost.content);f(".tdc-save-page").removeClass("tdc-saving-loader");"success"===e&&(b.isObject(a)&&b.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):new tdcNotice.notice("Content Successfully Saved!",!1,!0),tdcMain.resetContentModified())}).fail(function(a,e,b){console.log("%ctd-composer/save_post - ERROR","background: #ffaa00; color: #ffffff; padding: 3px 6px",
{type:"AJAX ERROR",message:"Invalid reply from server endpoint.",debug_data:{endpoint:"td-composer/save_post",request:a,error:a.responseText!==d?"Error - check for php warnings/notices: "+a.responseText:""}})}))}},saveHistory:function(){if(1!==tdcRecycle._items.length){for(var a=[],e=0;e<tdcRecycle._items.length;e++)a.push({timestamp:tdcRecycle._items[e].timestamp,description:tdcRecycle._items[e].description,shortcode:tdcUtil.b64EncodeUnicode(tdcRecycle._items[e].shortcode),headerTemplateData:tdcRecycle._items[e].headerTemplateData});
tdcLivePanel.$tdcAction.val("tdc_ajax_save_history");tdcLivePanel.$tdcContent.val(tdcUtil.b64EncodeUnicode(JSON.stringify(a)));tdcStore.add(tdcRecycle.snapshotPath+"-"+tdcLivePanel.$tdcPostId.val(),JSON.stringify(a))}},updateHeaderTemplate:function(){var a=tdcSavePost.getHeaderTemplateData(),e={td_magic_token:tdcLivePanel.$token.val(),tdc_action:"update_header_template",tdc_header_template_id:a.tdc_header_template_id,tdc_header_template_content:a.tdc_header_template_content,tdc_assoc_header_template:a.tdc_assoc_header_template,
tdc_post_id:tdcLivePanel.$tdcPostId.val()};window.tdcAdminSettings.lastHeaderTemplateData=a.tdc_header_template_content;f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/update_header_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:e}).done(function(a,e,c){window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(tdcSavePost.content);f(".tdc-save-page").removeClass("tdc-saving-loader");
"success"===e&&b.isObject(a)&&(b.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(b.has(a,"header_template_id")&&(tdcState.setHeaderTemplateId(a.header_template_id),tdcSidebar.updateHeaderTemplates()),tdcMain.resetContentModified(),tdcSidebar.setCurrentHeaderTemplate(),new tdcNotice.notice("Header Successfully Saved!",!1,!0)))}).fail(function(a,e,b){})},getHeaderTemplateData:function(){var a=tdcState.getHeaderTemplateId(),e="",b={};""!==a&&"no_header"!==a&&(e=tdcUtil.b64EncodeUnicode(JSON.stringify(tdcIFrameData.getHeaderShortcodeFromData())));
tdcState.setHeaderTemplateId(a);tdcState.setHeaderTemplateContent(e);b.tdc_header_template_id=a;b.tdc_header_template_content=e;b.tdc_assoc_header_template=tdcState.isGlobalHeaderTemplate()?"":!0;return b},cloudLoadHeaderTemplate:function(a,e,c,g,m){b.isUndefined(a)||(g={td_magic_token:tdcLivePanel.$token.val(),tdc_action:"load_header_template",tdc_header_template_content:a,tdc_header_template_title:g},b.isUndefined(c)||(g.tdc_header_template_id=c),b.isUndefined(m)||(g.tdc_header_is_mobile=m),f.ajax({timeout:1E4,
type:"POST",url:tdcUtil.getRestEndPoint("td-composer/load_header_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:g}).done(function(c,h,g){"success"===h&&b.isObject(c)&&(b.has(c,"errors")?new tdcNotice.notice(c.errors,!0,!1):b.has(c,"header_template_id")&&(tdcState.setHeaderTemplateId(c.header_template_id),tdcState.unsetGlobalHeaderTemplate()),tdcSidebar.updateHeaderTemplates(),tdcIFrameData.setHeaderTemplate(a,
e),b.isUndefined(window.tdcPostSettings.prevTemplateType)||(window.tdcPostSettings.tdbTemplateType=window.tdcPostSettings.prevTemplateType,window.tdcPostSettings.prevTemplateType=d))}).fail(function(a,e,b){}))},assignCloudLoadHeaderTemplate:function(a,e,c,g,m,n,k){b.isUndefined(a)||(a={td_magic_token:tdcLivePanel.$token.val(),tdc_action:"load_header_template",tdc_header_template_content:a,tdc_header_template_title:g,tdc_header_is_mobile:!0},b.isUndefined(c)||(a.tdc_header_template_id=c),b.isUndefined(m)||
(a.tdc_header_is_mobile=m),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/load_header_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:a}).done(function(a,e,c){"success"===e&&b.isObject(a)&&(b.has(a,"errors")&&new tdcNotice.notice(a.errors,!0,!1),!b.has(a,"header_template_id")||b.isUndefined(n)||b.isUndefined(k)||n.call(k,a.header_template_id),b.isUndefined(window.tdcPostSettings.prevTemplateType)||
(window.tdcPostSettings.tdbTemplateType=window.tdcPostSettings.prevTemplateType,window.tdcPostSettings.prevTemplateType=d))}).fail(function(a,e,b){}))},cloudLoadFooterTemplate:function(a,e,c,g){b.isUndefined(a)||(g={td_magic_token:tdcLivePanel.$token.val(),tdc_action:"load_footer_template",tdc_footer_template_content:a,tdc_footer_template_title:g},b.isUndefined(c)||(g.tdc_footer_template_id=c),tdcState.isMobileComposer()&&(g.tdc_footer_is_mobile=1),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/load_footer_template",
"uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:g}).done(function(c,h,g){"success"===h&&b.isObject(c)&&(b.has(c,"errors")?new tdcNotice.notice(c.errors,!0,!1):b.has(c,"footer_template_id")&&(tdcState.setFooterTemplateId(c.footer_template_id),tdcState.unsetGlobalFooterTemplate()),tdcSidebar.updateFooterTemplates(),tdcIFrameData.setFooterTemplate(a,e),b.isUndefined(window.tdcPostSettings.prevTemplateType)||(window.tdcPostSettings.tdbTemplateType=
window.tdcPostSettings.prevTemplateType,window.tdcPostSettings.prevTemplateType=d))}).fail(function(a,e,b){}))},getFooterTemplateData:function(){var a=tdcState.getFooterTemplateId(),e="",b={};""!==a&&"no_footer"!==a&&(e=tdcIFrameData.getFooterShortcodeFromData());tdcState.setFooterTemplateId(a);tdcState.setFooterTemplateContent(e);b.tdc_footer_template_id=a;b.tdc_footer_template_content=e;b.tdc_assoc_footer_template=tdcState.isGlobalFooterTemplate()?"":!0;return b},saveMobileMenu:function(a,e){f.ajax({timeout:1E4,
type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_header_mobile_menu","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:{template_id:a,menu_id:e}}).done(function(a,c,d){"success"===c&&(b.isObject(a)&&b.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):window.tdcPostSettings.mobileMenuId=e)}).fail(function(a,e,b){})},updateFooterTemplate:function(){var a=tdcSavePost.getFooterTemplateData(),e={td_magic_token:tdcLivePanel.$token.val(),
tdc_action:"update_footer_template",tdc_footer_template_id:a.tdc_footer_template_id,tdc_footer_template_content:a.tdc_footer_template_content,tdc_assoc_footer_template:a.tdc_assoc_footer_template,tdc_post_id:tdcLivePanel.$tdcPostId.val()};tdcState.isMobileComposer()&&(e.tdc_footer_is_mobile=1);window.tdcAdminSettings.lastFooterTemplateData=a.tdc_footer_template_content;f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/update_footer_template","uuid="+tdcJobManager._getUniqueID()),
beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:e}).done(function(a,e,c){window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(tdcSavePost.content);f(".tdc-save-page").removeClass("tdc-saving-loader");"success"===e&&b.isObject(a)&&(b.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(b.has(a,"footer_template_id")&&(tdcState.setFooterTemplateId(a.footer_template_id),tdcSidebar.updateFooterTemplates()),tdcMain.resetContentModified(),tdcSidebar.setCurrentFooterTemplate(),
new tdcNotice.notice("Footer Successfully Saved!",!1,!0)))}).fail(function(a,e,b){})}}})(jQuery,Backbone,_);var tdcShortcodeParser={};
(function(){tdcShortcodeParser={levels:{},init:function(f){tdcShortcodeParser.levels=_.clone(f);tdcShortcodeParser.levels[3]=tdcShortcodeParser.levels[3].concat(tdcShortcodeParser.levels[5])},multiNext:function(f,c){f=tdcShortcodeParser.levels[f];for(var b,d=0;d<f.length;d++){var a=tdcShortcodeParser.generateTreeElement(wp.shortcode.next(f[d],c));"undefined"!==typeof a&&("undefined"===typeof b||b.index>a.index)&&(b=a)}return b},parse:function(f,c){for(var b=tdcShortcodeParser.multiNext(f,c),d=0,a=
[];"undefined"!==typeof b&&5E3>d;)c=c.substring(b.index+b.content.length),5>f&&(b.child=tdcShortcodeParser.parse(f+1,b.content)),a.push(b),b=tdcShortcodeParser.multiNext(f,c),d++;return a},generateTreeElement:function(f){return f}}})();var tdcJobManager={};
(function(){tdcJobManager={_sentJobs:{},totalJobsCount:0,job:function(){this.shortcode="";this.columns=0;this.error_callback=this.success_callback=this.blockUid=""},jobRequest:function(f){this.shortcode=f.shortcode;this.columns=f.columns;this.jobId=tdcJobManager._generateJobId();this.postId=window.tdcPostSettings.postId;this.replyHtml=""},addJob:function(f){tdcMain.setContentModified();tdcDebug.group("%c tdcJobManager.addJob","background-color:#2489c2; color:white");var c=new tdcJobManager.jobRequest(f),
b="";!1!==window.tdcPostSettings.tdbLoadDataFromId&&(b+="&tdbLoadDataFromId="+window.tdcPostSettings.tdbLoadDataFromId);!1!==window.tdcPostSettings.tdbTemplateType&&(b+="&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType);jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/do_job","tmp_jobId="+c.jobId+"&tmp_blockUid="+c.blockUid+"&post_id="+window.tdcPostSettings.postId+b+"&uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},cache:!1,data:c,dataType:"json",statusCode:{404:function(){console.log("tdcJobManager.addJob - ERROR: 404 not found")},500:function(){console.log("tdcJobManager.addJob - ERROR: 500 server error")}},success:function(b,a,e){null===b?f.error_callback(c,"tdcJobManager.addJob - ERROR: Empty response received from server"):(!0===tdcJobManager._isJobCallbackReplyValid(f.blockUid,b.jobId)?f.success_callback(b):tdcDebug.log("tdcJobManager.addJob - dropped job :) (probably it's older than the last timestamp)"),
tdcDebug.groupEnd())},error:function(b,a,e){f.error_callback(c,"tdcJobManager.addJob - Error callback - textStatus: "+a+" errorThrown: "+e);tdcDebug.groupEnd()}})},_isJobCallbackReplyValid:function(f,c){return"undefined"===typeof tdcJobManager._sentJobs[f]||parseInt(tdcJobManager._sentJobs[f])<parseInt(c)?(tdcJobManager._sentJobs[f]=c,!0):!1},_generateJobId:function(){var f=tdcJobManager.totalJobsCount;tdcJobManager.totalJobsCount++;return f},_getUniqueID:function(){function f(){return Math.floor(65536*
(1+Math.random())).toString(16).substring(1)}return f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f()}}})();var tdcAdminWrapperUI;
(function(f,c){tdcAdminWrapperUI={$placeholder:c,$helper:c,$savePage:c,$saveAll:c,$saveHeader:c,$saveFooter:c,$saveContent:c,_helperClass:"",_dropPosition:"",$recycle:c,_initialized:!1,init:function(){tdcAdminWrapperUI._tdcJqObjElements=f(".tdc-sidebar-elements");tdcAdminWrapperUI.helperId="tdc-dragged-helper";tdcAdminWrapperUI.placeholderId="tdc-placeholder";tdcAdminWrapperUI.maskId="tdc-mask";tdcAdminWrapperUI.$helper=f('<div id="'+tdcAdminWrapperUI.helperId+'"></div>');tdcAdminWrapperUI.$placeholder=
f('<span id="'+tdcAdminWrapperUI.placeholderId+'"></span>');f("body").append(tdcAdminWrapperUI.$helper);f("body").append(tdcAdminWrapperUI.$placeholder);tdcAdminWrapperUI.$savePage=f(".tdc-save-page");tdcAdminWrapperUI.$saveAll=f(".tdc-save-all");tdcAdminWrapperUI.$saveAll.on("click",tdcAdminWrapperUI.savePostHandler);tdcAdminWrapperUI.$saveHeader=f(".tdc-save-header");tdcAdminWrapperUI.$saveHeader.on("click",tdcAdminWrapperUI.saveHeaderHandler);tdcAdminWrapperUI.$saveFooter=f(".tdc-save-footer");
tdcAdminWrapperUI.$saveFooter.on("click",tdcAdminWrapperUI.saveFooterHandler);tdcAdminWrapperUI.$saveContent=f(".tdc-save-content");tdcAdminWrapperUI.$saveContent.on("click",tdcAdminWrapperUI.saveContentHandler);f(document).bind("click",function(b){f("#tdc-context-menu").hide()})},savePostHandler:function(b){tdcAdminWrapperUI.$savePage.hasClass("tdc-saving-loader")||(tdcAdminWrapperUI.$savePage.addClass("tdc-saving-loader"),"Newspaper"===window.tdcAdminSettings.themeName&&(tdcSavePost.updateHeaderTemplate(),
tdcSavePost.updateFooterTemplate()),tdcSavePost.savePost())},saveHeaderHandler:function(b){tdcAdminWrapperUI.$savePage.hasClass("tdc-saving-loader")||(tdcAdminWrapperUI.$savePage.addClass("tdc-saving-loader"),"Newspaper"===window.tdcAdminSettings.themeName&&tdcSavePost.updateHeaderTemplate())},saveFooterHandler:function(b){tdcAdminWrapperUI.$savePage.hasClass("tdc-saving-loader")||(tdcAdminWrapperUI.$savePage.addClass("tdc-saving-loader"),"Newspaper"===window.tdcAdminSettings.themeName&&tdcSavePost.updateFooterTemplate())},
saveContentHandler:function(b){tdcAdminWrapperUI.$savePage.hasClass("tdc-saving-loader")||(tdcAdminWrapperUI.$savePage.addClass("tdc-saving-loader"),tdcSavePost.savePost())},setHelperClass:function(b){tdcAdminWrapperUI._helperClass!==b&&(tdcAdminWrapperUI._helperClass=b,tdcAdminWrapperUI.$helper.addClass(b))},setHelperDropPosition:function(b){tdcAdminWrapperUI._dropPosition!==b&&(tdcAdminWrapperUI._dropPosition=b,tdcAdminWrapperUI.$helper.html('<span class="tdc-zone-drop">'+b+"</span>"))},getHelperClass:function(){return tdcAdminWrapperUI._helperClass},
clearHelperClass:function(){tdcAdminWrapperUI._helperClass=""},clearHelperDropPosition:function(){tdcAdminWrapperUI._dropPosition=""}};tdcAdminWrapperUI.init()})(jQuery);var tdcOperationUI;
(function(f,c,b,d){tdcOperationUI={iframeContents:d,_draggedElement:{$element:d},_currentElementOver:{$element:d},_copiedElement:{$element:d},_emptyElementClass:"tdc-element-empty",_isPlaceholderVisible:!1,_intervalUpdateInfoHelper:d,_isMenuDeactivated:!1,_isActiveElementOver:!1,init:function(a,b){window.previousMouseClientX=0;window.previousMouseClientY=0;tdcOperationUI.iframeContents=a;tdcZoneUI.init(tdcOperationUI.iframeContents);tdcRowUI.init(tdcOperationUI.iframeContents);tdcColumnUI.init(tdcOperationUI.iframeContents);
tdcInnerRowUI.init(tdcOperationUI.iframeContents);tdcInnerColumnUI.init(tdcOperationUI.iframeContents);tdcElementUI.init(tdcOperationUI.iframeContents);tdcRecycleUI.init(b);tdcOperationUI.iframeContents.find("body").find("#"+tdcAdminWrapperUI.maskId).length||(tdcAdminWrapperUI.$mask=f('<div id="'+tdcAdminWrapperUI.maskId+'"></div>'),tdcOperationUI.iframeContents.find("body").append(tdcAdminWrapperUI.$mask));tdcMaskUI.init(tdcAdminWrapperUI.$mask,b);b&&(f(window).mousedown(function(a){tdcOperationUI.inactiveElementOver()}).mouseup(function(a){tdcOperationUI.deactiveDraggedElement();
tdcOperationUI.hideHelper()}).mousemove(function(a){tdcOperationUI.showHelper(a)}).keydown(function(a){tdcOperationUI._keyDownHandler(a)}),a.mousedown(function(a){tdcSidebar.setSettings({$currentZone:d,$currentRow:d,$currentColumn:d,$currentInnerRow:d,$currentInnerColumn:d,$currentElement:d});tdcSidebar.closeModals()}).mouseup(function(a){tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper();tdcOperationUI.setCurrentElementOver(d);tdcElementUI.positionElementPlaceholder(a)}).mousemove(function(a){tdcOperationUI.showHelper(a);
window.previousMouseClientX=a.clientX;window.previousMouseClientY=a.clientY}).scroll(function(a){tdcOperationUI.isElementDragged()?tdcElementUI.positionElementPlaceholder(a):tdcOperationUI.isInnerColumnDragged()?tdcInnerColumnUI.positionInnerColumnPlaceholder(a):tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?tdcInnerRowUI.positionInnerRowPlaceholder(a):tdcOperationUI.isColumnDragged()?tdcColumnUI.positionColumnPlaceholder(a):(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())&&
tdcRowUI.positionRowPlaceholder(a)}).keydown(function(a){tdcOperationUI._keyDownHandler(a)}),tdcAdminWrapperUI.$helper.mouseup(function(a){tdcOperationUI.hideHelper()}))},_keyDownHandler:function(a){if(27===a.keyCode){var b=tdcOperationUI.getSelectedElement();tdcContextMenu.setContextMenu(a,b)&&tdcContextMenu.exitHandler(a)}tdcOperationUI.isActiveElementOver()&&(67===a.keyCode?a.ctrlKey&&(b=tdcOperationUI.getSelectedElement(),tdcContextMenu.setContextMenu(a,b)&&tdcContextMenu.copyShortcodeHandler(a)):
86===a.keyCode?a.ctrlKey&&(b=tdcOperationUI.getActiveElementOver(),tdcContextMenu.setContextMenu(a,b)&&(a.shiftKey?tdcContextMenu.pasteBeforeShortcodeHandler(a):tdcContextMenu.pasteAfterShortcodeHandler(a))):83===a.keyCode?a.shiftKey&&(b=tdcOperationUI.getActiveElementOver(),tdcContextMenu.setContextMenu(a,b)&&tdcContextMenu.saveShortcodeHandler(a)):68===a.keyCode?a.ctrlKey&&(b=tdcOperationUI.getActiveElementOver(),tdcContextMenu.setContextMenu(a,b)&&tdcContextMenu.cloneHandler(a)):88===a.keyCode?
a.ctrlKey&&(b=tdcOperationUI.getActiveElementOver(),tdcContextMenu.setContextMenu(a,b)&&tdcContextMenu.cutShortcodeHandler(a)):"Delete"===a.key&&(b=tdcOperationUI.getSelectedElement(),tdcContextMenu.setContextMenu(a,b)&&tdcContextMenu.deleteHandler(a)))},setDraggedElement:function(a){tdcOperationUI._draggedElement.$element=a;b.isUndefined(a)||(tdcOperationUI._draggedElement.classes=a[0].className.split(" "))},getDraggedElement:function(){return tdcOperationUI._draggedElement.$element},hasClassDraggedElement:function(a){if(!b.isUndefined(tdcOperationUI._draggedElement.$element))return-1!==
tdcOperationUI._draggedElement.classes.indexOf(a)},addClassDraggedElement:function(a){b.isUndefined(tdcOperationUI._draggedElement.$element)||tdcOperationUI._draggedElement.$element.addClass(a)},setCurrentElementOver:function(a){if(!b.isUndefined(a)||!b.isUndefined(tdcOperationUI._currentElementOver.$element))if(b.isUndefined(a)||b.isUndefined(tdcOperationUI._currentElementOver.$element)||!a.is(tdcOperationUI._currentElementOver.$element.get(0)))tdcOperationUI._currentElementOver.$element=a,b.isUndefined(a)||
(tdcOperationUI._currentElementOver.elementOuterHeight=a.outerHeight(!0),tdcOperationUI._currentElementOver.elementOuterWidth=a.outerWidth(!0),tdcOperationUI._currentElementOver.elementHeight=a.outerHeight(),tdcOperationUI._currentElementOver.elementWidth=a.outerWidth(),tdcOperationUI._currentElementOver.elementOffset=a.offset(),tdcOperationUI._currentElementOver.elementPosition=a.position(),tdcSidebarPanel.blurInputPanel(),tdcOperationUI.activeElementOver())},getCurrentElementOver:function(){return tdcOperationUI._currentElementOver.$element},
activeElementOver:function(a){b.isUndefined(a)&&(a=tdcOperationUI.getCurrentElementOver());b.isUndefined(a)||a.hasClass("tdc-recycle")||(tdcOperationUI._isActiveElementOver=!0,a.addClass("tdc-element-active"))},inactiveElementOver:function(){var a=tdcAdminIFrameUI.getLiveIframe().contents().find(".tdc-element-active");a.length&&a.removeClass("tdc-element-active");tdcOperationUI._isActiveElementOver=!1},isActiveElementOver:function(){return tdcOperationUI._isActiveElementOver},getActiveElementOver:function(){if(tdcOperationUI._isActiveElementOver){var a=
tdcAdminIFrameUI.getLiveIframe().contents().find(".tdc-element-active");if(a.length)return a}},getSelectedElement:function(){var a=tdcAdminIFrameUI.getLiveIframe().contents().find(".tdc-element-selected");if(a.length)return a},getCurrentElementOverOuterHeight:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementOuterHeight))return tdcOperationUI._currentElementOver.elementOuterHeight},getCurrentElementOverOuterWidth:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&
!b.isUndefined(tdcOperationUI._currentElementOver.elementOuterWidth))return tdcOperationUI._currentElementOver.elementOuterWidth},getCurrentElementOverHeight:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementHeight))return tdcOperationUI._currentElementOver.elementHeight},getCurrentElementOverOffset:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementOffset))return tdcOperationUI._currentElementOver.elementOffset},
getCurrentElementOverPosition:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementPosition))return tdcOperationUI._currentElementOver.elementPosition},_placeholderCacheCssSettings:{classes:d,props:d},setPlaceholderCss:function(a){if(b.isUndefined(tdcOperationUI._placeholderCacheCssSettings)||!b.isEqual(tdcOperationUI._placeholderCacheCssSettings,a))tdcOperationUI._placeholderCacheCssSettings=a,tdcAdminWrapperUI.$placeholder.css(a)},
setReadyToMove:function(){var a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||a.addClass("tdc-ready-to-move")},clearReadyToMove:function(){var a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||a.removeClass("tdc-ready-to-move")},setCopyElement:function(a){tdcOperationUI._copiedElement.$element=a},getCopiedElement:function(){return tdcOperationUI._copiedElement.$element},isCopy:function(){return!b.isUndefined(tdcOperationUI._copiedElement.$element)},activeDraggedElement:function(a){tdcOperationUI.setDraggedElement(a);
tdcOperationUI.hasClassDraggedElement("tdc-dragged")||tdcOperationUI.addClassDraggedElement("tdc-dragged")},deactiveDraggedElement:function(){var a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||(a.removeClass("tdc-dragged"),tdcOperationUI._moveDraggedElement(),tdcOperationUI.setDraggedElement(d))},showHelper:function(a){var e=tdcAdminWrapperUI.$helper,c=tdcOperationUI.getDraggedElement();if(b.isUndefined(c))tdcOperationUI.hideHelper(),tdcRecycleUI.hide(),tdcOperationUI.setLiveIframeCss("tdc-active-helper",
!0);else{var d=0;!0!==tdcMain.getSidebarInline()||!1!==tdcMain.getSidebarHidden()||f(a.target).closest("#tdc-sidebar").length||(d=tdcSidebar.$_sidebar.width());var m=tdcAdminIFrameUI.getLiveIframe().width(),n=0;window.innerWidth!==m&&(n=(window.innerWidth-m)/2,!0===tdcMain.getSidebarInline()&&!1===tdcMain.getSidebarHidden()&&(n-=tdcSidebar.$_sidebar.width()/2));f(a.target).closest("#tdc-sidebar").length?n=0:f(a.target).closest("#tdc-live-iframe-wrapper").length&&(n=0,tdcMain.getSidebarInline()&&(n=
-tdcSidebar.$_sidebar.width()));e.css({left:a.clientX-30+d+n,top:a.clientY-22});e.show();tdcOperationUI.deactivateMenu();tdcOperationUI.setLiveIframeCss("tdc-active-helper");a=c.data("shortcodeName");e=c.data("templateContent");b.isUndefined(a)&&b.isUndefined(e)&&(c=c.data("model_id"),a=tdcIFrameData.getModel(c).get("tag"));if(!b.isUndefined(a)&&(tdcAdminWrapperUI.setHelperClass("tdc-element-ico tdc-ico-"+a),c=tdcOperationUI.getCurrentElementOver(),!b.isUndefined(tdcOperationUI.getDraggedElement())&&
!b.isUndefined(c))){a=c.data("model_id");c="";if(!b.isUndefined(a))for(a=tdcIFrameData.getModel(a),c=a.get("attrs"),c=b.has(c,"custom_title")?c.custom_title:a.get("tag"),a=a.get("parentModel");!b.isUndefined(a);){e=a.get("tag");switch(e){case "tdc_zone":switch(a.get("attrs").type){case "tdc_header_desktop":e="Header Desktop";break;case "tdc_header_desktop_sticky":e="Header Desktop Sticky";break;case "tdc_header_mobile":e="Header Mobile";break;case "tdc_header_mobile_sticky":e="Header Mobile Sticky";
break;case "tdc_content":e="Content";break;case "tdc_footer":e="Footer"}tdcAdminWrapperUI.setHelperDropPosition(e);break;case "vc_row":e="row";break;case "vc_column":e="column";break;case "vc_row_inner":e="inner-row";break;case "vc_column_inner":e="inner-column"}c=e+" > "+c;a=a.get("parentModel")}tdcSidebar.setSidebarInfo(c)}tdcRecycleUI.show()}},hideHelper:function(){tdcAdminWrapperUI.clearHelperClass();tdcAdminWrapperUI.clearHelperDropPosition();tdcAdminWrapperUI.$helper.hide();tdcAdminWrapperUI.$helper.removeClass();
tdcOperationUI.activateMenu()},setLiveIframeCss:function(a,e){var c=tdcAdminIFrameUI.getLiveIframe();b.isUndefined(e)?c.contents().find("body").addClass(a):c.contents().find("body").removeClass(a)},activateMenu:function(){if(tdcOperationUI._isMenuDeactivated){var a=tdcAdminIFrameUI.getLiveIframe().contents().find(".td-header-wrap");a.length&&a.removeClass("tdc-inactive-menu");tdcOperationUI._isMenuDeactivated=!1}},deactivateMenu:function(){if(!tdcOperationUI._isMenuDeactivated){var a=tdcAdminIFrameUI.getLiveIframe().contents().find(".td-header-wrap");
a.length&&a.addClass("tdc-inactive-menu");tdcOperationUI._isMenuDeactivated=!0}},updateInfoHelper:function(a){},showPlaceholder:function(){var a=tdcAdminWrapperUI.$placeholder;!1===tdcOperationUI._isPlaceholderVisible&&(tdcOperationUI._isPlaceholderVisible=!0,a.show(),tdcOperationUI.updateInfoHelper(d))},hidePlaceholder:function(){var a=tdcAdminWrapperUI.$placeholder;!0===tdcOperationUI._isPlaceholderVisible&&(tdcOperationUI._isPlaceholderVisible=!1,a.hide(),tdcOperationUI.updateInfoHelper(!0))},
isPlaceholderVisible:function(){return tdcOperationUI._isPlaceholderVisible},isRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement(tdcRowUI.getElementCssClass())},inRow:function(a){a=a.closest("."+tdcRowUI.getElementCssClass());if(a.length)return a},isRow:function(a){return a.hasClass(tdcRowUI.getElementCssClass())},inZone:function(a){a=a.closest("."+tdcZoneUI.getElementCssClass());if(a.length)return a},isZone:function(a){return a.hasClass(tdcZoneUI.getElementCssClass())},
isTempRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-row-temp")},isElementWithRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element-with-row")},isColumnDragged:function(a){var e=tdcOperationUI.getDraggedElement();e=!b.isUndefined(e)&&tdcOperationUI.hasClassDraggedElement(tdcColumnUI.getElementCssClass());b.isUndefined(a)||(e=e&&(0<
a.siblings(".tdc-column.tdc-dragged").length||a.hasClass("tdc-dragged")));return e},inColumn:function(a){a=a.closest("."+tdcColumnUI.getElementCssClass());if(a.length)return a},isColumn:function(a){return a.hasClass(tdcColumnUI.getElementCssClass())},isInnerRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement(tdcInnerRowUI.getElementCssClass())},inInnerRow:function(a){a=a.closest("."+tdcInnerRowUI.getElementCssClass());if(a.length)return a},
isInnerRow:function(a){return a.hasClass(tdcInnerRowUI.getElementCssClass())},isTempInnerRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element-inner-row-temp")},isInnerColumnDragged:function(a){var e=tdcOperationUI.getDraggedElement();e=!b.isUndefined(e)&&tdcOperationUI.hasClassDraggedElement(tdcInnerColumnUI.getElementCssClass());b.isUndefined(a)||(e=e&&(0<a.siblings(".tdc-inner-column.tdc-dragged").length||a.hasClass("tdc-dragged")));
return e},inInnerColumn:function(a){a=a.closest("."+tdcInnerColumnUI.getElementCssClass());if(a.length)return a},isInnerColumn:function(a){return a.hasClass(tdcInnerColumnUI.getElementCssClass())},isElement:function(a){return a.hasClass(tdcElementUI.getElementCssClass())},isElementDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element")},isSidebarElementDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&
tdcOperationUI.hasClassDraggedElement("tdc-sidebar-element")},getRowStartValues:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI._draggedElement.$element.data("row-start-values")},setPlaceholder:function(a,e){var c=tdcAdminWrapperUI.$placeholder;if(b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.classes)||!b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.classes)&&tdcOperationUI._placeholderCacheCssSettings.classes!==a)tdcOperationUI._placeholderCacheCssSettings.classes=
a,a.length?c.addClass(a):c.attr("class","");b.isObject(e)&&(b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.props)||!b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.props)&&!b.isEqual(tdcOperationUI._placeholderCacheCssSettings.props,e))&&(tdcOperationUI._placeholderCacheCssSettings.props=e,c.css(e))},setHorizontalPlaceholder:function(a){tdcOperationUI.setPlaceholder("",a)},setVerticalPlaceholder:function(a){tdcOperationUI.setPlaceholder("vertical",a)},_moveDraggedElement:function(){var a=
tdcOperationUI.getDraggedElement(),e=tdcOperationUI.getCurrentElementOver(),c=tdcAdminWrapperUI.$placeholder,g="";if(!(b.isUndefined(a)||b.isUndefined(e)||b.isUndefined(c)||!c.is(":visible")&&e!==tdcAdminWrapperUI.$recycle)){var m=tdcOperationUI.isSidebarElementDragged(),n=tdcOperationUI.isElementDragged(),k=!1,l=!1,p=!1,q=!1,r=!1,u=!1,x=tdcOperationUI.isElementWithRowDragged(),t=tdcOperationUI.getRowStartValues();if(n){var v=a.closest(".tdc-elements");if(!m&&(g=tdcIFrameData._getSourceCol(tdcOperationUI.getDraggedElement()),
b.isUndefined(g)))return}else(k=tdcOperationUI.isInnerColumnDragged())&&(v=a.closest(".tdc-inner-columns"));!k&&(l=tdcOperationUI.isInnerRowDragged(),p=tdcOperationUI.isTempInnerRowDragged(),l||p)&&(v=a.closest(".tdc-elements"));l||p||(q=tdcOperationUI.isColumnDragged())&&(v=a.closest(".tdc-columns"));!q&&(r=tdcOperationUI.isRowDragged(),u=tdcOperationUI.isTempRowDragged(),r||u)&&(v=a.closest(".tdc-rows"));if(m||n||k||l||p||q||r||u){var B="",z=a.find(".td_block_inner");z.length&&(B=z.attr("id"));
if(!m&&!b.isUndefined(v)&&v.length){var w=v.children();z=w.index(a);var y=w.index(c);if(e!==tdcAdminWrapperUI.$recycle&&-1!==y&&1===Math.abs(z-y))return;if(n||l||p||r||u){if((n||l||r)&&e===tdcAdminWrapperUI.$recycle){c="Deleting ";tdConfirm.showModal(l?c+"inner row":r?c+"row":c+"element",tdcOperationUI,function(){if((-1===y&&1===w.length||2===w.length&&-1!==y)&&(!r||1!==tdcIFrameData.tdcRows.length)){var b="";A=a.closest(".tdc-inner-column");A.length?b=" tdc-element-inner-column":(C=a.closest(".tdc-column"),
C.length&&(b=" tdc-element-column"));b=f('<div class="'+tdcOperationUI._emptyElementClass+b+'"></div>');tdcElementUI.bindEmptyElement(b);v.append(b)}tdcRecycle.takeSnapshot("Delete element");tdcOperationUI.setDraggedElement(a);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:m,wasElementDragged:n,wasInnerColumnDragged:k,wasInnerRowDragged:l,wasTempInnerRowDragged:p,wasColumnDragged:q,wasRowDragged:r,
wasTempRowDragged:u,wasElementWithRowDragged:x,rowStartValues:t,draggedBlockUid:B,sourceColParam:g});tdcSidebarPanel.clearPanel();tdcOperationUI.setDraggedElement(d);tdcOperationUI.setCurrentElementOver(d);tb_remove()},d,"Are you sure you want to delete this element?");return}if(-1===y&&1===w.length||2===w.length&&-1!==y){e="";var A=a.closest(".tdc-inner-column");if(A.length)e=" tdc-element-inner-column";else{var C=a.closest(".tdc-column");C.length&&(e=" tdc-element-column")}e=f('<div class="'+tdcOperationUI._emptyElementClass+
e+'"></div>');tdcElementUI.bindEmptyElement(e);v.append(e)}}}m&&(e="",n?e="tdc-element":p?e="tdc-element-inner-row-temp":l?e="tdc-element-inner-row":u?e="tdc-row-temp":r&&(e="tdc-row"),e=f('<div class="'+e+'">'+a.html()+"</div>"),b.isUndefined(a.data("shortcodeName"))||e.data("shortcodeName",a.data("shortcodeName")),b.isUndefined(a.data("startValues"))||e.data("startValues",a.data("startValues")),b.isUndefined(a.data("shortcodeContent"))||e.data("shortcodeContent",a.data("shortcodeContent")),b.isUndefined(a.data("rowStartValues"))||
e.data("rowStartValues",a.data("rowStartValues")),b.isUndefined(a.data("templateContent"))||e.data("templateContent",a.data("templateContent")),tdcOperationUI.setDraggedElement(e),a=tdcOperationUI.getDraggedElement());c.replaceWith(a);if(m||n)A=a.closest(".tdc-inner-column"),A.length?(a.removeClass("tdc-element-column"),a.addClass("tdc-element-inner-column")):(C=a.closest(".tdc-column"),C.length&&(a.removeClass("tdc-element-inner-column"),a.addClass("tdc-element-column")));c=a.prev();c.hasClass(tdcOperationUI._emptyElementClass)&&
c.remove();c=a.next();c.hasClass(tdcOperationUI._emptyElementClass)&&c.remove();tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:m,wasElementDragged:n,wasInnerColumnDragged:k,wasInnerRowDragged:l,wasTempInnerRowDragged:p,wasColumnDragged:q,wasRowDragged:r,wasTempRowDragged:u,wasElementWithRowDragged:x,draggedBlockUid:B,sourceColParam:g})}else new tdcNotice.notice("_moveDraggedElement Error: $draggedElement not valid!",!0,!1)}},_copyElement:function(a){var e=
tdcOperationUI.getCurrentElementOver(),c=tdcAdminWrapperUI.$placeholder;b.isUndefined(e)||b.isUndefined(c)||f.when(tdcUtil.getStorageItem("copyShortcodeType"),tdcUtil.getStorageItem("copyShortcodeAttrs"),tdcUtil.getStorageItem("copySourceCol"),tdcUtil.getStorageItem("copyShortcode")).then(function(h,m,n,k){if("undefined"!==typeof h.readyState&&"done"===h.readyState&&"undefined"!==typeof h.result&&(h=h.result.content,"undefined"!==typeof m.readyState&&"done"===m.readyState&&"undefined"!==typeof m.result)){var g=
m.result.content;if("undefined"!==typeof n.readyState&&"done"===n.readyState&&"undefined"!==typeof n.result&&(n=n.result.content,"undefined"!==typeof k.readyState&&"done"===k.readyState&&"undefined"!==typeof k.result)){k=k.result.content;var p=m=!1,q=!1,r=!1,u=!1,x="",t=f('<div class="tdc-dropped"></div>');"vc_row"===h?(x="tdc-row",u=!0,t.addClass("tdc-row-temp")):"vc_column"===h?(x="tdc-element-column",q=!0):"vc_row_inner"===h?(x="tdc-element-inner-row",r=!0,t.addClass("tdc-element-inner-row-temp")):
"vc_column_inner"===h?(x="tdc-element-inner-column",p=!0):""!==h&&(x="tdc-element",m=!0);t.addClass(x);t.data("shortcodeName",h);t.data("startValues",g);if(u||r)t.data("templateContent",k);else if(q||p){h=e.data("model_id");var v="";g=tdcIFrameData.getModel(h).get("childCollection");b.isUndefined(g)||b.map(g.models,function(a,e){e={error:d,getShortcode:""};tdcIFrameData._checkModelData(a,e);b.isUndefined(e.getShortcode)||(v+=e.getShortcode)});g="";g=b.isUndefined(a)||!0!==a?tdcUtil.b64EncodeUnicode(tdcUtil.b64DecodeUnicode(k)+
v):tdcUtil.b64EncodeUnicode(v+tdcUtil.b64DecodeUnicode(k));t.data("templateContent",g);t.data("model_id",h)}c.replaceWith(t);t.closest(".tdc-inner-columns").length?t.addClass("tdc-element-inner-column"):t.closest(".tdc-columns").length&&t.addClass("tdc-element-column");tdcIFrameData.changeData({$refEl:t,wasSidebarElementDragged:!0,wasElementDragged:m,wasInnerColumnDragged:p,wasInnerRowDragged:!1,wasTempInnerRowDragged:r,wasColumnDragged:q,wasRowDragged:!1,wasTempRowDragged:u,wasElementWithRowDragged:!1,
draggedBlockUid:"",sourceColParam:n})}}})}}})(jQuery,Backbone,_);var tdcZoneUI;
(function(f,c,b,d){tdcZoneUI={_elementCssClass:"tdc-zone",tdcZone:d,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcZoneUI.tdcZone=a.find("."+tdcZoneUI._elementCssClass);tdcZoneUI.tdcZone.each(function(a,b){tdcZoneUI.bindZone(f(b))})},_mouseCoordinates:d,_setMouseCoordinates:function(a){tdcZoneUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcZoneUI._mouseCoordinates},bindZone:function(a){a.unbind();a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(b){1===
b.which&&(b.preventDefault(),b.stopPropagation(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a)}),tdcZoneUI._setMouseCoordinates({screenX:b.screenX,screenY:b.screenY}),tdcContextMenu.hide())}).mouseup(function(b){tdcMaskUI.setContentAtMouseUp(a)}).mouseenter(function(b){tdcMaskUI.setCurrentContainer(a)}).mouseleave(function(a){tdcMaskUI.setCurrentContainer(d)}).on("contextmousedown",
function(b){b.preventDefault();b.stopPropagation();tdcContextMenu.setContextMenu(b,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a)}),tdcOperationUI.activeElementOver(a))})},getElementCssClass:function(){return tdcZoneUI._elementCssClass}}})(jQuery,Backbone,_);var tdcRowUI;
(function(f,c,b,d){tdcRowUI={_elementCssClass:"tdc-row",tdcRow:d,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcRowUI.tdcRow=a.find("."+tdcRowUI._elementCssClass);tdcRowUI.tdcRow.each(function(a,b){tdcRowUI.bindRow(f(b))})},_mouseCoordinates:d,_setMouseCoordinates:function(a){tdcRowUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcRowUI._mouseCoordinates},bindRow:function(a){a.unbind();a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(b){1===
b.which&&(b.preventDefault(),b.stopPropagation(),tdcOperationUI.activeDraggedElement(f(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(b,!0),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a)}),tdcRowUI._setMouseCoordinates({screenX:b.screenX,screenY:b.screenY}),tdcOperationUI.setReadyToMove(),tdcContextMenu.hide())}).mouseup(function(b){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())b.preventDefault(),
tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcRowUI._setMouseCoordinates(d);tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(e){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())b.isEqual({screenX:e.screenX,screenY:e.screenY},tdcRowUI._getMouseCoordinates())?(e.stopPropagation(),tdcOperationUI.hideHelper()):(e.preventDefault(),e.stopPropagation(),tdcOperationUI.showHelper(e),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(e),
tdcMaskUI.hide(),tdcRowUI._setMouseCoordinates(d),tdcOperationUI.clearReadyToMove())}).mouseenter(function(e){tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(e)):b.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentContainer(a)}).mouseleave(function(a){tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()?(a.preventDefault(),tdcOperationUI.setCurrentElementOver(d),
tdcRowUI.positionRowPlaceholder(a)):tdcMaskUI.setCurrentContainer(d)}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()){var e=a.outerHeight(!0),c=a.outerWidth(),d=a.offset();parseInt(d.left)<=parseInt(b.pageX)&&parseInt(b.pageX)<=parseInt(d.left+c)&&parseInt(d.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(d.top+e)&&(tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(b))}}).on("contextmousedown",function(b){b.preventDefault();
b.stopPropagation();tdcContextMenu.setContextMenu(b,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a)}),tdcOperationUI.activeElementOver(a))})},positionRowPlaceholder:function(a,e){var c=tdcAdminWrapperUI.$placeholder,g=0,m=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)g=a.pageX,m=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);
else if("scroll"===a.type){g=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;m=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var n={pageX:g,pageY:m};tdcOperationUI.setCurrentElementOver(d);tdcRowUI.tdcRow.each(function(a,e){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(e).trigger(f.Event("fakemouseenterevent",n))});return}a=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(a))tdcOperationUI.hidePlaceholder();
else{var k=tdcOperationUI.getCurrentElementOverOuterHeight();g=tdcOperationUI.getCurrentElementOverOuterWidth();var l=tdcOperationUI.getCurrentElementOverOffset();if(m>l.top+k/2){m=a.next();if(!m.length||m.length&&m.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(c),tdcOperationUI.updateInfoHelper();parseInt(l.top)+parseInt(k)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"",right:"auto",
bottom:"0",width:g,"margin-left":""}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"",right:"",bottom:"",width:g,"margin-left":""})}else{m=a.prev();if(!m.length||m.length&&m.attr("id")!==tdcAdminWrapperUI.placeholderId)a.before(c),tdcOperationUI.updateInfoHelper();parseInt(l.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"",right:"auto",bottom:"",width:g,"margin-left":""}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",
top:"",left:"",right:"",bottom:"",width:g,"margin-left":""})}b.isUndefined(e)||!0!==e?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcRowUI._elementCssClass}}})(jQuery,Backbone,_);var tdcColumnUI;
(function(f,c,b,d){tdcColumnUI={_elementCssClass:"tdc-column",tdcColumn:d,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcColumnUI.tdcColumn=a.find("."+tdcColumnUI._elementCssClass);tdcColumnUI.tdcColumn.each(function(a,b){tdcColumnUI.bindColumn(f(b))})},_mouseCoordinates:d,_setMouseCoordinates:function(a){tdcColumnUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcColumnUI._mouseCoordinates},bindColumn:function(a){a.unbind();a.click(function(a){a.preventDefault();
a.stopPropagation()}).mousedown(function(b){1===b.which&&(b.preventDefault(),b.stopPropagation(),tdcOperationUI.activeDraggedElement(f(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(b,!0),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a)}),tdcColumnUI._setMouseCoordinates({screenX:b.screenX,screenY:b.screenY}),tdcOperationUI.setReadyToMove(),tdcContextMenu.hide())}).mouseup(function(b){tdcOperationUI.isColumnDragged(a)&&
(b.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(d),tdcColumnUI.positionColumnPlaceholder(b),tdcColumnUI._setMouseCoordinates(d));tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(e){tdcOperationUI.isColumnDragged(a)&&(b.isEqual({screenX:e.screenX,screenY:e.screenY},tdcColumnUI._getMouseCoordinates())?(e.stopPropagation(),tdcOperationUI.hideHelper()):(e.preventDefault(),e.stopPropagation(),
tdcOperationUI.showHelper(e),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(e),tdcMaskUI.hide(),tdcColumnUI._setMouseCoordinates(d),tdcOperationUI.clearReadyToMove()))}).mouseenter(function(e){tdcOperationUI.isColumnDragged(a)?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(e)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentContainer(a),e.stopPropagation())}).mouseleave(function(e){tdcOperationUI.isColumnDragged(a)?
(e.preventDefault(),tdcOperationUI.setCurrentElementOver(d),tdcColumnUI.positionColumnPlaceholder(e)):(tdcMaskUI.setCurrentContainer(d),e=tdcOperationUI.inRow(a),b.isUndefined(e)||e.mouseenter())}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isColumnDragged(a)){var e=a.find(".tdc-elements:first");if(e.length){var c=e.outerHeight(!0);e=e.outerWidth();var d=a.offset(),n=0,k=a.prevAll("."+tdcColumnUI._elementCssClass);k.length&&k.each(function(a,b){n+=parseInt(f(b).find(".tdc-elements:first").width())});
n+=d.left;parseInt(n)<=parseInt(b.pageX)&&parseInt(b.pageX)<=parseInt(n+e)&&parseInt(d.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(d.top+c)&&(tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(b))}}}).on("contextmousedown",function(b){b.preventDefault();b.stopPropagation();tdcContextMenu.setContextMenu(b,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a)}),tdcOperationUI.activeElementOver(a))})},
positionColumnPlaceholder:function(a,e){var c=tdcAdminWrapperUI.$placeholder,g=0,m=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)g=a.pageX,m=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){g=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;m=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var n={pageX:g,pageY:m};
tdcOperationUI.setCurrentElementOver(d);tdcOperationUI.getDraggedElement().closest(".tdc-columns").find(".tdc-column").each(function(a,e){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(e).trigger(f.Event("fakemouseenterevent",n))});return}a=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(a))tdcOperationUI.hidePlaceholder();else{var k=a.outerWidth(!0);m=tdcOperationUI.getCurrentElementOverOffset();var l=0,p=a.prevAll();p.length&&
p.each(function(a,b){a=f(b);a.hasClass("tdc-column")&&(l+=parseInt(a.outerWidth(!0)))});p=a.parent(".tdc-columns").parent(".vc_row");var q=p.css("position");if(b.isUndefined(q)||"static"!==q)if(p=p.css("padding-left"),b.isUndefined(p)||(p=parseInt(p.replace("px",""))),g>m.left+k/2){g=a.next();if(!g.length||g.length&&g.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(c),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(l+k+p),"margin-left":-24,top:""})}else{g=
a.prev();if(!g.length||g.length&&g.attr("id")!==tdcAdminWrapperUI.placeholderId)a.before(c),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(l+p),"margin-left":-24,top:""})}else if(g>m.left+k/2){g=a.next();if(!g.length||g.length&&g.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(c),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m.left+k),"margin-left":-24,top:""})}else{g=a.prev();if(!g.length||g.length&&g.attr("id")!==
tdcAdminWrapperUI.placeholderId)a.before(c),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m.left),"margin-left":-24,top:""})}b.isUndefined(e)||!0!==e?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcColumnUI._elementCssClass}}})(jQuery,Backbone,_);var tdcInnerRowUI;
(function(f,c,b,d){tdcInnerRowUI={_elementCssClass:"tdc-element-inner-row",tdcElementInnerRow:d,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcInnerRowUI.tdcElementInnerRow=a.find("."+tdcInnerRowUI._elementCssClass);tdcInnerRowUI.tdcElementInnerRow.each(function(a,b){tdcInnerRowUI.bindInnerRow(f(b))})},_mouseCoordinates:d,_setMouseCoordinates:function(a){tdcInnerRowUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcInnerRowUI._mouseCoordinates},bindInnerRow:function(a){a.unbind();
a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(b){1===b.which&&(b.preventDefault(),b.stopPropagation(),tdcOperationUI.activeDraggedElement(f(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(b,!0),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a)}),tdcInnerRowUI._setMouseCoordinates({screenX:b.screenX,
screenY:b.screenY}),tdcOperationUI.setReadyToMove(),tdcContextMenu.hide())}).mouseup(function(b){b.preventDefault();tdcOperationUI.clearReadyToMove();tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper();tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(e){if(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())b.isEqual({screenX:e.screenX,screenY:e.screenY},tdcInnerRowUI._getMouseCoordinates())?(e.stopPropagation(),tdcOperationUI.hideHelper()):
(e.preventDefault(),e.stopPropagation(),tdcOperationUI.showHelper(e),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(e),tdcMaskUI.hide(),tdcInnerRowUI._setMouseCoordinates(d),tdcOperationUI.clearReadyToMove())}).mouseenter(function(e){tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(e)):b.isUndefined(tdcOperationUI.getDraggedElement())&&
(tdcMaskUI.setCurrentContainer(a),e.stopPropagation())}).mouseleave(function(e){tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(d),tdcInnerRowUI.positionInnerRowPlaceholder(e)):(tdcMaskUI.setCurrentContainer(d),e=tdcOperationUI.inColumn(a),b.isUndefined(e)||e.mouseenter())}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||
tdcOperationUI.isTempInnerRowDragged()){var e=a.outerHeight(!0),c=a.outerWidth(),d=a.offset();parseInt(d.left)<=parseInt(b.pageX)&&parseInt(b.pageX)<=parseInt(d.left+c)&&parseInt(d.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(d.top+e)&&(tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(b))}}).on("contextmousedown",function(b){b.preventDefault();b.stopPropagation();tdcContextMenu.setContextMenu(b,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),
$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a)}),tdcOperationUI.activeElementOver(a))})},positionInnerRowPlaceholder:function(a,e){var c=tdcAdminWrapperUI.$placeholder,g=0,m=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)g=a.pageX,m=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){g=
tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;m=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var n={pageX:g,pageY:m};tdcOperationUI.setCurrentElementOver(d);tdcElementUI.tdcElement.each(function(a,e){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(e).trigger(f.Event("fakemouseenterevent",n))});tdcInnerRowUI.tdcElementInnerRow.each(function(a,e){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(e).trigger(f.Event("fakemouseenterevent",
n))});return}a=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(a))tdcOperationUI.hidePlaceholder();else{var k=a.outerHeight(!0);g=a.innerWidth();var l=a.offset();if(m>l.top+k/2){m=a.next();if(!m.length||m.length&&m.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(c),tdcOperationUI.updateInfoHelper(d);parseInt(l.top)+parseInt(k)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",
top:"",left:"","margin-top":"","margin-left":"",bottom:"0",width:g}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:g})}else{m=a.prev();if(!m.length||m.length&&m.attr("id")!==tdcAdminWrapperUI.placeholderId)a.before(c),tdcOperationUI.updateInfoHelper(d);parseInt(l.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"","margin-top":"0","margin-left":"",
bottom:"",width:g}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:g})}b.isUndefined(e)||!0!==e?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcInnerRowUI._elementCssClass}}})(jQuery,Backbone,_);var tdcInnerColumnUI;
(function(f,c,b,d){tdcInnerColumnUI={_elementCssClass:"tdc-inner-column",tdcInnerColumn:d,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcInnerColumnUI.tdcInnerColumn=a.find("."+tdcInnerColumnUI._elementCssClass);tdcInnerColumnUI.tdcInnerColumn.each(function(a,b){tdcInnerColumnUI.bindInnerColumn(f(b))})},_mouseCoordinates:d,_setMouseCoordinates:function(a){tdcInnerColumnUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcInnerColumnUI._mouseCoordinates},bindInnerColumn:function(a){a.unbind();
a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(b){1===b.which&&(b.preventDefault(),b.stopPropagation(),tdcOperationUI.activeDraggedElement(f(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(b,!0),tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a)}),
tdcInnerColumnUI._setMouseCoordinates({screenX:b.screenX,screenY:b.screenY}),tdcOperationUI.setReadyToMove(),tdcContextMenu.hide())}).mouseup(function(b){tdcOperationUI.isInnerColumnDragged(a)&&(b.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(d),tdcInnerColumnUI.positionInnerColumnPlaceholder(b),tdcInnerColumnUI._setMouseCoordinates(d));tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(e){tdcOperationUI.isInnerColumnDragged(a)&&
(b.isEqual({screenX:e.screenX,screenY:e.screenY},tdcInnerColumnUI._getMouseCoordinates())?(e.stopPropagation(),tdcOperationUI.hideHelper()):(e.preventDefault(),e.stopPropagation(),tdcOperationUI.showHelper(e),tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(e),tdcMaskUI.hide(),tdcInnerColumnUI._setMouseCoordinates(d),tdcOperationUI.clearReadyToMove()))}).mouseenter(function(e){tdcOperationUI.isInnerColumnDragged(a)?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(a),
tdcInnerColumnUI.positionInnerColumnPlaceholder(e)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentContainer(a),e.stopPropagation())}).mouseleave(function(e){tdcOperationUI.isInnerColumnDragged(a)?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(d),tdcInnerColumnUI.positionInnerColumnPlaceholder(e)):(tdcMaskUI.setCurrentContainer(d),e=tdcOperationUI.inInnerRow(a),b.isUndefined(e)||e.mouseenter())}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isInnerColumnDragged(a)){var e=
a.find(".tdc-elements:first");if(e.length){var c=e.outerHeight(!0);e=e.outerWidth();var d=a.offset(),n=0,k=a.prevAll("."+tdcInnerColumnUI._elementCssClass);k.length&&k.each(function(a,b){n+=parseInt(f(b).find(".tdc-elements:first").width())});n+=d.left;parseInt(n)<=parseInt(b.pageX)&&parseInt(b.pageX)<=parseInt(n+e)&&parseInt(d.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(d.top+c)&&(tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(b))}}}).on("contextmousedown",
function(b){b.preventDefault();b.stopPropagation();tdcContextMenu.setContextMenu(b,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a)}),tdcOperationUI.activeElementOver(a))})},positionInnerColumnPlaceholder:function(a,e){var c=tdcAdminWrapperUI.$placeholder,g=0,m=0;if("mousedown"===a.type||"mousemove"===a.type||
"fakemouseenterevent"===a.type)g=a.pageX,m=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){g=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;m=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var n={pageX:g,pageY:m};tdcOperationUI.setCurrentElementOver(d);tdcOperationUI.getDraggedElement().closest(".tdc-inner-columns").find(".tdc-inner-column").each(function(a,
e){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(e).trigger(f.Event("fakemouseenterevent",n))});return}a=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(a))tdcOperationUI.hidePlaceholder();else{m=a.outerWidth(!0);var k=a.offset(),l=0,p=a.prevAll();p.length&&p.each(function(a,b){a=f(b);a.hasClass("tdc-inner-column")&&(l+=parseInt(a.outerWidth(!0)))});p=a.parent(".tdc-inner-columns").parent(".vc_row_inner").css("padding-left");p=
b.isUndefined(p)?0:parseInt(p.replace("px",""));if(g>k.left+m/2){g=a.next();if(!g.length||g.length&&g.attr("id")!==tdcAdminWrapperUI.placeholderId)a.after(c),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(l+m+p),"margin-left":-24})}else{g=a.prev();if(!g.length||g.length&&g.attr("id")!==tdcAdminWrapperUI.placeholderId)a.before(c),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(l+p),"margin-left":-24})}b.isUndefined(e)||
!0!==e?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcInnerColumnUI._elementCssClass}}})(jQuery,Backbone,_);var tdcElementsUI;
(function(f,c,b,d){tdcElementsUI={tdcElements:d,init:function(){tdcElementsUI.tdcElements=tdcOperationUI.iframeContents.find(".tdc-elements");tdcElementsUI.tdcElements.each(function(a,b){tdcElementsUI.bindElementList(f(b))})},bindElementList:function(a){a.mousemove(function(a){a.preventDefault()}).mouseenter(function(a){a.preventDefault()}).mouseleave(function(a){a.preventDefault()})}}})(jQuery,Backbone,_);var tdcElementUI;
(function(f,c,b,d){tdcElementUI={_elementCssClass:"tdc-element",_innerColumnGap:10,tdcElements:d,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcElementUI.tdcElement=a.find("."+tdcElementUI._elementCssClass);tdcElementUI.tdcElement.each(function(a,b){tdcElementUI.bindElement(f(b))})},positionElementPlaceholder:function(a,e){var c={X:0,Y:0};if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)c.X=a.pageX,c.Y=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||
(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){c.X=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;c.Y=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var g={pageX:c.X,pageY:c.Y};tdcOperationUI.setCurrentElementOver(d);tdcElementUI.tdcElement.each(function(a,e){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(e).trigger(f.Event("fakemouseenterevent",g))});return}var m=tdcOperationUI.getCurrentElementOver();
if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(m))tdcOperationUI.hidePlaceholder();else{var n=tdcOperationUI.getCurrentElementOverOuterHeight();a=tdcOperationUI.getCurrentElementOverOuterWidth();var k=tdcOperationUI.getCurrentElementOverOffset(),l=tdcOperationUI.getCurrentElementOverHeight(),p=!1;"inline-block"===m.css("display")&&(p=!0);p?(n=tdcOperationUI.getCurrentElementOverPosition(),p=parseInt(m.css("margin-top")),c.Y>k.top+l/2?(c=tdcElementUI._checkInnerColumnLastElement(c),
b.isUndefined(c.elementOuterWidth)||(a=c.elementOuterWidth),parseInt(k.top)+parseInt(l)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?(k=parseInt(k.left),c.isInnerColumnLastElement&&(m=m.closest(".tdc-element-inner-row"),k=parseInt(m.offset().left)-parseInt(m.css("margin-left"))),tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:k,"margin-top":"","margin-left":"",bottom:"0",width:a})):(k=parseInt(n.left),c.isInnerColumnLastElement&&(m=m.closest(".tdc-element-inner-row"),
k=parseInt(m.position().left)+parseInt(m.css("margin-left"))),tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:n.top+p+l,left:k,"margin-top":"","margin-left":"",bottom:"",width:a}))):(c=tdcElementUI._checkInnerColumnFirstElement(c),b.isUndefined(c.elementOuterWidth)||(a=c.elementOuterWidth),parseInt(k.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?(k=parseInt(k.left)-parseInt(m.css("margin-left")),tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:k,"margin-top":"0",
"margin-left":"",bottom:"",width:a})):(k=parseInt(n.left),tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:n.top+p,left:k,"margin-top":"","margin-left":"",bottom:"",width:a})))):c.Y>k.top+l/2?(c=tdcElementUI._checkInnerColumnLastElement(c),b.isUndefined(c.elementOuterWidth)||(a=c.elementOuterWidth),parseInt(k.top)+parseInt(n)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"","margin-top":"",
"margin-left":"",bottom:"0",width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:a})):(c=tdcElementUI._checkInnerColumnFirstElement(c),b.isUndefined(c.elementOuterWidth)||(a=c.elementOuterWidth),parseInt(k.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"","margin-top":"0","margin-left":"",bottom:"",width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",
top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:a}));b.isUndefined(e)||!0!==e?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},_checkInnerColumnFirstElement:function(a){var b={isInnerColumnFirstElement:!1},c=tdcAdminWrapperUI.$placeholder,g=tdcOperationUI.getCurrentElementOver(),m=tdcOperationUI.getCurrentElementOverOffset();tdcElementUI.isInnerColumnFirstElement(g)&&a.Y<m.top+tdcElementUI._innerColumnGap&&(b.isInnerColumnFirstElement=!0);if(b.isInnerColumnFirstElement){if(g=
g.closest(".tdc-element-inner-row"),b.elementOuterWidth=g.outerWidth(!0),a=g.prev(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)g.before(c),tdcOperationUI.updateInfoHelper(d)}else if(a=g.prev(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)g.before(c),tdcOperationUI.updateInfoHelper(d);return b},_checkInnerColumnLastElement:function(a){var b={isInnerColumnLastElement:!1},c=tdcAdminWrapperUI.$placeholder,g=tdcOperationUI.getCurrentElementOver(),m=tdcOperationUI.getCurrentElementOverHeight(),
n=tdcOperationUI.getCurrentElementOverOffset();tdcElementUI.isInnerColumnLastElement(g)&&a.Y>n.top+m-tdcElementUI._innerColumnGap&&(b.isInnerColumnLastElement=!0);if(b.isInnerColumnLastElement){if(g=g.closest(".tdc-element-inner-row"),b.elementOuterWidth=g.outerWidth(!0),a=g.next(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)g.after(c),tdcOperationUI.updateInfoHelper(d)}else if(a=g.next(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)g.after(c),tdcOperationUI.updateInfoHelper(d);
return b},positionEmptyElementPlaceholder:function(a){var e=tdcAdminWrapperUI.$placeholder,c=0,g=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)c=a.pageX,g=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){c=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;g=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var m=
{pageX:c,pageY:g};tdcOperationUI.setCurrentElementOver(d);tdcElementUI.tdcElement.each(function(a,e){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&f(e).trigger(f.Event("fakemouseenterevent",m))});return}var n=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(n))tdcOperationUI.hidePlaceholder();else{var k=tdcOperationUI.getCurrentElementOverOuterHeight();a=tdcOperationUI.getCurrentElementOverOuterWidth();c=tdcOperationUI.getCurrentElementOverOffset();
if(g>c.top+k/2){var l=!1;tdcElementUI.isInnerColumnLastElement(n)&&g>c.top+k-tdcElementUI._innerColumnGap&&(l=!0);l?(n=n.closest(".tdc-element-inner-row"),a=n.outerWidth(!0),g=n.next(),g.length||(n.after(e),tdcOperationUI.updateInfoHelper(d))):(g=n.next(),g.length||(n.after(e),tdcOperationUI.updateInfoHelper(d)));parseInt(c.top)+parseInt(k)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"","margin-top":"",
"margin-left":"",bottom:0,width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":-50,"margin-left":"",bottom:"",width:a})}else k=!1,tdcElementUI.isInnerColumnFirstElement(n)&&g<c.top+tdcElementUI._innerColumnGap&&(k=!0),k?(n=n.closest(".tdc-element-inner-row"),a=n.outerWidth(!0),g=n.prev(),g.length||(n.before(e),tdcOperationUI.updateInfoHelper(d))):(g=n.prev(),g.length||(n.before(e),tdcOperationUI.updateInfoHelper(d))),parseInt(c.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?
tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:0,left:"","margin-top":0,"margin-left":"",bottom:"",width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":0,"margin-left":"",bottom:"",width:a});tdcOperationUI.showPlaceholder()}},_mouseCoordinates:d,_setMouseCoordinates:function(a){tdcElementUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcElementUI._mouseCoordinates},bindElement:function(a){a.click(function(a){a.preventDefault();
a.stopPropagation()}).mousedown(function(b){if(1===b.which){if("td-lock-button"===b.target.className)return window.open(b.target.href),!1;b.preventDefault();b.stopPropagation();tdcOperationUI.activeDraggedElement(a);tdcOperationUI.hideHelper();tdcOperationUI.setCurrentElementOver(a);tdcElementUI.positionElementPlaceholder(b,!0);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),
$currentInnerColumn:tdcOperationUI.inInnerColumn(a),$currentElement:a});tdcElementUI._setMouseCoordinates({screenX:b.screenX,screenY:b.screenY});tdcOperationUI.setReadyToMove();tdcContextMenu.hide()}}).mouseup(function(b){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))b.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcElementUI.positionElementPlaceholder(b),
tdcElementUI._setMouseCoordinates(d);tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(e){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))b.isEqual({screenX:e.screenX,screenY:e.screenY},tdcElementUI._getMouseCoordinates())?(e.stopPropagation(),tdcOperationUI.hideHelper()):(e.preventDefault(),e.stopPropagation(),tdcOperationUI.showHelper(e),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(e),
tdcMaskUI.hide(),tdcElementUI._setMouseCoordinates(d),tdcOperationUI.clearReadyToMove())}).mouseenter(function(e){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(e)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentElement(a),e.stopPropagation())}).mouseleave(function(e){tdcOperationUI.isElementDragged()||
(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(d),tdcElementUI.positionElementPlaceholder(e)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentElement(d),tdcMaskUI.setCurrentContainer(d),e=tdcOperationUI.inInnerColumn(a),b.isUndefined(e)?(e=tdcOperationUI.inColumn(a),b.isUndefined(e)||e.mouseenter()):e.mouseenter())}).on("fakemouseenterevent",function(b){if(tdcOperationUI.isElementDragged()||
(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")){b.preventDefault();b.stopPropagation();var e=a.outerHeight(!0),c=a.outerWidth(),d=a.offset();parseInt(d.left)<=parseInt(b.pageX)&&parseInt(b.pageX)<=parseInt(d.left+c)&&parseInt(d.top)<=parseInt(b.pageY)&&parseInt(b.pageY)<=parseInt(d.top+e)&&(tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(b))}}).on("contextmousedown",function(b){b.preventDefault();b.stopPropagation();
tdcContextMenu.setContextMenu(b,a)&&(tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(a),$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a),$currentElement:a}),tdcOperationUI.activeElementOver(a))})},bindEmptyElement:function(a){a.click(function(a){a.preventDefault()}).mousedown(function(b){1===b.which&&(a.hasClass("tdc-element-column")?tdcColumnHandlerUI._triggerEvent(b):
a.hasClass("tdc-element-inner-column")&&tdcInnerColumnHandlerUI._triggerEvent(b))}).mouseup(function(b){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(b.preventDefault(),b.stopPropagation(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcElementUI.positionEmptyElementPlaceholder(b)):tdcMaskUI.setCurrentElement(a)}).mousemove(function(b){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||
tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))b.preventDefault(),b.stopPropagation(),tdcOperationUI.showHelper(b),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionEmptyElementPlaceholder(b)}).mouseenter(function(e){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionEmptyElementPlaceholder(e)):
b.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentElement(a)}).mouseleave(function(e){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(e.preventDefault(),tdcOperationUI.setCurrentElementOver(d),tdcElementUI.positionEmptyElementPlaceholder(e)):b.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentElement(d)})},isInnerColumnFirstElement:function(a){var b=a.closest(".tdc-inner-column");
return b.length&&(b=b.find(".tdc-element-inner-column"),b.length&&0===b.index(a))?!0:!1},isInnerColumnLastElement:function(a){var b=a.closest(".tdc-inner-column");return b.length&&(b=b.find(".tdc-element-inner-column"),b.length&&b.length===b.index(a)+1)?!0:!1},getElementCssClass:function(){return tdcElementUI._elementCssClass}}})(jQuery,Backbone,_);var tdcRecycleUI;
(function(f,c,b,d){tdcRecycleUI={_activeClass:"active",_showClass:"show",_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcRecycleUI._isInitialized=!1);tdcRecycleUI._isInitialized||(tdcAdminWrapperUI.$recycle.mouseup(function(a){(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.deactiveDraggedElement(),tdcRecycleUI._deactivate())}).mouseenter(function(a){(tdcOperationUI.isElementDragged()||
tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle),tdcRecycleUI._activate())}).mouseleave(function(a){(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.setCurrentElementOver(d),tdcRecycleUI._deactivate())}),tdcRecycleUI._isInitialized=
!0)},_activate:function(){tdcAdminWrapperUI.$recycle.addClass(tdcRecycleUI._activeClass)},_deactivate:function(){tdcAdminWrapperUI.$recycle.removeClass(tdcRecycleUI._activeClass)},show:function(){!0!==tdcMain.getRecycleShown()&&(tdcMain.setRecycleShown(),!0===tdcMain.getRecycleShown()&&tdcAdminWrapperUI.$recycle.addClass(tdcRecycleUI._showClass))},hide:function(){!1!==tdcMain.getRecycleShown()&&(tdcMain.resetRecycleShown(),tdcAdminWrapperUI.$recycle.removeClass(tdcRecycleUI._showClass))}}})(jQuery,
Backbone,_);var tdcMaskUI;
(function(f,c,b,d){tdcMaskUI={$currentContainer:d,$currentElement:d,$wrapper:d,$content:d,_inMouseUpBubbling:!1,_isInitialized:!1,_handlers:d,contentSettings:{innerColumn:{top:0,left:0},innerRow:{top:0,left:0},column:{top:0,left:0},row:{top:0,left:0}},init:function(a,e){b.isUndefined(e)||!0!==e||(tdcMaskUI._isInitialized=!1);tdcMaskUI._isInitialized||(tdcMaskUI.$wrapper=a,tdcMaskUI.$wrapper.parent().find("#tdc-mask-content").length||(tdcMaskUI.$content=f('<div id="tdc-mask-content"></div>'),tdcMaskUI.$wrapper.after(tdcMaskUI.$content)),
tdcMaskUI.$wrapper.parent().find("#tdc-mask-content-full").length||(tdcMaskUI.$contentFull=f('<div id="tdc-mask-content-full"></div>'),tdcMaskUI.$wrapper.after(tdcMaskUI.$contentFull)),tdcMaskUI.$wrapper.parent().find("#tdc-mask-handler-structure").length||(tdcMaskUI.$handlerStructure=f('<div id="tdc-mask-handler-structure"></div>'),tdcMaskUI.$wrapper.append(tdcMaskUI.$handlerStructure)),tdcZoneHandlerUI.init(e),tdcRowHandlerUI.init(e),tdcColumnHandlerUI.init(e),tdcInnerRowHandlerUI.init(e),tdcInnerColumnHandlerUI.init(e),
tdcElementHandlerUI.init(e),tdcMaskUI._isInitialized=!0)},setCurrentContainer:function(a){if(tdcMaskUI._isInitialized)if(tdcMaskUI.$currentContainer=a,b.isUndefined(tdcMaskUI.$currentContainer))tdcMaskUI.$content.css({top:"",left:"",width:"",height:""}),tdcMaskUI.$content.hide(),tdcMaskUI.$contentFull.hide(),tdcSidebar.setSidebarInfo("");else{var e="";if(tdcOperationUI.isZone(tdcMaskUI.$currentContainer)){var c=tdcMaskUI.$currentContainer;e="tdc-content-zone"}else tdcOperationUI.isRow(tdcMaskUI.$currentContainer)?
(c=tdcMaskUI.$currentContainer,e="tdc-content-row"):tdcOperationUI.isColumn(tdcMaskUI.$currentContainer)?(c=tdcMaskUI.$currentContainer.find(".tdc-elements:first"),e="tdc-content-column"):tdcOperationUI.isInnerRow(tdcMaskUI.$currentContainer)?(c=tdcMaskUI.$currentContainer,e="tdc-content-inner-row"):tdcOperationUI.isInnerColumn(tdcMaskUI.$currentContainer)&&(c=tdcMaskUI.$currentContainer.find(".tdc-elements:first"),e="tdc-content-inner-column");if(c.length){var d=c.offset();a=d.top;d=d.left;var m=
c.outerWidth();c=c.outerHeight(!0);tdcMaskUI.$content.css({top:a,left:d,width:m,height:c});tdcMaskUI.$content.attr("class",e);tdcMaskUI.$content.show();tdcMaskUI.$contentFull.hide();c=tdcMaskUI.$currentContainer.data("model_id");b.isUndefined(c)||(c=tdcIFrameData.getModel(c),tdcSidebar.setSidebarInfo(c.get("tag")))}}},setCurrentElement:function(a){if(tdcMaskUI._isInitialized&&!tdcSidebar.mouseOverSidebar)if(tdcMaskUI.$currentElement=a,b.isUndefined(tdcMaskUI.$currentElement))tdcMaskUI.$wrapper.hide(),
tdcMaskUI.$content.hide(),tdcMaskUI.$contentFull.hide();else{a=tdcMaskUI.$currentElement.closest(".tdc-zone").offset();var e=tdcMaskUI.$currentElement.offset(),c=tdcMaskUI.$currentElement.outerWidth(),d=tdcMaskUI.$currentElement.outerWidth(!0),m=tdcMaskUI.$currentElement.outerHeight(),n=tdcMaskUI.$currentElement.outerHeight(!0),k=tdcMaskUI.$currentElement.css("margin-top"),l=tdcMaskUI.$currentElement.css("margin-left");12>Math.abs(a.top-e.top)?tdcMaskUI.$wrapper.addClass("tdc-mask-top"):tdcMaskUI.$wrapper.removeClass("tdc-mask-top");
tdcMaskUI.$wrapper.css({top:e.top,left:e.left,width:c,height:m});tdcMaskUI.$content.css({top:e.top,left:e.left,width:c,height:m});tdcMaskUI.$contentFull.css({top:e.top-parseFloat(k),left:e.left-parseFloat(l),width:d,height:n});tdcMaskUI.$content.removeAttr("class");tdcMaskUI.$wrapper.show();tdcMaskUI.$content.show();tdcMaskUI.$contentFull.show();tdcMaskUI.setHandlers();a=tdcMaskUI.$currentElement.data("model_id");b.isUndefined(a)||(a=tdcIFrameData.getModel(a),e=a.get("attrs"),b.has(e,"custom_title")?
tdcSidebar.setSidebarInfo(e.custom_title):tdcSidebar.setSidebarInfo(a.get("tag")))}},repositionMask:function(a){tdcMaskUI._isInitialized&&(a=tdcAdminIFrameUI._$liveIframe[0].contentWindow.document.elementFromPoint(a.pageX,a.pageY),a=f(a).closest(".tdc-element"),a.length&&tdcMaskUI.setCurrentElement(a))},setContentAtMouseUp:function(a){a.hasClass("tdc-rows")?tdcMaskUI._inMouseUpBubbling?tdcMaskUI._inMouseUpBubbling=!1:tdcMaskUI.setCurrentContainer(a):a.hasClass("tdc-row")?tdcMaskUI._inMouseUpBubbling||
(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-column")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-element-inner-row")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-inner-column")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-element")&&(tdcMaskUI.setCurrentElement(a),
tdcMaskUI._inMouseUpBubbling=!0)},setHandlers:function(){tdcMaskUI._isInitialized&&(b.isUndefined(tdcMaskUI.$currentElement)||b.isUndefined(tdcMaskUI._handlers)||b.map(tdcMaskUI._handlers,function(a,b){a.setElement(tdcMaskUI.$currentElement)}))},addHandler:function(a,e){tdcMaskUI._isInitialized||(b.isUndefined(tdcMaskUI._handlers)?(tdcMaskUI._handlers={},tdcMaskUI._handlers[a]=e):b.has(tdcMaskUI._handlers,a)||(tdcMaskUI._handlers[a]=e))},show:function(){tdcMaskUI._isInitialized&&!b.isUndefined(tdcMaskUI.$wrapper)&&
(tdcMaskUI.$wrapper.show(),tdcMaskUI.$content.show())},hide:function(){tdcMaskUI._isInitialized&&!b.isUndefined(tdcMaskUI.$wrapper)&&(tdcMaskUI.$wrapper.hide(),tdcMaskUI.$content.hide(),tdcMaskUI.$contentFull.hide())}}})(jQuery,Backbone,_);var tdcZoneHandlerUI;
(function(f,c,b,d){tdcZoneHandlerUI={_handlerId:"tdc-zone",_handlerText:"Zone",_handlerCssClass:"tdc-mask-zone",$elementRow:d,_$handlerWrapper:d,_$handlerClone:d,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcZoneHandlerUI._isInitialized=!1);tdcZoneHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcZoneHandlerUI._handlerCssClass).length||(tdcZoneHandlerUI._$handlerWrapper=f('<div id="'+tdcZoneHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Zone settings">'+
tdcZoneHandlerUI._handlerText+"</div></div>"),tdcMaskUI.$handlerStructure.append(tdcZoneHandlerUI._$handlerWrapper)),tdcZoneHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcZoneHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcZoneHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcZoneHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcZoneHandlerUI.$elementRow);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();
tdcMaskUI.setCurrentContainer(d);tdcMaskUI.hide()}).on("contextmousedown",function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcZoneHandlerUI.$elementRow)&&tdcZoneHandlerUI._triggerEvent(a)}),tdcMaskUI.addHandler(tdcZoneHandlerUI._handlerId,tdcZoneHandlerUI),tdcZoneHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inZone(a);b.isUndefined(a)?tdcZoneHandlerUI._$handlerWrapper.hide():(tdcZoneHandlerUI.$elementRow=a,tdcZoneHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||
b.isUndefined(tdcZoneHandlerUI.$elementRow)||tdcZoneHandlerUI.$elementRow.trigger(a)}}})(jQuery,Backbone,_);var tdcRowHandlerUI;
(function(f,c,b,d){tdcRowHandlerUI={_handlerId:"tdc-row",_handlerText:"Row",_handlerCssClass:"tdc-mask-row",$elementRow:d,_$handlerWrapper:d,_$handlerClone:d,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcRowHandlerUI._isInitialized=!1);tdcRowHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcRowHandlerUI._handlerCssClass).length||(tdcRowHandlerUI._$handlerWrapper=f('<div id="'+tdcRowHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Row settings">'+
tdcRowHandlerUI._handlerText+"</div></div>"),tdcRowHandlerUI._$handlerClone=f('<div class="tdc-mask-clone" title="Duplicate row"></div>'),tdcRowHandlerUI._$handlerWrapper.append(tdcRowHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcRowHandlerUI._$handlerWrapper)),tdcRowHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcRowHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcRowHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcRowHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();
tdcMaskUI.setCurrentContainer(tdcRowHandlerUI.$elementRow);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(d);tdcMaskUI.hide()}).on("contextmousedown",function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcRowHandlerUI.$elementRow)&&tdcRowHandlerUI._triggerEvent(a)}),tdcRowHandlerUI._$handlerClone.mousedown(tdcRowHandlerUI.cloneHandler),tdcMaskUI.addHandler(tdcRowHandlerUI._handlerId,tdcRowHandlerUI),tdcRowHandlerUI._isInitialized=!0)},setElement:function(a){a=
tdcOperationUI.inRow(a);b.isUndefined(a)?tdcRowHandlerUI._$handlerWrapper.hide():(tdcRowHandlerUI.$elementRow=a,tdcRowHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcRowHandlerUI.$elementRow)||tdcRowHandlerUI.$elementRow.trigger(a)},cloneHandler:function(a){if("click"!==a.type||1===a.which)a.preventDefault(),a.stopPropagation(),tdConfirm.showModal("Clone row",tdcRowHandlerUI,function(a){a=tdcRowHandlerUI.$elementRow.data("model_id");if(b.isUndefined(a))new tdcNotice.notice("tdcRowHandlerUI -> tdcRowHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",
!0,!1);else{a=tdcIFrameData.getModel(a);var e=a.get("parentModel"),c=e.get("childCollection");if(b.isUndefined(a))new tdcNotice.notice("tdcRowHandlerUI -> tdcRowHandlerUI._$handlerClone Error: Element model not in structure data!",!0,!1);else{tdcOperationUI.setDraggedElement(f('<div class="tdc-row">Cloned row</div>'));var m=tdcOperationUI.getDraggedElement();m.insertAfter(tdcRowHandlerUI.$elementRow);tdcRowUI.bindRow(m);var n=m.prevAll(".tdc-row").length;e=new tdcIFrameData.TdcModel({content:"",attrs:b.clone(a.get("attrs")),
tag:"vc_row",type:"closed",level:1,parentModel:e});new tdcIFrameData.TdcLiveView({model:e,el:m[0]});var k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:2,parentModel:e});m.data("model_id",e.cid);c.add(e,{at:n});c=new tdcIFrameData.TdcCollection;c.add(k);e.set("childCollection",c);k.set("childCollection",new tdcIFrameData.TdcCollection);e.getShortcodeRender(3,"",!0,a);tdcOperationUI.setDraggedElement(d);tb_remove()}}},[a],"Are you sure you want to clone the current row and all its elements?"),
tdcRowHandlerUI._inCloneOperation=!1},deleteHandler:function(a){null!==a&&a.preventDefault();a.preventDefault();a.stopPropagation();tdConfirm.showModal("Delete row",tdcRowHandlerUI,function(a){tdcOperationUI.setDraggedElement(tdcRowHandlerUI.$elementRow);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);a=tdcOperationUI.getDraggedElement();var b=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");var e=a.children();b=e.index(b);if(-1===b&&1===e.length||2===e.length&&-1!==b)b=
"",tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(b=" tdc-element-column"),b=f('<div class="'+tdcOperationUI._emptyElementClass+b+'"></div>'),tdcElementUI.bindEmptyElement(b),a.append(b);tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:!1,wasElementDragged:!1,wasInnerColumnDragged:!1,wasInnerRowDragged:!1,wasTempInnerRowDragged:!1,wasColumnDragged:!1,
wasRowDragged:!0,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(d);tdcOperationUI.setCurrentElementOver(d);tdcSidebarPanel.clearPanel();tb_remove()},[a],"Are you sure you want to delete the current row and all its elements?")}}})(jQuery,Backbone,_);var tdcColumnHandlerUI;
(function(f,c,b,d){tdcColumnHandlerUI={_handlerId:"tdc-column",_handlerText:"Column",_handlerCssClass:"tdc-mask-column",$elementColumn:d,_$handlerWrapper:d,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcColumnHandlerUI._isInitialized=!1);tdcColumnHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcColumnHandlerUI._handlerCssClass).length||(a=f('<div id="'+tdcColumnHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Column settings">'+tdcColumnHandlerUI._handlerText+
"</div></div>"),tdcColumnHandlerUI._$handlerWrapper=a,tdcMaskUI.$handlerStructure.append(a)),tdcColumnHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcColumnHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcColumnHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcColumnHandlerUI._triggerEvent(a)}).mouseenter(function(a){tdcMaskUI.show();tdcColumnHandlerUI._triggerEvent(a)}).mouseleave(function(a){tdcColumnHandlerUI._triggerEvent(a)}).on("contextmousedown",function(a){a.preventDefault();
tdcContextMenu.setContextMenu(a,tdcColumnHandlerUI.$elementColumn)&&tdcColumnHandlerUI._triggerEvent(a)}),tdcColumnHandlerUI._$handlerWrapper.mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcColumnHandlerUI.$elementColumn);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(d);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcColumnHandlerUI._handlerId,tdcColumnHandlerUI),tdcColumnHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inColumn(a);
b.isUndefined(a)?tdcColumnHandlerUI._$handlerWrapper.hide():(tdcColumnHandlerUI.$elementColumn=a,tdcColumnHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcColumnHandlerUI.$elementColumn)||tdcColumnHandlerUI.$elementColumn.trigger(a)}}})(jQuery,Backbone,_);var tdcInnerRowHandlerUI;
(function(f,c,b,d){tdcInnerRowHandlerUI={_handlerId:"tdc-element-inner-row",_handlerText:"Inner Row",_handlerCssClass:"tdc-mask-inner-row",$elementInnerRow:d,_$handlerWrapper:d,_$handlerClone:d,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcInnerRowHandlerUI._isInitialized=!1);tdcInnerRowHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcInnerRowHandlerUI._handlerCssClass).length||(tdcInnerRowHandlerUI._$handlerWrapper=f('<div id="'+tdcInnerRowHandlerUI._handlerCssClass+
'"><div class="tdc-mask-handler-drag" title="Inner row settings">'+tdcInnerRowHandlerUI._handlerText+"</div></div>"),tdcInnerRowHandlerUI._$handlerClone=f('<div class="tdc-mask-clone" title="Duplicate inner row"></div>'),tdcInnerRowHandlerUI._$handlerWrapper.append(tdcInnerRowHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcInnerRowHandlerUI._$handlerWrapper)),tdcInnerRowHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcInnerRowHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcInnerRowHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();
tdcInnerRowHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcInnerRowHandlerUI.$elementInnerRow);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(d);tdcMaskUI.hide()}).on("contextmousedown",function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcInnerRowHandlerUI.$elementInnerRow)&&tdcInnerRowHandlerUI._triggerEvent(a)}),tdcInnerRowHandlerUI._$handlerClone.mousedown(tdcInnerRowHandlerUI.cloneHandler),
tdcMaskUI.addHandler(tdcInnerRowHandlerUI._handlerId,tdcInnerRowHandlerUI),tdcInnerRowHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inInnerRow(a);b.isUndefined(a)?tdcInnerRowHandlerUI._$handlerWrapper.hide():(tdcInnerRowHandlerUI.$elementInnerRow=a,tdcInnerRowHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcInnerRowHandlerUI.$elementInnerRow)||tdcInnerRowHandlerUI.$elementInnerRow.trigger(a)},cloneHandler:function(a){if("click"!==
a.type||1===a.which)a.preventDefault(),a.stopPropagation(),tdConfirm.showModal("Clone inner row",tdcInnerRowHandlerUI,function(a){a=tdcInnerRowHandlerUI.$elementInnerRow.data("model_id");if(b.isUndefined(a))new tdcNotice.notice("tdcInnerRowHandlerUI -> tdcInnerRowHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",!0,!1);else if(a=tdcIFrameData.getModel(a),b.isUndefined(a))new tdcNotice.notice("tdcInnerRowHandlerUI -> tdcInnerRowHandlerUI._$handlerClone Error: Element model not in structure data!",
!0,!1);else{tdcOperationUI.setDraggedElement(f('<div class="tdc-element-column tdc-element-inner-row">Cloned Inner Row</div>'));var e=tdcOperationUI.getDraggedElement();e.insertAfter(tdcInnerRowHandlerUI.$elementInnerRow);tdcInnerRowUI.bindInnerRow(e);var c=e.prevAll(".tdc-element-column").length,m=new tdcIFrameData.TdcModel({content:"",attrs:b.clone(a.get("attrs")),tag:"vc_row_inner",type:"closed",level:2,parentModel:a.get("parentModel")});new tdcIFrameData.TdcLiveView({model:m,el:e[0]});var n=new tdcIFrameData.TdcModel({content:"",
attrs:{},tag:"vc_column_inner",type:"closed",level:3,parentModel:m});e.data("model_id",m.cid);a.get("parentModel").get("childCollection").add(m,{at:c});e=new tdcIFrameData.TdcCollection;e.add(n);m.set("childCollection",e);e=new tdcIFrameData.TdcCollection;n.set("childCollection",e);n=tdcIFrameData._getDestinationCol(tdcOperationUI.getDraggedElement());m.getShortcodeRender(n,"",!0,a);tdcOperationUI.setDraggedElement(d);tb_remove()}},[a],"Are you sure you want to clone the current inner row and all its elements?")},
deleteHandler:function(a){null!==a&&a.preventDefault();tdConfirm.showModal("Delete inner row",tdcInnerRowHandlerUI,function(){tdcOperationUI.setDraggedElement(tdcInnerRowHandlerUI.$elementInnerRow);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);var a=tdcOperationUI.getDraggedElement(),c=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");var g=a.children();c=g.index(c);if(-1===c&&1===g.length||2===g.length&&-1!==c)c="",b.isUndefined(tdcElementHandlerUI.$element)&&(tdcElementHandlerUI.$element=
tdcInnerRowHandlerUI.$elementInnerRow),tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(c=" tdc-element-column"),c=f('<div class="'+tdcOperationUI._emptyElementClass+c+'"></div>'),tdcElementUI.bindEmptyElement(c),a.append(c);tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:!1,wasElementDragged:!1,wasInnerColumnDragged:!1,wasInnerRowDragged:!0,wasTempInnerRowDragged:!1,
wasColumnDragged:!1,wasRowDragged:!1,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(d);tdcOperationUI.setCurrentElementOver(d);tdcSidebarPanel.clearPanel();tb_remove()},d,"Are you sure you want to delete the current inner row and all its elements?")}}})(jQuery,Backbone,_);var tdcInnerColumnHandlerUI;
(function(f,c,b,d){tdcInnerColumnHandlerUI={_handlerId:"tdc-inner-column",_handlerText:"Inner Column",_handlerCssClass:"tdc-mask-inner-column",$elementInnerColumn:d,_$handlerWrapper:d,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcInnerColumnHandlerUI._isInitialized=!1);tdcInnerColumnHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcInnerColumnHandlerUI._handlerCssClass).length||(a=f('<div id="'+tdcInnerColumnHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Inner column settings">'+
tdcInnerColumnHandlerUI._handlerText+"</div></div>"),tdcInnerColumnHandlerUI._$handlerWrapper=a,tdcMaskUI.$handlerStructure.append(a)),tdcInnerColumnHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcInnerColumnHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseenter(function(a){tdcMaskUI.show();tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseleave(function(a){tdcInnerColumnHandlerUI._triggerEvent(a)}).on("contextmousedown",
function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcInnerColumnHandlerUI.$elementInnerColumn)&&tdcInnerColumnHandlerUI._triggerEvent(a)}),tdcInnerColumnHandlerUI._$handlerWrapper.mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcInnerColumnHandlerUI.$elementInnerColumn);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(d);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcInnerColumnHandlerUI._handlerId,tdcInnerColumnHandlerUI),
tdcInnerColumnHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inInnerColumn(a);b.isUndefined(a)?tdcInnerColumnHandlerUI._$handlerWrapper.hide():(tdcInnerColumnHandlerUI.$elementInnerColumn=a,tdcInnerColumnHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcInnerColumnHandlerUI.$elementInnerColumn)||tdcInnerColumnHandlerUI.$elementInnerColumn.trigger(a)}}})(jQuery,Backbone,_);var tdcElementHandlerUI;
(function(f,c,b,d){tdcElementHandlerUI={_handlerId:"tdc-element",_handlerCssClass:"tdc-mask-element",_handlerText:"Element",_confirmDeletion:"Do you want to delete element?",$element:d,_$handlerWrapper:d,_$handlerClone:d,_$handlerDelete:d,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcElementHandlerUI._isInitialized=!1);tdcElementHandlerUI._isInitialized||(tdcMaskUI.$handlerStructure.find("#"+tdcElementHandlerUI._handlerCssClass).length||(tdcElementHandlerUI._$handlerWrapper=f('<div id="'+
tdcElementHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Element settings">'+tdcElementHandlerUI._handlerText+"</div></div>"),tdcElementHandlerUI._$handlerDelete=f('<div class="tdc-mask-element-delete" title="Delete element"></div>'),tdcElementHandlerUI._$handlerClone=f('<div class="tdc-mask-element-clone" title="Duplicate element"></div>'),tdcElementHandlerUI._$handlerWrapper.append(tdcElementHandlerUI._$handlerDelete),tdcElementHandlerUI._$handlerWrapper.append(tdcElementHandlerUI._$handlerClone),
tdcMaskUI.$handlerStructure.append(tdcElementHandlerUI._$handlerWrapper)),tdcElementHandlerUI._$handlerDelete.click(function(a){tdcElementHandlerUI.deleteHandlerConfirm(a)}),tdcElementHandlerUI._$handlerClone.click(function(a){tdcElementHandlerUI.cloneHandler(a)}),tdcElementHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcElementHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcElementHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcElementHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();
tdcMaskUI.setCurrentElement(tdcElementHandlerUI.$element);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentElement(d);tdcMaskUI.hide()}).on("contextmousedown",function(a){a.preventDefault();tdcContextMenu.setContextMenu(a,tdcElementHandlerUI.$element)&&tdcElementHandlerUI._triggerEvent(a)}),tdcMaskUI.addHandler(tdcElementHandlerUI._handlerId,tdcElementHandlerUI),tdcElementHandlerUI._isInitialized=!0)},deleteHandlerConfirm:function(a){tdConfirm.showModal("Delete current element",
tdcElementHandlerUI,function(a){tdcElementHandlerUI.deleteHandler(a);tb_remove()},[a],"Are you sure you want to delete this element?")},deleteHandler:function(a){null!==a&&a.preventDefault();"Delete"===a.key||f(a.target).hasClass("tdc-delete-shortcode")?tdcOperationUI.setDraggedElement(tdcOperationUI.getSelectedElement()):tdcOperationUI.setDraggedElement(tdcElementHandlerUI.$element);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);a=tdcOperationUI.getDraggedElement();var b=tdcAdminWrapperUI.$placeholder;
a=a.closest(".tdc-elements");var c=a.children();b=c.index(b);if(-1===b&&1===c.length||2===c.length&&-1!==b)b="",tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(b=" tdc-element-column"),b=f('<div class="'+tdcOperationUI._emptyElementClass+b+'"></div>'),tdcElementUI.bindEmptyElement(b),a.append(b);tdcIFrameData.changeData({$refEl:tdcOperationUI.getDraggedElement(),wasSidebarElementDragged:!1,
wasElementDragged:!0,wasInnerColumnDragged:!1,wasInnerRowDragged:!1,wasTempInnerRowDragged:!1,wasColumnDragged:!1,wasRowDragged:!1,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(d);tdcOperationUI.setCurrentElementOver(d);tdcSidebarPanel.clearPanel()},cloneHandler:function(a){a.preventDefault();a.stopPropagation();a=tdcElementHandlerUI.$element.data("model_id");if(b.isUndefined(a))new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",
!0,!1);else if(a=tdcIFrameData.getModel(a),b.isUndefined(a))new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Element model not in structure data!",!0,!1);else{var c=a.clone(),h=a.get("parentModel").get("childCollection");h.add(c,{at:h.indexOf(a)+1,silent:!0});tdcOperationUI.setDraggedElement(f('<div class="tdc-element">Cloned Element</div>'));h=tdcOperationUI.getDraggedElement();h.insertAfter(tdcElementHandlerUI.$element);tdcElementUI.bindElement(h);var g=tdcIFrameData._getDestinationModel(tdcOperationUI.getDraggedElement(),
[".tdc-inner-column",".tdc-column"]);b.isUndefined(g)&&new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Destination model not in structure data!",!0,!1);g=tdcIFrameData._getDestinationCol(tdcOperationUI.getDraggedElement());new tdcIFrameData.TdcLiveView({model:c,el:h[0]});h.data("model_id",c.cid);c.getShortcodeRender(g,"",!0,a);tdcOperationUI.setDraggedElement(d)}},setElement:function(a){!b.isUndefined(a)&&tdcOperationUI.isElement(a)?(tdcElementHandlerUI.$element=
a,tdcElementHandlerUI._$handlerWrapper.show()):tdcElementHandlerUI._$handlerWrapper.hide()},show:function(){tdcElementHandlerUI._$handlerWrapper.show()},hide:function(){tdcElementHandlerUI._$handlerWrapper.hide()},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcElementHandlerUI.$element)||tdcElementHandlerUI.$element.trigger(a)}}})(jQuery,Backbone,_);var tdcIFrameData;
(function(f,c,b,d){tdcIFrameData={iframeContents:d,tdcTopCollection:d,TdcModel:d,TdcCollection:d,TdcLiveView:d,_postOriginalContentJSON:d,_shortcodeParserSettingsClone:d,_isInitialized:!1,init:function(a,c){b.isUndefined(c)||!0!==c||(tdcIFrameData._isInitialized=!1);if(!tdcIFrameData._isInitialized&&(tdcIFrameData.iframeContents=a,tdcIFrameData._defineStructuredData(),!0===tdcIFrameData._initStructuredData())){c={};tdcIFrameData.bindViewsModelsWrappers(c,tdcIFrameData.tdcTopCollection,tdcIFrameData.iframeContents);
if(!b.isEmpty(c)){for(var e in c)tdcDebug.log(c[e]);a='The model does not match the <a href="'+a.attr("URL")+'" target="_blank">content</a>';b.isUndefined(c[e].info)||(a=c[e].info+". "+a);new tdcNotice.notice(a,!0,!1)}tdcDebug.log(tdcIFrameData.tdcTopCollection.models);""===tdcState.getHeaderTemplateId()?(tdcSidebar.$_headerTemplateZones.hide(),tdcSidebar.$_sidebar.find(".tdu-save-header-template").hide()):"no_header"===tdcState.getHeaderTemplateId()?(tdcSidebar.$_headerTemplateZones.hide(),tdcSidebar.$_sidebar.find(".tdu-save-header-template").hide()):
(tdcSidebar.$_headerTemplateZones.show(),tdcSidebar.$_sidebar.find(".tdu-save-header-template").show());""===tdcState.getFooterTemplateId()?tdcSidebar.$_sidebar.find(".tdu-save-footer-template").hide():"no_footer"===tdcState.getFooterTemplateId()?tdcSidebar.$_sidebar.find(".tdu-save-footer-template").hide():tdcSidebar.$_sidebar.find(".tdu-save-footer-template").show();tdcIFrameData.addDummyContent();tdcIFrameData._isInitialized=!0}},activateZone:function(a,c,h){tdcIFrameData.iframeContents.find(".tdc-zone").each(function(e){e=
f(this);if(e.data("type")===a){var g=e.data("model_id");if(!b.isUndefined(g)&&(g=tdcIFrameData.getModel(g),!b.isUndefined(g))){var n=g.get("blockUid");if(!b.isUndefined(n)){var k=tdcAdminIFrameUI.getLiveIframe(),l=k.contents().find("#"+n);l.length||(l=k.contents().find('[data-td-block-uid="'+n+'"]'));l.length&&(n={},tdcOperationUI.inRow(l)?tdcOperationUI.inRow(l)?tdcOperationUI.inColumn(l)?tdcOperationUI.inInnerRow(l)?tdcOperationUI.inInnerColumn(l)?(n.$currentZone=tdcOperationUI.inZone(l),n.$currentRow=
tdcOperationUI.inRow(l),n.$currentColumn=tdcOperationUI.inColumn(l),n.$currentInnerRow=tdcOperationUI.inInnerRow(l),n.$currentInnerColumn=tdcOperationUI.inInnerColumn(l),n.$currentElement=l):(n.$currentZone=tdcOperationUI.inZone(l),n.$currentRow=tdcOperationUI.inRow(l),n.$currentColumn=tdcOperationUI.inColumn(l),n.$currentInnerRow=tdcOperationUI.inInnerRow(l),n.$currentInnerColumn=l):(n.$currentZone=tdcOperationUI.inZone(l),n.$currentRow=tdcOperationUI.inRow(l),n.$currentColumn=tdcOperationUI.inColumn(l),
n.$currentInnerRow=l):(n.$currentZone=tdcOperationUI.inZone(l),n.$currentRow=tdcOperationUI.inRow(l),n.$currentColumn=l):(n.$currentZone=tdcOperationUI.inZone(l),n.$currentRow=l):n.$currentZone=l,tdcSidebar._currentModel=g,l.data("model_id",g.cid),tdcSidebar.setSettings(n,!0,g),tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-phone").trigger("click"),0<a.indexOf("sticky")?(0<a.indexOf("mobile")?tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-phone").trigger("click"):
"phone"===tdcSidebar.currentViewportSettings.name&&tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-all").trigger("click"),b.isUndefined(c)||(!0===c?(tdcSidebar.setForcedHeaderZone(a),e.parent().addClass("tdc-zone-sticky-active"),e.parent().removeClass("tdc-zone-sticky-inactive"),e.parent().removeClass("tdc-zone-sticky-invisible"),b.isUndefined(h)||!0!==h||(setTimeout(function(){tdcIFrameData.addDummyContent()},100),setTimeout(function(){tdcIFrameData.iframeContents.scrollTop(tdcAdminIFrameUI.getIframeWindow().tdHeader.getFixedHeaderHeight()+
210)},150),setTimeout(function(){tdcIFrameData.iframeContents.scrollTop(tdcAdminIFrameUI.getIframeWindow().tdHeader.getFixedHeaderHeight()+209)},200))):(e.parent().removeClass("tdc-zone-sticky-active"),e.parent().addClass("tdc-zone-sticky-inactive"),e.parent().addClass("tdc-zone-sticky-invisible")))):(0<a.indexOf("mobile")?tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-phone").trigger("click"):"phone"===tdcSidebar.currentViewportSettings.name&&tdcSidebar.$_sidebar.find(".tdc-responsive-buttons > .tdc-responsive-all").trigger("click"),
tdcSidebar.setForcedHeaderZone(d),b.isUndefined(h)||!0!==h||(setTimeout(function(){tdcIFrameData.addDummyContent()},100),setTimeout(function(){tdcIFrameData.iframeContents.scrollTop(0)},200))))}}}})},addDummyContent:function(){tdcIFrameData.iframeContents.find(".tdc-zone").each(function(a){if("tdc_content"===f(this).data("type")){a=tdcIFrameData.iframeContents.find(".tdc-dummy-content");var b=tdcIFrameData.iframeContents.contents().find("body"),c=b.height()-tdcAdminIFrameUI.getIframeWindow().innerHeight,
d=0;a.length&&a.remove();0>c?d=Math.abs(c)+tdcIFrameData.iframeContents.contents().find(".td-main-content-wrap").offset().top+300:5>b.height()-tdcAdminIFrameUI.getIframeWindow().innerHeight-tdcIFrameData.iframeContents.contents().find(".td-main-content-wrap").offset().top&&(d=tdcAdminIFrameUI.getIframeWindow().innerHeight-b.height()+tdcIFrameData.iframeContents.contents().find(".td-main-content-wrap").offset().top+300);b.append('<div class="tdc-dummy-content" style="height:'+d+'px"></div>')}})},rebuildZone:function(a,
c,h,g){var e=tdcIFrameData.getFirstModelByZoneType(a);if(!b.isUndefined(e)){var n=e.get("blockUid");tdcIFrameData.removeModel(e,!0,{silent:!0});e=tdcIFrameData._getOriginalContentJSON(c);if(b.isUndefined(e)||""===e)e=[{child:[tdcShortcodeParser.parse(0,'[tdc_zone type="'+a+'"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]')[0].child[0]],index:0,content:'[tdc_zone type="'+a+'"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]',shortcode:{tag:"tdc_zone",type:"closed",attrs:{named:{type:a}},content:"[vc_row][vc_column][/vc_column][/vc_row]"}}];
if(tdcIFrameData._initComponentData(a,e,!0)){e=tdcIFrameData.getFirstModelByZoneType(a);a=tdcIFrameData.iframeContents.find("#"+n);if(!a.length)return!1;c=a.get(0);a.data("model_id",e.cid);e.set("blockUid",n);e.set("html",c.innerHTML);new tdcIFrameData.TdcLiveView({model:e,el:c});b.isUndefined(h)||tdcIFrameData._checkModelData(e,{error:d,getShortcode:"",newImages:h});e.getShortcodeRender(3,n,!0,d,g)}return!0}return!1},setHeaderTemplate:function(a,c,h){if(""===a)tdcState.isNoHeader()?tdcIFrameData.iframeContents.find(".tdc-header-wrap").addClass("tdc-zone-invisible"):
tdcIFrameData.iframeContents.find(".tdc-header-wrap").removeClass("tdc-zone-invisible"),tdcIFrameData.iframeContents.find(".td-header-desktop-wrap, .td-header-desktop-sticky-wrap, .td-header-mobile-wrap, .td-header-mobile-sticky-wrap").addClass("tdc-zone-invisible"),tdcSidebar.$_headerTemplateZones.hide(),tdcSidebar.$_sidebar.find(".tdu-save-header-template").hide(),b.isUndefined(h)||b.isUndefined(h.is_snapshot)||!h.is_snapshot?(tdcRecycle.init(),tdcRecycle.takeSnapshot()):"Newspaper"===window.tdcAdminSettings.themeName&&
["tdc_header_desktop","tdc_header_desktop_sticky","tdc_header_mobile","tdc_header_mobile_sticky"].forEach(function(a,c){var e;b.isUndefined(h)||(e=JSON.parse(JSON.stringify(h)));"tdc_header_mobile_sticky"!==a||b.isUndefined(h)||b.isUndefined(h.is_snapshot)||!h.is_snapshot||(b.isUndefined(e)&&(e={}),e.lateCallback=function(){var a=f(tdcAdminIFrameUI._$liveIframe).contents();tdcIFrameData.init(a,!0);tdcRecycle.clearJsItems();tdcOperationUI.init(a);b.isUndefined(e.indexPath)||tdcSidebarPanel.showShortcodeFromPath(e.indexPath)});
tdcIFrameData.rebuildZone(a,"[tdc_zone][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]",d,e)}),b.isUndefined(h)||b.isUndefined(h.saveHeaderTemplate)||b.isUndefined(h.headerTemplateId)||(tdcSavePost.updateHeaderTemplate(),window.eventHub.$emit("refresh-header-fonts",{headerTemplateId:h.headerTemplateId}),window.eventHub.$emit("refresh-header-colors",{headerTemplateId:h.headerTemplateId}));else{var e=JSON.parse(tdcUtil.b64DecodeUnicode(a));tdcIFrameData.iframeContents.find(".tdc-header-wrap").addClass("tdc-zone-invisible");
tdcIFrameData.iframeContents.find(".td-header-desktop-wrap, .td-header-desktop-sticky-wrap, .td-header-mobile-wrap, .td-header-mobile-sticky-wrap").removeClass("tdc-zone-invisible");tdcSidebar.$_headerTemplateZones.show();tdcSidebar.$_sidebar.find(".tdu-save-header-template").show();"Newspaper"===window.tdcAdminSettings.themeName&&["tdc_header_desktop","tdc_header_desktop_sticky","tdc_header_mobile","tdc_header_mobile_sticky"].forEach(function(a,d){if(e.hasOwnProperty(a)){if(!b.isUndefined(h))var g=
JSON.parse(JSON.stringify(h));"tdc_header_mobile_sticky"!==a||b.isUndefined(h)||b.isUndefined(h.is_snapshot)||!h.is_snapshot||(b.isUndefined(g)&&(g={}),g.lateCallback=function(){var a=f(tdcAdminIFrameUI._$liveIframe).contents();tdcIFrameData.init(a,!0);tdcRecycle.clearJsItems();tdcOperationUI.init(a);b.has(h,"data")&&b.has(data,"replyJsForEval")&&tdcAdminIFrameUI.evalInIframe(h.data.replyJsForEval);b.isUndefined(g.indexPath)||tdcSidebarPanel.showShortcodeFromPath(g.indexPath)});tdcIFrameData.rebuildZone(a,
e[a],c,g)}});"header"===window.tdcPostSettings.tdbTemplateType?tdcSavePost.updateHeaderTemplate():b.isUndefined(h)||b.isUndefined(h.saveHeaderTemplate)||b.isUndefined(h.headerTemplateId)||(tdcSavePost.updateHeaderTemplate(),window.eventHub.$emit("refresh-header-fonts",{headerTemplateId:h.headerTemplateId}),window.eventHub.$emit("refresh-header-colors",{headerTemplateId:h.headerTemplateId}))}},setFooterTemplate:function(a,c,h){if(""===a){tdcState.isNoFooter()?tdcIFrameData.iframeContents.find(".tdc-footer-wrap").addClass("tdc-zone-invisible"):
tdcIFrameData.iframeContents.find(".tdc-footer-wrap").removeClass("tdc-zone-invisible");tdcIFrameData.iframeContents.find(".td-footer-wrap").addClass("tdc-zone-invisible");tdcSidebar.$_sidebar.find(".tdu-save-footer-template").hide();if(b.isUndefined(h)||b.isUndefined(h.is_snapshot)||!h.is_snapshot)tdcRecycle.init(),tdcRecycle.takeSnapshot();else if("Newspaper"===window.tdcAdminSettings.themeName){if(!b.isUndefined(h))var e=JSON.parse(JSON.stringify(h));tdcIFrameData.rebuildZone("tdc_footer","[tdc_zone][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]",
d,e)}b.isUndefined(h)||b.isUndefined(h.saveFooterTemplate)||b.isUndefined(h.footerTemplateId)||(tdcSavePost.updateFooterTemplate(),window.eventHub.$emit("refresh-footer-fonts",{footerTemplateId:h.footerTemplateId}),window.eventHub.$emit("refresh-footer-colors",{footerTemplateId:h.footerTemplateId}))}else tdcIFrameData.iframeContents.find(".tdc-footer-wrap").addClass("tdc-zone-invisible"),tdcIFrameData.iframeContents.find(".td-footer-wrap").removeClass("tdc-zone-invisible"),tdcSidebar.$_sidebar.find(".tdu-save-footer-template").show(),
"Newspaper"===window.tdcAdminSettings.themeName&&(b.isUndefined(h)||(e=JSON.parse(JSON.stringify(h))),tdcIFrameData.rebuildZone("tdc_footer",a,c,e)),"footer"===window.tdcPostSettings.tdbTemplateType?tdcSavePost.updateFooterTemplate():b.isUndefined(h)||b.isUndefined(h.saveFooterTemplate)||b.isUndefined(h.footerTemplateId)||(tdcSavePost.updateFooterTemplate(),window.eventHub.$emit("refresh-footer-fonts",{footerTemplateId:h.footerTemplateId}),window.eventHub.$emit("refresh-footer-colors",{footerTemplateId:h.footerTemplateId}))},
_callbackShortcodeRender:function(a){b.isUndefined(a)||b.isUndefined(a.lateCallback)||(b.isUndefined(a.lateCallbackContext)?setTimeout(function(){a.lateCallback.call(this)},2E3):setTimeout(function(){a.lateCallback.call(a.lateCallbackContext)},2E3))},_defineStructuredData:function(){tdcIFrameData._isInitialized||(tdcIFrameData.TdcModel=Backbone.Model.extend({getShortcodeRender:function(a,c,h,g,m){var e=this,k={error:d,getShortcode:""};b.isUndefined(g)?tdcIFrameData._checkModelData(e,k):tdcIFrameData._checkModelData(g,
k);if(!b.isUndefined(k.getShortcode)){var l=new tdcJobManager.job;l.shortcode=k.getShortcode;l.columns=a;l.blockUid=c;l.tries=0;l.success_callback=function(a){tdcDebug.log(a);var k=tdcAdminIFrameUI.getIframeWindow();b.isUndefined(g)&&tdcIFrameData.deleteCallback(e);!1===h?e.set("blockUid",a.blockUid):e.set("blockUid",d);b.has(a,"replyHtml")&&(e.set("bindNewContent",h),e.set("shortcode",l.shortcode),e.set("html",a.replyHtml,m));b.has(a,"replyJsForEval")&&(k.tdcEvalGlobal={oldBlockUid:c},tdcAdminIFrameUI.evalInIframe(a.replyJsForEval));
b.isUndefined(m)||b.isUndefined(m.earlyCallback)||(b.isUndefined(m.earlyCallbackContext)?m.earlyCallback.call(this):m.earlyCallback.call(m.earlyCallbackContext))};b.isUndefined(m)||b.isUndefined(m.is_snapshot)||!0!==m.is_snapshot||(l.is_snapshot=!0);l.error_callback=function(a,b){tdcDebug.log(b);tdcDebug.log(a);l.tries||(l.tries++,tdcJobManager.addJob(l))};a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||a.addClass("tdc-dropped");tdcJobManager.addJob(l)}k={error:d,getShortcode:""};tdcIFrameData._checkModelData(e,
k);b.isUndefined(k.error)||tdcDebug.log(k.error);k={error:d,getShortcode:""};b.isUndefined(e.get("parentModel"))||(tdcIFrameData._checkModelData(e.get("parentModel"),k),b.isUndefined(k.error)||tdcDebug.log(k.error))}}),tdcIFrameData.TdcCollection=Backbone.Collection.extend({model:tdcIFrameData.TdcModel}),tdcIFrameData.TdcTopCollection=Backbone.Collection.extend({model:tdcIFrameData.TdcModel}),tdcIFrameData.TdcLiveView=Backbone.View.extend({initialize:function(){this.listenTo(this.model,"change:current",
this.changeCurrent);this.listenTo(this.model,"change:html",this.customRender);this.listenTo(this.model,"remove",this.customRemove)},changeCurrent:function(a,c,d){this.model.has("current")&&!b.isUndefined(this.model.get("current"))&&!0===this.model.get("current")?(this.$el.addClass("tdc-element-selected"),tdcOperationUI.activeElementOver()):(this.$el.removeClass("tdc-element-selected"),tdcOperationUI.inactiveElementOver());this.model.set("cssWidth",this.$el.width())},customRemove:function(a,b,c){this.$el.hasClass("tdc-rows")?
this.$el.html(""):this.remove()},customRender:function(a,c,h){tdcDebug.log("customRender - Rendering our model");if(this.model.has("html")&&!b.isUndefined(this.model.get("html"))){this.$el.removeClass("tdc-dropped");this.$el.removeClass("tdc-changed");this.$el.hasClass("tdc_zone")?this.$el.html(this.$el.html()+this.model.get("html")):this.$el.html(this.model.get("html"));setTimeout(function(){"undefined"!==typeof tdcIFrameData.iframeContents.lastMouseEvent&&tdcMaskUI.repositionMask(tdcIFrameData.iframeContents.lastMouseEvent)},
100);c=this.$el.find(".td_block_wrap");c.length&&0===parseInt(c.outerHeight(!0))&&c.addClass("tdc-block-empty");if(this.model.has("bindNewContent")&&!0===this.model.get("bindNewContent"))if(this.model.set("bindNewContent",!1,{silent:!0}),this.$el.hasClass("tdc-element-inner-row-temp")){if(a.has("templateContent")){c=tdcUtil.b64DecodeUnicode(a.get("templateContent"));var e=this.$el.find(".tdc-inner-row"),m=e.attr("id");a.set("type","closed");a.set("content",c);a.unset("shortcode",{silent:!0});a.unset("templateContent",
{silent:!0});tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);var n=tdcShortcodeParser.parse(2,c);n.length&&(n=b.clone(n[0].shortcode.attrs.named),a.set("attrs",n));this.$el.attr("data-tdc-inner-row-uid",m);this.$el.removeClass("tdc-element-inner-row-temp").addClass("tdc-element-inner-row");this.model.set("blockUid",e.attr("id"));window.addInnerRowWrappers(this.$el);if(!0===tdcIFrameData._initNewContentStructureData(4,c,a)){var k=a.get("childCollection"),l={};tdcIFrameData.bindViewsModelsWrappers(l,
k,this.$el,4);if(!b.isEmpty(l)){for(var p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}}}else if(e=this.$el.find(".tdc-inner-row"),m=e.attr("id"),k=a.get("childCollection"),this.$el.removeClass("tdc-element-inner-row-temp").addClass("tdc-element-inner-row"),this.$el.attr("data-tdc-inner-row-uid",m),this.model.set("blockUid",e.attr("id")),window.addInnerRowWrappers(this.$el),!b.isUndefined(k)&&(l={},tdcIFrameData.bindViewsModelsWrappers(l,
k,this.$el,4),!b.isEmpty(l))){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcInnerRowUI.init(this.$el.parent());tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el)},d,this.model);tdcIFrameData._callbackShortcodeRender(h)}else if(this.$el.hasClass("tdc-element-inner-row")){e=
this.$el.find(".tdc-inner-row");m=e.attr("id");k=this.model.get("childCollection");b.isUndefined(k)||k.reset();this.$el.attr("data-tdc-inner-row-uid",m);window.addInnerRowWrappers(this.$el);this.model.set("blockUid",e.attr("id"));var q=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(4,q,a)&&(k=this.model.get("childCollection"),!b.isUndefined(k)&&(l={},tdcIFrameData.bindViewsModelsWrappers(l,k,this.$el,4),!b.isEmpty(l)))){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);return}tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el)},d,this.model);tdcIFrameData._callbackShortcodeRender(h)}else if(this.$el.hasClass("tdc-cloud-temp")){if(this.model.has("templateContent")){var r=this;c=r.model.get("templateContent");
p=r.$el.find(".tdc-row");tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);c=tdcShortcodeParser.parse(1,tdcUtil.b64DecodeUnicode(c));if(c.length!==p.length){new tdcNotice.notice("Errors happened in templateContent(content.length!==$tdcRows.length) during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}a=tdcIFrameData.getFirstModelByZoneType("tdc_content");b.isUndefined(a)&&new tdcNotice.notice("Errors happened in templateContent during tdc_content zone!",!0,!1);k=a.get("childCollection");
b.isUndefined(k)&&new tdcNotice.notice("Errors happened in templateContent during tdc_content childCollection!",!0,!1);k=new tdcIFrameData.TdcCollection;a.set("childCollection",k);l={};b.each(c,function(b,c,e){tdcIFrameData._getData(a,b,l)});b.isEmpty(l)||(tdcDebug.log(l),new tdcNotice.notice("Errors happened in templateContent during tdcIFrameData.changeData() -> _getData()!",!0,!1));c={error:d,shortcode:d};tdcIFrameData.checkCurrentData(c);b.isUndefined(c.error)||(tdcDebug.log(c.error),new tdcNotice.notice(l,
!0,!1));k=a.get("childCollection");if(p.length!==k.length){new tdcNotice.notice("Errors happened in templateContent during() tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}r.$el.find(".tdc-row").each(function(a,c){var e=f(c);e.insertBefore(r.$el);a=k.at(a);new tdcIFrameData.TdcLiveView({model:a,el:c});var d=r.$el.prevAll().length;c=a.get("childCollection");k.add(a,{at:d});window.addRowWrappers(e);if(!0===tdcIFrameData._initNewContentStructureData(2,q,a)&&!b.isUndefined(c))if(d={},tdcIFrameData.bindViewsModelsWrappers(d,
c,e,2),b.isEmpty(d))e.data("model_id",a.cid);else{for(var h in d)tdcDebug.log(d[h]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1)}});a.set("childCollection",k);p=tdcOperationUI.inZone(r.$el);r.$el.remove();tdcIFrameData.removeModel(r.model);tdcZoneUI.init(e);tdcRowUI.init(e);tdcColumnUI.init(e);tdcInnerRowUI.init(e);tdcInnerColumnUI.init(e);tdcElementUI.init(e);tdcSidebar.setSettings({$currentZone:p,$currentRow:e},d,this.model);tdcIFrameData._callbackShortcodeRender(h)}}else if(this.$el.hasClass("tdc-row-temp")){if(a.has("templateContent")){c=
tdcUtil.b64DecodeUnicode(a.get("templateContent"));e=this.$el.find(".tdc-row");k=a.get("childCollection");a.set("type","closed");a.set("content",c);a.unset("shortcode",{silent:!0});a.unset("templateContent",{silent:!0});tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);n=tdcShortcodeParser.parse(1,c);n.length&&(n=b.clone(n[0].shortcode.attrs.named),a.set("attrs",n));this.$el.removeClass("tdc-row-temp").addClass(e.attr("class"));this.$el.attr("id",e.attr("id"));this.$el.html(e.html());
this.model.set("blockUid",e.attr("id"));window.addRowWrappers(this.$el);if(!0===tdcIFrameData._initNewContentStructureData(2,c,a)&&(l={},tdcIFrameData.bindViewsModelsWrappers(l,k,this.$el,2),!b.isEmpty(l))){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcRowUI.init(this.$el.parent());tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:this.$el},
d,this.model)}else{e=this.$el.find(".tdc-row");k=a.get("childCollection");this.$el.removeClass("tdc-row-temp").addClass(e.attr("class"));this.$el.attr("id",e.attr("id"));this.$el.html(e.html());this.model.set("blockUid",e.attr("id"));window.addRowWrappers(this.$el);l={};tdcIFrameData.bindViewsModelsWrappers(l,k,this.$el,2);if(!b.isEmpty(l)){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcRowUI.init(this.$el.parent());
tdcColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(c),$currentRow:this.$el,$currentColumn:tdcOperationUI.inColumn(c),$currentElement:c},d,this.model)}tdcIFrameData._callbackShortcodeRender(h)}else if(this.$el.hasClass("tdc-zone")){e=this.$el.find(".tdc-zone");k=this.model.get("childCollection");b.isUndefined(k)||k.reset();this.$el.html(e.html());this.$el.attr("class",e.attr("class"));this.$el.attr("id",e.attr("id"));this.model.set("blockUid",
e.attr("id"));window.addZoneWrappers(this.$el);q=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(1,q,this.model)&&!b.isUndefined(k)&&(l={},tdcIFrameData.bindViewsModelsWrappers(l,k,this.$el,1),!b.isEmpty(l))){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcRowUI.init(this.$el);tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);
tdcSidebar.setSettings({$currentZone:this.$el});tdcIFrameData._callbackShortcodeRender(h)}else if(this.$el.hasClass("tdc-row")){e=this.$el.find(".tdc-row");k=this.model.get("childCollection");b.isUndefined(k)||k.reset();this.$el.html(e.html());this.$el.attr("class",e.attr("class"));this.$el.attr("id",e.attr("id"));this.model.set("blockUid",e.attr("id"));window.addRowWrappers(this.$el);q=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(2,q,this.model)&&!b.isUndefined(k)&&
(l={},tdcIFrameData.bindViewsModelsWrappers(l,k,this.$el,2),!b.isEmpty(l))){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:this.$el},d,this.model);tdcIFrameData._callbackShortcodeRender(h)}else if(this.$el.hasClass("tdc-column")){a.has("templateContent")&&
(c=tdcUtil.b64DecodeUnicode(a.get("templateContent")),a.set("type","closed"),a.unset("templateContent",{silent:!0}));e=this.$el.find(".tdc-column");k=this.model.get("childCollection");b.isUndefined(k)||k.reset();e.unwrap();this.$el=e;this.$el.data("model_id",this.model.cid);window.addColumnWrappers(this.$el);q=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(3,q,this.model)&&(k=this.model.get("childCollection"),!b.isUndefined(k)&&(l={},tdcIFrameData.bindViewsModelsWrappers(l,
k,this.$el,3),!b.isEmpty(l)))){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcColumnUI.init(this.$el.parent());tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:this.$el},d,this.model);tdcIFrameData._callbackShortcodeRender(h)}else if(this.$el.hasClass("tdc-inner-row")){e=
this.$el.find(".tdc-inner-row");k=this.model.get("childCollection");b.isUndefined(k)||k.reset();this.$el.html(e.html());window.addInnerRowWrappers(this.$el);q=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(3,q,this.model)&&!b.isUndefined(k)&&(l={},tdcIFrameData.bindViewsModelsWrappers(l,k,this.$el,3),!b.isEmpty(l))){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcInnerColumnUI.init(this.$el);
tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:this.$el},d,this.model);tdcIFrameData._callbackShortcodeRender(h)}else if(this.$el.hasClass("tdc-inner-column")){a.has("templateContent")&&(c=tdcUtil.b64DecodeUnicode(a.get("templateContent")),a.set("type","closed"),a.unset("templateContent",{silent:!0}));e=this.$el.find(".tdc-inner-column");k=
this.model.get("childCollection");b.isUndefined(k)||k.reset();e.unwrap();this.$el=e;this.$el.data("model_id",this.model.cid);window.addInnerColumnWrappers(this.$el);q=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(5,q,this.model)&&(k=this.model.get("childCollection"),!b.isUndefined(k)&&(l={},tdcIFrameData.bindViewsModelsWrappers(l,k,this.$el,5),!b.isEmpty(l)))){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);return}tdcInnerColumnUI.init(this.$el.parent());tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el),$currentInnerColumn:this.$el},d,this.model);tdcIFrameData._callbackShortcodeRender(h)}else if(this.$el.hasClass("tdc_zone")){e=this.$el.find(".tdc-row");c=this.model.cid;a=tdcIFrameData.getModel(c);k=a.get("childCollection");
e.data("model_id",c);this.model.set("blockUid",e.attr("id"));window.addZoneWrappers(this.$el);if(!b.isUndefined(k)&&(l={},tdcIFrameData.bindViewsModelsWrappers(l,k,e,2),!b.isEmpty(l))){for(p in l)tdcDebug.log(l[p]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcZoneUI.init(this.$el);tdcRowUI.init(this.$el);tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);this.$el=e;tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),
$currentRow:e},d,this.model);tdcIFrameData._callbackShortcodeRender(h)}else if(this.$el.hasClass("tdc-element")){e=this.$el.attr("class");p=[];b.isUndefined(e)||(p=this.$el.attr("class").split(/\s+/));this.$el.html(this.model.get("html"));e=this.$el.find(".td_block_wrap");e.unwrap();this.$el=e;this.$el.data("model_id",this.model.cid);this.model.set("blockUid",e.data("td-block-uid"));e=d;this.model.has("rebindToPanel")&&!0===this.model.get("rebindToPanel")&&(this.model.set("rebindToPanel",!1,{silent:!0}),
e=!0);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(this.$el),$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el),$currentInnerColumn:tdcOperationUI.inInnerColumn(this.$el),$currentElement:this.$el},e,this.model);tdcIFrameData._callbackShortcodeRender(h);var u=this;f.each(p,function(a,b){0===b.indexOf("tdc-element")&&u.$el.addClass(b)});0===parseInt(this.$el.height(),10)?this.$el.addClass("tdc-block-empty"):
this.$el.removeClass("tdc-block-empty");tdcElementUI.bindElement(this.$el)}(b.isUndefined(h)||b.isUndefined(h.is_snapshot)||!h.is_snapshot)&&tdcRecycle.takeSnapshot()}}}))},_getPostOriginalContentJSON:function(a){if(!0===a||b.isUndefined(tdcIFrameData._postOriginalContentJSON)&&!b.isUndefined(window.tdcPostSettings))a=Object.keys(window.tdcAdminSettings.mappedShortcodes),a=a.filter(function(a){return 0>["tdc_zone","vc_row","vc_column","vc_row_inner","vc_column_inner"].indexOf(a)}),a={0:["tdc_zone"],
1:["vc_row"],2:["vc_column"],3:["vc_row_inner"],4:["vc_column_inner"],5:a},tdcIFrameData._shortcodeParserSettingsClone=a,tdcShortcodeParser.init(a),tdcIFrameData._postOriginalContentJSON=tdcShortcodeParser.parse(0,tdcUtil.b64DecodeUnicode(window.tdcPostSettings.postContent));return tdcIFrameData._postOriginalContentJSON},_getOldPostOriginalContentJSON:function(){if(b.isUndefined(tdcIFrameData._postOriginalContentJSON)&&!b.isUndefined(window.tdcPostSettings)){var a=Object.keys(window.tdcAdminSettings.mappedShortcodes);
a=a.filter(function(a){return 0>["vc_row","vc_column","vc_row_inner","vc_column_inner"].indexOf(a)});a={0:["vc_row"],1:["vc_column"],2:["vc_row_inner"],3:["vc_column_inner"],4:a};tdcIFrameData._shortcodeParserSettingsClone=a;tdcShortcodeParser.init(a);tdcIFrameData._postOriginalContentJSON=tdcShortcodeParser.parse(0,tdcUtil.b64DecodeUnicode(window.tdcPostSettings.postContent))}return tdcIFrameData._postOriginalContentJSON},_getOriginalContentJSON:function(a){var b=Object.keys(window.tdcAdminSettings.mappedShortcodes);
b=b.filter(function(a){return 0>["tdc_zone","vc_row","vc_column","vc_row_inner","vc_column_inner"].indexOf(a)});b={0:["tdc_zone"],1:["vc_row"],2:["vc_column"],3:["vc_row_inner"],4:["vc_column_inner"],5:b};tdcIFrameData._shortcodeParserSettingsClone=b;tdcShortcodeParser.init(b);return tdcShortcodeParser.parse(0,a)},_getContentJSON:function(a,c){var e;b.isUndefined(window.tdcPostSettings)||(e=tdcShortcodeParser.parse(a,c));return e},_initStructuredData:function(){if(!tdcIFrameData._isInitialized){tdcIFrameData.tdcTopCollection=
new tdcIFrameData.TdcTopCollection;var a=tdcIFrameData._getPostOriginalContentJSON();a.length||(window.tdcPostSettings.postContent.length&&"header"!==window.tdcPostSettings.tdbTemplateType&&"footer"!==window.tdcPostSettings.tdbTemplateType?(a=tdcUtil.b64DecodeUnicode(window.tdcPostSettings.postContent),0<=a.indexOf("vc_row")?window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode('[tdc_zone type="tdc_content"]'+a+"[/tdc_zone]"):window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode('[tdc_zone type="tdc_content"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]')):
window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode('[tdc_zone type="tdc_content"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]'),a=tdcIFrameData._getPostOriginalContentJSON(!0));var c={};"footer"!==window.tdcPostSettings.tdbTemplateType&&(c.tdc_content=a);a=tdcState.getHeaderTemplateContent();if(""!==a){a=JSON.parse(tdcUtil.b64DecodeUnicode(a));for(var d in a)c[d]=tdcIFrameData._getOriginalContentJSON(a[d])}d=tdcState.getFooterTemplateContent();""!==d&&(c.tdc_footer=tdcIFrameData._getOriginalContentJSON(d));
var g=tdcShortcodeParser.parse(0,"[tdc_zone][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]");"tdc_header_desktop tdc_header_desktop_sticky tdc_header_mobile tdc_header_mobile_sticky tdc_content tdc_footer".split(" ").forEach(function(a){if("Newspaper"===window.tdcAdminSettings.themeName||"tdc_content"===a)if(b.isUndefined(c[a])||""===c[a]||"object"===typeof c[a]&&!c[a].length)c[a]=[{child:[g[0].child[0]],index:0,content:'[tdc_zone type="'+a+'"][vc_row][vc_column][/vc_column][/vc_row][/tdc_zone]',
shortcode:{tag:"tdc_zone",type:"closed",attrs:{named:{type:a}},content:"[vc_row][vc_column][/vc_column][/vc_row]"}}]});for(var m in c)if(c.hasOwnProperty(m)&&!tdcIFrameData._initComponentData(m,c[m]))return;return!0}},_initComponentData:function(a,c,h){if(!b.isUndefined(h)&&!1!==h||!tdcIFrameData._isInitialized){if(c.length){var e={};b.each(c,function(b,c,h){tdcIFrameData._getData(d,b,e,d,a)});b.isEmpty(e)||(console.log(c),tdcDebug.log(e),new tdcNotice.notice("Errors happened during _initStructureData() -> _getData()!",
!0,!1));c={error:d,shortcode:d};tdcIFrameData.checkCurrentData(c);b.isUndefined(c.error)||(tdcDebug.log(c.error),new tdcNotice.notice(e,!0,!1))}return!0}},_initNewContentStructureData:function(a,c,h){c=tdcIFrameData._getContentJSON(a,c);if(c.length){var e={};b.each(c,function(b,c,d){tdcIFrameData._getData(h,b,e,a)});b.isEmpty(e)||(tdcDebug.log(e),new tdcNotice.notice(e,!0,!1));c={error:d,shortcode:d};tdcIFrameData.checkCurrentData(c);b.isUndefined(c.error)||(tdcDebug.log(c.error),new tdcNotice.notice("Errors happened during _initNewContentStructureData() -> checkCurrentData()!",
!0,!1))}return!0},_getData:function(a,c,d,g,m){var e;if(b.isUndefined(a))var h=tdcIFrameData.tdcTopCollection;else h=a.get("childCollection"),b.isUndefined(h)&&(h=new tdcIFrameData.TdcCollection,a.set("childCollection",h));for(var l in tdcIFrameData._shortcodeParserSettingsClone)if(!(!b.isUndefined(g)&&parseInt(g,10)>l||b.isUndefined(c.shortcode))&&b.isObject(c.shortcode)&&b.has(c.shortcode,"tag")&&-1!==b.indexOf(tdcIFrameData._shortcodeParserSettingsClone[l],c.shortcode.tag)){0<parseInt(l,10)&&b.isUndefined(a)&&
(e="Not zones as the first elements!");!b.isUndefined(a)&&parseInt(a.get("level"),10)>=parseInt(l,10)&&(e="Elements does not respect the shortcode levels! ParentModel (cid: "+a.cid+" ) level: "+a.get("level")+" - element level : "+l);!b.isUndefined(a)&&2<parseInt(l,10)-parseInt(a.get("level"),10)&&3!==parseInt(a.get("level"),10)&&5!==parseInt(l,10)&&(e="Elements respect the shortcode levels, but the difference higher than 2 is not allowed here!");b.isUndefined(e)||(d[b.keys(d).length]={element:c,
info:e,parentModel:a});5!==parseInt(l,10)||b.isUndefined(c.shortcode.content)||(g=b.clone(c.shortcode.attrs.named),g.content=c.shortcode.content,c.shortcode.attrs.named=g);l={content:c.content,attrs:c.shortcode.attrs.named,tag:c.shortcode.tag,type:c.shortcode.type,level:parseInt(l,10),parentModel:a,bindNewContent:!1};b.isUndefined(m)||(l.type_zone=m);var f=new tdcIFrameData.TdcModel(l);b.has(c,"child")&&0<c.child.length&&(f.set("childCollection",new tdcIFrameData.TdcCollection),b.each(c.child,function(a,
b,c){tdcIFrameData._getData(f,a,d)}));break}b.isUndefined(f)?d[b.keys(d).length]={element:c,info:"Element not found!",parentModel:a}:b.isUndefined(h)||h.add(f)},getModel:function(a,c){if(tdcIFrameData._isInitialized){var e;b.isUndefined(c)&&(c=tdcIFrameData.tdcTopCollection);b.each(c.models,function(c,d,h){b.isUndefined(e)&&(c.cid===a?e=c:c.has("childCollection")&&(c=c.get("childCollection"),e=tdcIFrameData.getModel(a,c)))});if(!b.isUndefined(e))return e}},getFirstModelByTag:function(a,c){if(tdcIFrameData._isInitialized){var e;
b.isUndefined(c)&&(c=tdcIFrameData.tdcTopCollection);b.each(c.models,function(c,d,h){b.isUndefined(e)&&(c.attributes.tag===a?e=c:c.has("childCollection")&&(c=c.get("childCollection"),e=tdcIFrameData.getFirstModelByTag(a,c)))});if(!b.isUndefined(e))return e}},getFirstModelByZoneType:function(a){var c;b.each(tdcIFrameData.tdcTopCollection.models,function(e,d,m){b.isUndefined(c)&&(b.isUndefined(e.attributes.type_zone)||e.attributes.type_zone!==a||(c=e))});if(!b.isUndefined(c))return c},getZoneParent:function(a){b.isString(a)&&
(a=tdcIFrameData.getModel(a));var c=a.get("parentModel");return b.isUndefined(c)?a:tdcIFrameData.getZoneParent(c)},removeModel:function(a,c,d){(b.isUndefined(c)||!0===c)&&tdcIFrameData.deleteCallback(a);c=a.get("parentModel");b.isUndefined(d)&&(d={});b.isUndefined(c)?tdcIFrameData.tdcTopCollection.remove(a,d):c.get("childCollection").remove(a,d)},deleteCallback:function(a){var c=a.get("blockUid");a=a.get("childCollection");tdcAdminIFrameUI.getIframeWindow().tdcComposerBlocksApi.deleteItem(c);!b.isUndefined(a)&&
a.length&&b.each(a.models,function(a,b,c){tdcIFrameData.deleteCallback(a)})},_checkModelData:function(a,c){if(b.isUndefined(c.error)){var e=a.get("parentModel");if(0!==a.level||b.isUndefined(e))if(!b.isUndefined(e)&&parseInt(e.get("level"),10)>=parseInt(a.level,10))c.error="Elements does not respect the shortcode levels!";else if(!b.isUndefined(e)&&2<parseInt(a.level,10)-parseInt(e.get("level"),10)&&2!==parseInt(e.get("level"),10)&&4!==parseInt(a.level,10))c.error="Elements respect the shortcode levels, but the difference higher than 2 is not allowed here!";
else{!b.isUndefined(c.getShortcode)&&b.isUndefined(c.deepLevel)&&(c.deepLevel=0,c["tempShortcodeDeepLevel"+c.deepLevel]="");if(!b.isUndefined(c.getShortcode)&&a.has("templateContent")&&""!==a.get("templateContent"))c.template=tdcUtil.b64DecodeUnicode(a.get("templateContent"));else if(a.has("childCollection")){b.isUndefined(c.getShortcode)||(c.deepLevel++,c["tempShortcodeDeepLevel"+c.deepLevel]="");var g=a.get("childCollection");b.each(g.models,function(a,b,e){tdcIFrameData._checkModelData(g.get(a.cid),
c)});b.isUndefined(c.getShortcode)||c.deepLevel--}if(!b.isUndefined(c.getModelsWithFonts)){var m=!1,n=a.get("attrs");b.map(n,function(e,d){!m&&0<d.indexOf("_font_")&&(b.isUndefined(c.modelsWithFonts)&&(c.modelsWithFonts=[]),c.modelsWithFonts.push(a),m=!0)})}if(!b.isUndefined(c.getModelsWithColors)){var k=!1;n=a.get("attrs");b.map(n,function(e,d){!k&&0<d.indexOf("_color")&&(b.isUndefined(c.modelsWithColors)&&(c.modelsWithColors=[]),c.modelsWithColors.push(a),k=!0)})}if(!b.isUndefined(c.getShortcode)){e=
a.get("type");var l=a.get("tag");n=a.get("attrs");var f="";if("undefined"!==typeof c.images){var q=b.clone(n);b.map(n,function(a,e){b.map(window.tdcAdminSettings.mappedShortcodes[l].params,function(a,d){if(e===a.param_name)if("attach_image"===a.type)a=n[a.param_name],d=tdcJobManager._getUniqueID(),b.isUndefined(c.images.ids)?(c.images.ids={},c.images.ids[a]=d):b.isUndefined(c.images.ids[a])?c.images.ids[a]=d:d=c.images.ids[a],q[e]=d;else if("tdc_css"===a.param_name&&""!==n.tdc_css){var h=JSON.parse(window.atob(n.tdc_css));
b.map(h,function(a,e){b.map(h[e],function(a,d){if(0===a.trim().indexOf("url")){var g=tdcJobManager._getUniqueID();b.isUndefined(c.images.urls)?(c.images.urls={},c.images.urls[a]=g):b.isUndefined(c.images.urls[a])?c.images.urls[a]=g:g=c.images.urls[a];h[e][d]=g}})});q.tdc_css=window.btoa(JSON.stringify(h))}})});n=q}else"undefined"!==typeof c.newImages&&(q=b.clone(n),b.map(n,function(a,e){b.map(window.tdcAdminSettings.mappedShortcodes[l].params,function(a,d){if(e===a.param_name)if("attach_image"===
a.type){var h=n[a.param_name];a=c.newImages.find(function(a){return h===a.uid.substring(8)});"undefined"!==typeof a&&(q[e]=a.attachment_id)}else if("tdc_css"===a.param_name&&""!==n.tdc_css){var g=JSON.parse(window.atob(n.tdc_css));b.map(g,function(a,e){b.map(g[e],function(a,b){var d=c.newImages.find(function(b){return a===b.uid.substring(8)});"undefined"!==typeof d&&(g[e][b]='url("'+d.url+'")')})});q.tdc_css=window.btoa(JSON.stringify(g))}})}),n=q,a.set("attrs",n));if("td_block_text_with_title"===
l||"vc_column_text"===l||"vc_raw_html"===l||"tdc_woo_shortcodes"===l)if(b.map(n,function(a,b){"content"!==b&&(f+=" "+b+'="'+a+'"')}),b.has(n,"content"))if("vc_raw_html"===l||"tdc_woo_shortcodes"===l)f="["+l+f+"]"+b.unescape(n.content)+"[/"+l+"]";else try{var r=tdcUtil.b64DecodeUnicode(n.content);f="["+l+f+"]"+r+"[/"+l+"]"}catch(u){f="["+l+f+"]"+b.unescape(n.content)+"[/"+l+"]"}else f="["+l+f+"][/"+l+"]";else switch(b.map(n,function(a,b){f+=" "+b+'="'+a+'"'}),e){case "single":f="["+l+f+"]";break;case "closed":r=
"";b.isUndefined(c["tempShortcodeDeepLevel"+(parseInt(c.deepLevel)+1)])||(r=c["tempShortcodeDeepLevel"+(parseInt(c.deepLevel)+1)],c["tempShortcodeDeepLevel"+(parseInt(c.deepLevel)+1)]=d);f="["+l+f+"]"+r+"[/"+l+"]";break;case "template":f="vc_column"===l||"vc_column_inner"===l?"["+l+f+"]"+c.template+"[/"+l+"]":c.template}c["tempShortcodeDeepLevel"+c.deepLevel]+=f;0===c.deepLevel&&(c.getShortcode+=f)}}else c.error="Not zones as the first elements!"}},checkCurrentData:function(a){tdcIFrameData._isInitialized&&
b.each(tdcIFrameData.tdcTopCollection.models,function(b,c,d){tdcIFrameData._checkModelData(tdcIFrameData.tdcTopCollection.get(b.cid),a)})},changeData:function(a){if(tdcIFrameData._isInitialized){tdcMain.setContentModified();var c=a.$refEl,h=c.prevAll().length;if(a.wasSidebarElementDragged)if(a.wasElementDragged){var g=tdcIFrameData._getDestinationModel(a.$refEl,[".tdc-inner-column",".tdc-column"]);b.isUndefined(g)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",
!0,!1);var m=tdcIFrameData._getDestinationCol(a.$refEl);g.has("childCollection")||g.set("childCollection",new tdcIFrameData.TdcCollection);var n=g.get("childCollection");var k={},l=c.data("start-values"),p;"undefined"!==typeof l&&(l=JSON.parse(tdcUtil.b64DecodeUnicode(l)),"undefined"!==typeof l&&(b.isArray(l)&&l.length?(k=l[0],1<l.length&&(p=l)):k=l));l=c.data("shortcodeName");k=new tdcIFrameData.TdcModel({content:"",attrs:k,tag:l,type:"single",level:4,parentModel:g});new tdcIFrameData.TdcLiveView({model:k,
el:c[0]});b.isUndefined(p)||k.set("presetValues",p);tdcElementUI.bindElement(c);tdcRecycle.takeSnapshot(k.get("tag")+" : sidebar element added");c.data("model_id",k.cid);n.add(k,{at:h});k.set("parentModel",g);k.getShortcodeRender(m,a.draggedBlockUid,!0)}else if(a.wasTempInnerRowDragged)tdcRecycle.takeSnapshot("Sidebar inner-row added"),g=tdcIFrameData._getDestinationModel(a.$refEl,[".tdc-column"]),b.isUndefined(g)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",
!0,!1),m=tdcIFrameData._getDestinationCol(a.$refEl),g.has("childCollection")||g.set("childCollection",new tdcIFrameData.TdcCollection),n=g.get("childCollection"),l=c.data("templateContent"),b.isUndefined(l)?(l=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row_inner",type:"closed",level:3,parentModel:g}),new tdcIFrameData.TdcLiveView({model:l,el:c[0]}),k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column_inner",type:"closed",level:4,parentModel:l}),c.data("model_id",l.cid),n.add(l,
{at:h}),p=new tdcIFrameData.TdcCollection,p.add(k),l.set("childCollection",p),p=new tdcIFrameData.TdcCollection,k.set("childCollection",p)):(l=new tdcIFrameData.TdcModel({templateContent:l,attrs:{},tag:"vc_row_inner",type:"template",level:3,parentModel:g}),new tdcIFrameData.TdcLiveView({model:l,el:c[0]}),k={},p=c.data("startValues"),"undefined"!==typeof p&&(k=JSON.parse(window.atob(p))),l.set({attrs:k}),c.data("model_id",l.cid),n.add(l,{at:h})),l.getShortcodeRender(m,a.draggedBlockUid,!0);else if(a.wasTempRowDragged)if(tdcRecycle.takeSnapshot("Sidebar row added"),
l=c.data("templateContent"),g=tdcIFrameData._getDestinationModel(a.$refEl,[".tdc-zone"]),b.isUndefined(g)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1),g.has("childCollection")||g.set("childCollection",new tdcIFrameData.TdcCollection),n=g.get("childCollection"),b.isUndefined(l)){var q=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row",type:"closed",level:1,parentModel:g});new tdcIFrameData.TdcLiveView({model:q,el:c[0]});k=new tdcIFrameData.TdcModel({content:"",
attrs:{},tag:"vc_column",type:"closed",level:2,parentModel:q});c.data("model_id",q.cid);h=c.prevAll(".tdc-row").length;n.add(q,{at:h});l=new tdcIFrameData.TdcCollection;l.add(k);q.set("childCollection",l);m=new tdcIFrameData.TdcCollection;k.set("childCollection",m);if(a.wasElementWithRowDragged){p={};var r={};l=c.data("start-values");var u=c.data("row-start-values");"undefined"!==typeof u&&(r=JSON.parse(window.atob(u)));q.set({attrs:r});"undefined"!==typeof l&&(p=JSON.parse(window.atob(l)),b.isArray(p)&&
(p=p[0]));l=c.data("shortcodeName");k=new tdcIFrameData.TdcModel({content:"",attrs:p,tag:l,type:"single",level:3,parentModel:k});m.add(k);m=new tdcIFrameData.TdcCollection;k.set("childCollection",m)}q.getShortcodeRender(1,a.draggedBlockUid,!0)}else k=c.data("shortcodeName"),b.isUndefined(k)||"tdc_zone"!==k?(q=new tdcIFrameData.TdcModel({templateContent:l,attrs:{},tag:"vc_row",type:"template",level:1,parentModel:g}),new tdcIFrameData.TdcLiveView({model:q,el:c[0]}),h=c.prevAll(".tdc-row").length,c.data("model_id",
q.cid),b.isUndefined(g)||(n.add(q,{at:h}),g.set("childCollection",n),q.set("childCollection",new tdcIFrameData.TdcCollection)),q.getShortcodeRender(1,a.draggedBlockUid,!0)):(l=JSON.parse(window.atob(l)).reverse(),b.map(l,function(e,d){setTimeout(function(){console.log(d);0!==d&&(c=f(c[0].outerHTML).insertBefore(c),c.html(""),c.addClass("tdc-dropped"));var m=new tdcIFrameData.TdcModel({templateContent:window.btoa(e),attrs:{},tag:"vc_row",type:"template",level:1,parentModel:g});new tdcIFrameData.TdcLiveView({model:m,
el:c[0]});h=c.prevAll(".tdc-row").length;c.data("model_id",m.cid);b.isUndefined(g)||(n.add(m,{at:h}),g.set("childCollection",n),m.set("childCollection",new tdcIFrameData.TdcCollection));m.getShortcodeRender(1,a.draggedBlockUid,!0)},500+2E3*parseInt(d,10))}));else if(a.wasColumnDragged){if(tdcRecycle.takeSnapshot("Column copied"),l=c.data("templateContent"),!b.isUndefined(l)){k=c.data("model_id");if(b.isUndefined(k)){new tdcNotice.notice("changeData Error: Column model id is not in $refEl data!",!0,
!1);return}k=tdcIFrameData.getModel(k);if(b.isUndefined(k)){new tdcNotice.notice("changeData Error: Column model not in structure data!",!0,!1);return}k.set("templateContent",l);k.set("type","template");m=tdcIFrameData._getDestinationCol(a.$refEl);k.getShortcodeRender(m,a.draggedBlockUid,!0)}}else{if(a.wasInnerColumnDragged&&(tdcRecycle.takeSnapshot("Inner column copied"),l=c.data("templateContent"),!b.isUndefined(l))){m=c.data("model_id");if(b.isUndefined(m)){new tdcNotice.notice("changeData Error: Column model id is not in $refEl data!",
!0,!1);return}k=tdcIFrameData.getModel(m);if(b.isUndefined(m)){new tdcNotice.notice("changeData Error: Column model not in structure data!",!0,!1);return}k.set("templateContent",l);k.set("type","template");m=tdcIFrameData._getDestinationCol(a.$refEl);k.getShortcodeRender(m,a.draggedBlockUid,!0)}}else{k=c.data("model_id");if(b.isUndefined(k)){new tdcNotice.notice("changeData Error: Element model id is not in $refEl data!",!0,!1);return}k=tdcIFrameData.getModel(k);if(b.isUndefined(k)){new tdcNotice.notice("changeData Error: Element model not in structure data!",
!0,!1);return}if(a.wasElementDragged){tdcDebug.log("case 1");if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){tdcDebug.log("element recycled");tdcIFrameData.removeModel(k);tdcRecycle.takeSnapshot(k.get("tag")+" : element recycled");return}tdcRecycle.takeSnapshot(k.get("tag")+" : element moved");p=k.get("parentModel");g=tdcIFrameData._getDestinationModel(a.$refEl,[".tdc-inner-column",".tdc-column"]);b.isUndefined(g)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",
!0,!1);p.cid===g.cid?(m=p.get("childCollection"),m.remove(k,{silent:!0}),m.add(k,{at:h})):(m=tdcIFrameData._getDestinationCol(a.$refEl),g.has("childCollection")||g.set("childCollection",new tdcIFrameData.TdcCollection),n=g.get("childCollection"),tdcIFrameData.removeModel(k,!1,{silent:!0}),n.add(k,{at:h}),k.set("parentModel",g),a.sourceColParam!==m&&k.getShortcodeRender(m,a.draggedBlockUid,!0));tdcRecycle.takeSnapshot(k.get("tag")+" : element moved")}else if(a.wasInnerRowDragged){tdcDebug.log("case 2");
if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){tdcDebug.log("inner row recycled");tdcIFrameData.removeModel(k);tdcRecycle.takeSnapshot("Inner row recycled");return}tdcRecycle.takeSnapshot("Inner row moved");p=k.get("parentModel");g=tdcIFrameData._getDestinationModel(a.$refEl,[".tdc-column"]);b.isUndefined(g)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1);if(p.cid===g.cid)m=p.get("childCollection"),m.remove(k,{silent:!0}),m.add(k,
{at:h});else{g.has("childCollection")||g.set("childCollection",new tdcIFrameData.TdcCollection);n=g.get("childCollection");tdcIFrameData.removeModel(k,!0,{silent:!0});n.add(k,{at:h});k.set("parentModel",g);p=p.get("attrs");r=g.get("attrs");if(b.has(p,"width"))switch(p.width){case "1/3":m="13";break;case "2/3":m="23"}if(b.has(r,"width"))switch(r.width){case "1/3":l="13";break;case "2/3":l="23"}b.isUndefined(m)&&(m="11");b.isUndefined(l)&&(l="11");if(m!==l&&(p=k.get("childCollection"),!b.isUndefined(p))){p=
tdcIFrameData.getChildCollectionWidths(p);b.isUndefined(p)&&(p="11");r="11";u=1;switch(l){case "11":switch(p){case "11":r="11";break;case "23_13":r="23_13";break;case "13_23":r="13_23";break;case "12_12":r="13_13_13";break;case "13_13_13":r="13_13_13"}u=3;break;case "13":switch(p){case "11":r="11";break;case "23_13":r="11";break;case "13_23":r="11";break;case "12_12":r="11";break;case "13_13_13":r="11"}break;case "23":switch(p){case "11":r="12_12";break;case "23_13":r="12_12";break;case "13_23":r=
"12_12";break;case "12_12":r="12_12";break;case "13_13_13":r="12_12"}u=2}if(p!==r||m!==l)tdcIFrameData.changeInnerRowModel(k,p,r),k.getShortcodeRender(u,null,!0)}m=tdcOperationUI.inZone(c);l=tdcOperationUI.inRow(c);p=tdcOperationUI.inColumn(c);r=tdcOperationUI.inInnerRow(c);b.isUndefined(m)||b.isUndefined(l)||b.isUndefined(p)||b.isUndefined(r)||tdcSidebar.setSettings({$currentZone:m,$currentRow:l,$currentColumn:p,$currentInnerRow:r},!0)}tdcRecycle.takeSnapshot(k.get("tag")+" : inner row moved")}else if(a.wasInnerColumnDragged||
a.wasColumnDragged)tdcDebug.log("case 3"),p=k.get("parentModel"),m=p.get("childCollection"),m.remove(k,{silent:!0}),m.add(k,{at:h}),a.wasColumnDragged?(m=tdcOperationUI.inZone(c),l=tdcOperationUI.inRow(c),b.isUndefined(l)||b.isUndefined(m)||tdcSidebar.setSettings({$currentZone:m,$currentRow:l}),tdcRecycle.takeSnapshot("Column moved")):a.wasInnerColumnDragged&&(m=tdcOperationUI.inZone(c),l=tdcOperationUI.inRow(c),p=tdcOperationUI.inColumn(c),r=tdcOperationUI.inInnerRow(c),b.isUndefined(m)||b.isUndefined(l)||
b.isUndefined(p)||b.isUndefined(r)||tdcSidebar.setSettings({$currentZone:m,$currentRow:l,$currentColumn:p,$currentInnerRow:r}),tdcRecycle.takeSnapshot("Inner-column moved"));else if(a.wasRowDragged){tdcDebug.log("case 4");p=k.get("parentModel");l=p.get("blockUid");m=p.get("childCollection");if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){m.remove(k);tdcDebug.log("row recycled");tdcRecycle.takeSnapshot("Row recycled");m.length||(q=new tdcIFrameData.TdcModel({content:"",attrs:{},
tag:"vc_row",type:"closed",level:1,parentModel:p}),new tdcIFrameData.TdcLiveView({model:q,el:tdcIFrameData.iframeContents.find("#"+l+" .tdc_zone")[0]}),k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:2,parentModel:q}),m.add(q,{at:0}),l=new tdcIFrameData.TdcCollection,l.add(k),q.set("childCollection",l),k.set("childCollection",new tdcIFrameData.TdcCollection),q.getShortcodeRender(1,a.draggedBlockUid,!0));return}h=c.prevAll(".tdc-row").length;r=c.closest(".tdc-zone").data("model_id");
n=m;p.cid!==r&&(g=tdcIFrameData.getModel(r),n=g.get("childCollection"));m.remove(k,{silent:!0});n.add(k,{at:h});g.set("childCollection",n);k.set("parentModel",g);tdcSidebar.setSettings({$currentZone:tdcOperationUI.inZone(c)});m.length||(q=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row",type:"closed",level:1,parentModel:p}),new tdcIFrameData.TdcLiveView({model:q,el:tdcIFrameData.iframeContents.find("#"+l+" .tdc_zone")[0]}),k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",
type:"closed",level:2,parentModel:q}),m.add(q,{at:0}),l=new tdcIFrameData.TdcCollection,l.add(k),q.set("childCollection",l),k.set("childCollection",new tdcIFrameData.TdcCollection),setTimeout(function(){q.getShortcodeRender(1,d,!0)},200));p.set("childCollection",m);tdcRecycle.takeSnapshot("Row moved");tdcDebug.log("newPosition: "+h);tdcDebug.log(c)}}tdcDebug.log(tdcIFrameData.tdcTopCollection)}},_parseModelWidthAttrs:function(a){a=a.get("attrs");var c=3;if(b.has(a,"width"))switch(a.width){case "1/3":c=
1;break;case "2/3":c=2;break;case "1/2":c=1}return c},getColumnNumber:function(a){var c=3,d=parseInt(a.get("level"),10),g=a.get("parentModel");b.isUndefined(g)||(4===d?(a=tdcIFrameData._parseModelWidthAttrs(g),c=3===a?tdcIFrameData.getColumnNumber(g):a):(a=tdcIFrameData._parseModelWidthAttrs(a),c=3===a?tdcIFrameData.getColumnNumber(g):a));return c},_getDestinationModel:function(a,c){for(var d,e=0;e<c.length&&(d=a.closest(c[e]),!d.length);e++);d.length||new tdcNotice.notice("_getDestinationModel Error: Container destination not available!",
!0,!1);a=d.data("model_id");b.isUndefined(a)&&new tdcNotice.notice("_getDestinationModel Error: Model id of the container destination not in data!",!0,!1);a=tdcIFrameData.getModel(a);b.isUndefined(a)&&new tdcNotice.notice("_getDestinationModel Error: Model not in structure data!",!0,!1);return a},_getDestinationCol:function(a){var c=a.closest(".tdc-column");a=a.closest(".tdc-inner-column");if(a.length&&(a=a.data("model_id"),b.isUndefined(a)&&new tdcNotice.notice("_getDestinationCol Error: The inner column model id not in data!",
!0,!1),a=tdcIFrameData.getModel(a),b.isUndefined(a)&&new tdcNotice.notice("_getDestinationCol Error: The inner column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a),3!==a))return a;if(c.length)return c=c.data("model_id"),b.isUndefined(c)&&new tdcNotice.notice("_getDestinationCol Error: The column model id not in data!",!0,!1),a=tdcIFrameData.getModel(c),b.isUndefined(c)&&new tdcNotice.notice("_getDestinationCol Error: Tne column model not in structure data!",!0,!1),
a=tdcIFrameData._parseModelWidthAttrs(a);new tdcNotice.notice("_getDestinationCol Error: The destination container is not inside of .tdc-column !",!0,!1)},_getSourceCol:function(a){var c=a.closest(".tdc-column");a=a.closest(".tdc-inner-column");if(a.length&&(a=a.data("model_id"),b.isUndefined(a)&&new tdcNotice.notice("_getSourceCol Error: The inner column model id not in data!",!0,!1),a=tdcIFrameData.getModel(a),b.isUndefined(a)&&new tdcNotice.notice("_getSourceCol Error: The inner column model not in structure data!",
!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a),3!==a))return a;if(c.length)return c=c.data("model_id"),b.isUndefined(c)&&new tdcNotice.notice("_getSourceCol Error: The column model id not in data!",!0,!1),a=tdcIFrameData.getModel(c),b.isUndefined(c)&&new tdcNotice.notice("_getSourceCol Error: Tne column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a)},getShortcodeFromData:function(a){a.getShortcode="";var b=tdcIFrameData.getFirstModelByZoneType("tdc_content");tdcIFrameData._checkModelData(b,
a)},getHeaderShortcodeFromData:function(){var a={};"Newspaper"===window.tdcAdminSettings.themeName&&["tdc_header_desktop","tdc_header_desktop_sticky","tdc_header_mobile","tdc_header_mobile_sticky"].forEach(function(c){var e={error:d,getShortcode:""},g=tdcIFrameData.getFirstModelByZoneType(c);tdcIFrameData._checkModelData(g,e);b.isUndefined(e.error)?b.isUndefined(e.getShortcode)?delete a[c]:a[c]=e.getShortcode:new tdcNotice.notice(e.errors,!0,!1)});if(!b.isEmpty(a))return a.tdc_is_header_sticky=tdcState.isHeaderSticky(),
a.tdc_is_mobile_header_sticky=tdcState.isMobileHeaderSticky(),a},getFooterShortcodeFromData:function(){var a={};if("Newspaper"===window.tdcAdminSettings.themeName){var c={error:d,getShortcode:""},h=tdcIFrameData.getFirstModelByZoneType("tdc_footer");tdcIFrameData._checkModelData(h,c);if(!b.isUndefined(c.error)){new tdcNotice.notice(c.errors,!0,!1);return}b.isUndefined(c.getShortcode)||(a=c.getShortcode)}if(!b.isEmpty(a))return a},bindViewsModelsWrappers:function(a,c,d,g){if(b.isEmpty(a)&&(b.isUndefined(g)&&
(g=0),!b.isUndefined(c))){var e=[];switch(g){case 0:var h=[];d.find(".tdc-zone").each(function(){var a=f(this);a.parents(".menu-item").length||h.push(a)});if(c.models.length!==h.length){a[b.keys(a).length]={collection:c,jqDOMElements:h,info:"Error at zones: "+c.models.length+"(models) : "+h.length+"(dom)"};return}g++;b.each(h,function(b,c,d){c=f(b);d=c.data("type");d=tdcIFrameData.getFirstModelByZoneType(d);c.data("model_id",d.cid);d.set("blockUid",c.attr("id"));d.set("html",b.innerHTML);new tdcIFrameData.TdcLiveView({model:d,
el:b});d.has("childCollection")&&tdcIFrameData.bindViewsModelsWrappers(a,d.get("childCollection"),c,g)});g--;return;case 1:d.find(".tdc-row").each(function(){var a=f(this);a.parents(".menu-item").length||e.push(a)});if(c.models.length!==e.length){a[b.keys(a).length]={collection:c,jqDOMElements:e,info:"Error at rows: "+c.models.length+"(models) : "+e.length+"(dom)"};return}break;case 2:d.find(".tdc-columns:first").children(".tdc-column").each(function(){var a=f(this);a.parents(".menu-item").length||
e.push(a)});if(c.models.length!==e.length){a[b.keys(a).length]={collection:c,jqDOMElements:e,info:"Errors at columns: "+c.models.length+"(models) : "+e.length+"(dom)",level:g};return}break;case 3:d.find(".tdc-elements:first").children(".tdc-element, .tdc-element-inner-row").each(function(){var a=f(this);a.parents(".menu-item").length||e.push(a)});if(c.models.length!==e.length){a[b.keys(a).length]={collection:c,jqDOMElements:e,info:"Errors at columns elements: "+c.models.length+"(models) : "+e.length+
"(dom)",level:g};return}break;case 4:d.find(".tdc-inner-columns:first").children(".tdc-inner-column").each(function(){var a=f(this);a.parents(".menu-item").length||e.push(a)});if(c.models.length!==e.length){a[b.keys(a).length]={collection:c,jqDOMElements:e,info:"Errors at inner columns: "+c.models.length+"(models) : "+e.length+"(dom)",level:g};return}break;case 5:if(d.find(".tdc-elements:first").children(".tdc-element").each(function(){var a=f(this);a.parents(".menu-item").length||e.push(a)}),c.models.length!==
e.length){a[b.keys(a).length]={collection:c,jqDOMElements:e,info:"Errors at elements: "+c.models.length+"(models) : "+e.length+"(dom)",level:g};return}}g++;b.each(e,function(d,e,h){e=c.models[e];h=f(d);h.data("model_id",e.cid);e.set("html",d.innerHTML,{silent:!0});if(5===e.get("level")){var m=h.data("td-block-uid");if(b.isUndefined(m)){var k=h.find(".td_block_inner, .tdb-block-inner, .td-post-sharing");k.length&&(m=k.attr("id"))}}else 3===e.get("level")?(k=h.find(".tdc-inner-row"),k.length&&(m=k.attr("id"))):
1===e.get("level")&&(m=h.attr("id"));e.set("blockUid",m);new tdcIFrameData.TdcLiveView({model:e,el:d});!h.hasClass("tdc-element")&&e.has("childCollection")&&0<b.size(e.get("childCollection"))&&tdcIFrameData.bindViewsModelsWrappers(a,e.get("childCollection"),h,g)});g--}},changeRowModel:function(a,c,d){var e=a.get("childCollection");if("11"===c&&("23_13"===d||"13_23"===d||"13_13_13"===d)){d=d.split("_");var h=d[0].charAt(0)+"/"+d[0].charAt(1),n=e.at(0),k=n.get("attrs");b.isUndefined(k)?n.set("attrs",
{width:h}):(k=b.clone(k),k.width=h,n.set("attrs",k));e.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:d[1].charAt(0)+"/"+d[1].charAt(1)},type:"closed",level:1,parentModel:a}));3===d.length&&e.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:d[2].charAt(0)+"/"+d[2].charAt(1)},type:"closed",level:1,parentModel:a}));tdcIFrameData.changeColumnModel(n,c,d[0])}else if(("23_13"===c||"13_23"===c||"13_13_13"===c)&&"11"===d){c=c.split("_");n=e.at(0);k=n.get("attrs");
var f=n.get("childCollection"),p=e.at(1),q=p.get("childCollection");b.isUndefined(k)||(k=b.clone(k),delete k.width,n.set("attrs",k));b.isUndefined(f)&&(f=new tdcIFrameData.TdcCollection,n.set("childCollection",f));!b.isUndefined(q)&&q.length&&b.each(q.models,function(a,b,c){a.set("parentModel",n);f.add(a)});3===c.length&&(a=e.at(2),e=a.get("childCollection"),!b.isUndefined(e)&&e.length&&b.each(e.models,function(a,b,c){a.set("parentModel",n);f.add(a)}),tdcIFrameData.removeModel(a));tdcIFrameData.removeModel(p);
tdcIFrameData.changeColumnModel(n,c[0],d)}else if(!("23_13"!==c&&"13_23"!==c&&"13_13_13"!==c||"23_13"!==d&&"13_23"!==d&&"13_13_13"!==d)){c=c.split("_");d=d.split("_");h=d[0].charAt(0)+"/"+d[0].charAt(1);var r=d[1].charAt(0)+"/"+d[1].charAt(1);n=e.at(0);k=n.get("attrs");p=e.at(1);var u=p.get("attrs");q=p.get("childCollection");3===d.length?e.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:d[2].charAt(0)+"/"+d[2].charAt(1)},type:"closed",level:1,parentModel:a})):3===c.length&&
(a=e.at(2),e=a.get("childCollection"),!b.isUndefined(e)&&e.length&&(b.isUndefined(q)&&(q=new tdcIFrameData.TdcCollection,p.set("childCollection",q)),b.each(e.models,function(a,b,c){a.set("parentModel",p);q.add(a)})),tdcIFrameData.removeModel(a));k=b.clone(k);k.width=h;n.set("attrs",k);c[0]!==d[0]&&tdcIFrameData.changeColumnModel(n,c[0],d[0]);h=b.clone(u);h.width=r;p.set("attrs",h);c[1]!==d[1]&&tdcIFrameData.changeColumnModel(p,c[1],d[1])}tdcDebug.log(tdcIFrameData.tdcTopCollection.models)},changeFluidStructureModel:function(a,
c,d){var e=a.get("childCollection"),h=a.get("tag"),n="vc_column";c=c.split("_");var k=d.split("_");if("vc_row"===h||"vc_row_inner"===h){"vc_row_inner"===h&&(n="vc_column_inner");if(k.length>c.length)for(h=0;h<k.length;h++){d="";for(var f=0;f<k[h].length;f++)d+=k[h].charAt(f)+"/";""!==d&&(d=d.substring(0,d.length-1));if(h<c.length){var p=e.at(h);f=p.get("attrs");var q=b.clone(f);q.width=d;p.set("attrs",q)}else e.add(new tdcIFrameData.TdcModel({content:"",tag:n,attrs:{width:d},type:"closed",level:1,
parentModel:a}))}else for(h=0;h<c.length;h++)if(h<k.length){p=e.at(h);f=p.get("attrs");q=b.clone(f);d="";for(f=0;f<k[h].length;f++)d+=k[h].charAt(f)+"/";""!==d&&(d=d.substring(0,d.length-1));q.width=d;p.set("attrs",q);var r=p}else{p=e.at(k.length);a=p.get("childCollection");var u=r.get("childCollection");b.isUndefined(u)&&(u=new tdcIFrameData.TdcCollection,r.set("childCollection",u));b.isUndefined(a)||b.each(a.models,function(a,b,c){a.set("parentModel",r);u.add(a)});tdcIFrameData.removeModel(p)}tdcDebug.log(tdcIFrameData.tdcTopCollection.models)}},
changeColumnModel:function(a,c,d){if(!(b.isUndefined(a)||b.isUndefined(c)||b.isUndefined(d))){var e=a.get("childCollection");if(!b.isUndefined(e)&&e.length){var h=a.get("attrs");!b.isUndefined(h)&&b.has(h,"width");b.each(e.models,function(e,h,g){if("vc_row_inner"===e.get("tag")&&(e=e.get("childCollection"),!b.isUndefined(e)&&e.length)){var m="";b.each(e.models,function(a,c,d){a=a.get("attrs");!b.isUndefined(a)&&b.isObject(a)&&b.has(a,"width")&&(m=c===d.length-1?m+a.width:m+(a.width+"_"))});m=m.replace(/\//g,
"");"12_12"!==m&&"23_13"!==m&&"13_23"!==m&&"13_13_13"!==m&&(m="");if("11"===c)if("23"===d)if("23_13"===m){var k=e.at(0),f=e.at(1);g=k.get("attrs");h=f.get("attrs");g=b.clone(g);h=b.clone(h);g.width="1/2";h.width="1/2";k.set("attrs",g);f.set("attrs",h)}else if("13_23"===m)k=e.at(0),f=e.at(1),g=k.get("attrs"),h=f.get("attrs"),g=b.clone(g),h=b.clone(h),g.width="1/2",h.width="1/2",k.set("attrs",g),f.set("attrs",h);else if("13_13_13"===m){k=e.at(0);f=e.at(1);e=e.at(2);g=k.get("attrs");h=f.get("attrs");
var n=e.get("attrs");g=b.clone(g);h=b.clone(h);b.clone(n);g.width="1/2";h.width="1/2";k.set("attrs",g);f.set("attrs",h);h=e.get("childCollection");if(!b.isUndefined(h)&&h.length){var l=f.get("childCollection");b.isUndefined(l)&&(l=new tdcIFrameData.TdcCollection,f.set("childCollection",l));b.each(h.models,function(a,b,c){l.add(a);a.set("parentModel",f)})}tdcIFrameData.removeModel(e)}else{if(e.models.length){k=e.at(0);g=k.get("attrs");g=b.clone(g);var t=k.get("childCollection");delete g.width;k.set("attrs",
g);b.isUndefined(t)&&(t=new tdcIFrameData.TdcCollection,k.set("childCollection",t));var v=0;for(b.each(e.models,function(a,c,d){0!==c&&(v=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,b,c){a.set("parentModel",k);t.add(a)}))});0<v;)tdcIFrameData.removeModel(e.at(v)),v--}}else{if("13"===d&&e.models.length)for(k=e.at(0),g=k.get("attrs"),g=b.clone(g),t=k.get("childCollection"),delete g.width,k.set("attrs",g),b.isUndefined(t)&&(t=new tdcIFrameData.TdcCollection,k.set("childCollection",
t)),v=0,b.each(e.models,function(a,c,d){0!==c&&(v=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,b,c){a.set("parentModel",k);t.add(a)}))});0<v;)tdcIFrameData.removeModel(e.at(v)),v--}else if("23"===c)if("11"===d)if("12_12"===m)k=e.at(0),f=e.at(1),g=k.get("attrs"),h=f.get("attrs"),g=b.clone(g),h=b.clone(h),g.width="1/3",h.width="1/3",k.set("attrs",g),f.set("attrs",h),h=new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:"1/3"},type:"closed",level:3,
parentModel:a}),e.add(h);else{if(e.models.length)for(k=e.at(0),g=k.get("attrs"),g=b.clone(g),t=k.get("childCollection"),delete g.width,k.set("attrs",g),b.isUndefined(t)&&(t=new tdcIFrameData.TdcCollection,k.set("childCollection",t)),v=0,b.each(e.models,function(a,c,d){0!==c&&(v=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a){a.set("parentModel",k);t.add(a)}))});0<v;)tdcIFrameData.removeModel(e.at(v)),v--}else{if("13"===d&&e.models.length)for(k=e.at(0),g=k.get("attrs"),g=
b.clone(g),t=k.get("childCollection"),delete g.width,k.set("attrs",g),b.isUndefined(t)&&(t=new tdcIFrameData.TdcCollection,k.set("childCollection",t)),v=0,b.each(e.models,function(a,c,d){0!==c&&(v=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,b,c){a.set("parentModel",k);t.add(a)}))});0<v;)tdcIFrameData.removeModel(e.at(v)),v--}else if("13"===c)if("11"===d)if(""===m||"12_12"!==m&&"23_13"!==m&&"13_23"!==m&&"13_13_13"!==m){if(e.models.length)for(k=e.at(0),g=k.get("attrs"),
g=b.clone(g),t=k.get("childCollection"),delete g.width,k.set("attrs",g),b.isUndefined(t)&&(t=new tdcIFrameData.TdcCollection,k.set("childCollection",t)),v=0,b.each(e.models,function(a,c,d){0!==c&&(v=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,b,c){a.set("parentModel",k);t.add(a)}))});0<v;)tdcIFrameData.removeModel(e.at(v)),v--}else"12_12"===m&&e.models.length&&(k=e.at(0),f=e.at(1),g=k.get("attrs"),h=f.get("attrs"),g.width="1/3",h.width="1/3",k.set("attrs",g),f.set("attrs",
h),e.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:"1/3"},type:"closed",level:1,parentModel:a})));else if("23"===d&&(""===m||"12_12"!==m)&&e.models.length)for(k=e.at(0),g=k.get("attrs"),g=b.clone(g),t=k.get("childCollection"),delete g.width,k.set("attrs",g),b.isUndefined(t)&&(t=new tdcIFrameData.TdcCollection,k.set("childCollection",t)),v=0,b.each(e.models,function(a,c,d){0!==c&&(v=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,b,c){a.set("parentModel",
k);t.add(a)}))});0<v;)tdcIFrameData.removeModel(e.at(v)),v--}})}}},changeInnerRowModel:function(a,c,d){if(!(b.isUndefined(a)||b.isUndefined(c)||b.isUndefined(d))){var e=a.get("childCollection");if("11"!==c||"12_12"!==d&&"23_13"!==d&&"13_23"!==d&&"13_13_13"!==d)if("12_12"!==c&&"23_13"!==c&&"13_23"!==c||"11"!==d&&"12_12"!==d&&"23_13"!==d&&"13_23"!==d&&"13_13_13"!==d)"13_13_13"!==c||"11"!==d&&"12_12"!==d&&"23_13"!==d&&"13_23"!==d?tdcIFrameData.changeFluidStructureModel(a,c,d):("11"===d?(q=e.at(0),r=
q.get("attrs"),h=q.get("childCollection"),k=e.at(1),f=k.get("childCollection"),a=e.at(2),e=a.get("childCollection"),b.isUndefined(r)||(r=b.clone(r),delete r.width,q.set("attrs",r)),b.isUndefined(h)&&(h=new tdcIFrameData.TdcCollection,q.set("childCollection",h)),!b.isUndefined(f)&&f.length&&b.each(f.models,function(a,b,c){a.set("parentModel",q);h.add(a)}),!b.isUndefined(e)&&e.length&&b.each(e.models,function(a,b,c){a.set("parentModel",q);h.add(a)}),tdcIFrameData.removeModel(k)):(l=d.split("_"),p=l[0].charAt(0)+
"/"+l[0].charAt(1),c=l[1].charAt(0)+"/"+l[1].charAt(1),q=e.at(0),r=q.get("attrs"),k=e.at(1),d=k.get("attrs"),f=k.get("childCollection"),a=e.at(2),e=a.get("childCollection"),r=b.clone(r),r.width=p,q.set("attrs",r),d=b.clone(d),d.width=c,k.set("attrs",d),b.isUndefined(f)&&(f=new tdcIFrameData.TdcCollection,k.set("childCollection",f)),!b.isUndefined(e)&&e.length&&b.each(e.models,function(a,b,c){a.set("parentModel",k);f.add(a)})),tdcIFrameData.removeModel(a));else if("11"===d){q=e.at(0);r=q.get("attrs");
var h=q.get("childCollection");k=e.at(1);var f=k.get("childCollection");b.isUndefined(r)||(r=b.clone(r),delete r.width,q.set("attrs",r));b.isUndefined(h)&&(h=new tdcIFrameData.TdcCollection,q.set("childCollection",h));!b.isUndefined(f)&&f.length&&b.each(f.models,function(a,b,c){a.set("parentModel",q);h.add(a)});tdcIFrameData.removeModel(k)}else l=d.split("_"),p=l[0].charAt(0)+"/"+l[0].charAt(1),c=l[1].charAt(0)+"/"+l[1].charAt(1),q=e.at(0),r=q.get("attrs"),k=e.at(1),d=k.get("attrs"),r=b.clone(r),
r.width=p,q.set("attrs",r),d=b.clone(d),d.width=c,k.set("attrs",d),3===l.length&&e.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:l[2].charAt(0)+"/"+l[2].charAt(1)},type:"closed",level:3,parentModel:a}));else{var k=new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",type:"closed",level:3,parentModel:a}),l=d.split("_"),p=l[0].charAt(0)+"/"+l[0].charAt(1);c=l[1].charAt(0)+"/"+l[1].charAt(1);var q=e.at(0),r=q.get("attrs");b.isUndefined(r)?q.set("attrs",{width:p}):
(r=b.clone(r),r.width=p,q.set("attrs",r));k.set("attrs",{width:c});e.add(k);3===l.length&&e.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:l[2].charAt(0)+"/"+l[2].charAt(1)},type:"closed",level:3,parentModel:a}))}}},getChildCollectionWidths:function(a){if(!b.isUndefined(a)){var c;b.map(a.models,function(a,d){a=a.get("attrs");b.has(a,"width")&&(c=b.isUndefined(c)?a.width.replace("/",""):c+("_"+a.width.replace("/","")))});return c}}}})(jQuery,Backbone,_);var tdcAdminIFrameUI;
(function(f,c,b,d){tdcAdminIFrameUI={_liveIframeWindowObject:d,_$liveIframe:d,getIframeWindow:function(){b.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject)&&new tdcNotice.notice("tdcAdminIFrameUI._liveIframeWindowObject is undefined. AKA: The iFrame window object is undefined. The iFrame was probably not added to the page!",!0,!1);return tdcAdminIFrameUI._liveIframeWindowObject},getLiveIframe:function(){return tdcAdminIFrameUI._$liveIframe},evalInIframe:function(a){tdcAdminIFrameUI.getIframeWindow().eval(a)},
initContent:function(a){if(!a.find(".td-main-content-wrap .tdc-row").length){var b="",c="";if("header"===window.tdcPostSettings.tdbTemplateType||"footer"===window.tdcPostSettings.tdbTemplateType)b=350,"header"===window.tdcPostSettings.tdbTemplateType?(b=1500,c="tdc-header-custom-class"):(a.find(".tdc-header-wrap, .td-header-template-wrap").hide(),c="tdc-footer-custom-class"),b=' style="height: '+b+"px; background-color: #f9f9f9; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQBAMAAABykSv/AAAAFVBMVEUAAAAtKiYtKiYtKiYtKiYtKiYtKiazrNZrAAAAB3RSTlMAGwQIEQwV0M30jwAABqdJREFUeNrsncuS0zAQRYON2fMIa/PIrA0FrEPisHZ4rSHk/7+BKFMVGUl2R5LHlsM5C9VM102oPKqYvu6+XrzeLE58U8eqPB1FdTqyr+r3H+p4ey42qthSLrRSF13Kj1rZuP4hrfxwUeYuZd6rVNI/6vmO6sef6lF3a6VSxUWtjk/qAU8uRUt5UMXaLBrK5kGVx1JVf79Qhafq56e/Tsf+2el49FIX15dikHItKuOLzfmzb73Plfoq6Te/NoqG8i5cWQ77nOUCAAAmo1LHa3Xk6shKdZaOYqaVb+KUWb8yM55TViq+vFD6p6rye3063qn/MZ+0io1VlJVLD2Vgcd8qnl/j56leyL5bufRUVvqr9f7ykeXG55jrYkuZXhEAAKbhzebSV34495XN6ci36vf7Ynk6Hq9V8azcXYpKaRc7lYUufr9XGkWttB4uKJ3mw7tLU59L5oOolIuvApSZbD7opn5eRcwHAIDpsD2BeRbb5sNnj55dMApkpVxcCMoxzIcXXuZDYb1kSWkUq4Xu3+fkM2A+AAAkxJtzt7izzQfbUji4lLYnoJS6WPW7BwenpeBb7DEfpMmH8NGFeJsC8wEAAAzGm3x4WKXu+wSl2SG2zYfltebDY5dSthSSMR+GLVrugay0zQf7T5SU3APMBwCAWbIyzYf1xXyoDfPBZVMUW8c8Qy5YCkMXPdYunie8dvG4bT7U2rpRqmLrKprKplN58FTa77OtdH/KrF0AAAQxb/Mh6zQfMj/zYRFmPoQtUwjK+GLhYT6MtnahlYU4+aCV1UKRinuA+QAAMEtW5pBD02k+uNt/P+XOU/k/mQ968sERsHB9cauLZYDy8K/yzleJ+QAAMCVG59XjHkQpcz9l5q28rmefPPNhL60wVGmFV6y7Rjj28giHQv4aqGJQOkR8jkSO+QAAkDgr3VcKkw/FVrh6rpUb59VzP+XOqUw182GMtQvbPUhVydoFAMCE2GMGk+9iZIIyaynJfHiIzIc8JvNBmw9kPgAAQDDx19n/XHOdvelUHnTRXOUQrrN7mA9JZT7E3+1Cd/rDKctOZWO++cL9R5h8AACYEt0hSkZBlDIXlGbf56+U1y7kMYDZmA8hxSWZD5gPAAAzo2U+fLhmdH/XnUVQutIAetIh/AInDze/diFlPtgDKsNlPpShmQ81mQ8AAKkRYim88VAGxEjGBU7KlgKZD8OlQ5D5AAAAAjHmg327Cvcuhqk0mmI5cNLd6srpEGQ+TJT5ICt18Q7zAQAgCfryGeY0MJ9Qz95cua0gZz58TivzwVbGZz5k5eDpELKSzAcAgDmgW11xnkFUDnqdfedSHnX/O9e1i1eh5kN8PkP9sJkPDZkPAABJMNDahRzrJyhjipPmNO4DchoLp3KGgZPdL0R/N4b/arlDQph8AAC4LYRWd6yi3OoeOlvd+mbNB2cE6PdqaDto+AhQzAcAgImIW6bwU2YDKyMCJ0dY0Ai6SUS6axfeIxzxQzWyUvC1mHwAAJg5cuZDTKtrK8l8EM2HrZWYEb8Is7l6EWbjuQiD+QAAkBr/zdpFk15UQsfaxY2EV4wRJ5INECeS9SkBAGASdKtbz7/VvR3zYSQ7KD4CFPMBACBFxr7oPIfMh3Xk2kVs5sON3LYjbKMnvfEbAACYBDnzoUop8+FeSebDkEXplqbmw/uVWwInAQCmxe77pKw/v3X7/PYnH4bLfBg7cHIpKSP2R7oHEszimMrsKiXmAwBAEty3useQeMNUlMfbMh9WQuaDEQEaY/KQ+QAA8Le9M1ZBGIai6BD7A6K7i3tB3aWCc8Ff8P+/QQoSJYm9jZH6Gs4ZOjwudOnSm9z7aqRg0YBQFsbtM5RVLYmw0/mQMRSdDyJMESqdUKpPK1PJzQcAAJMUn7OXLHaMLQWx2PGeXOyYEbtY249d7C9q+amKt+QHYY50PgAA1IOV0gZDsYvZOh/Ofrh5i11MfulqiZ0Pop9BKAs7H9JKOh8AAEyiYhfHdvI5e5s+Z89XdpnKSjofVv7mg//TH4+3uFDZT2ly+Kzs6XwAAKgAM+6BIfMhbxhbClrZ+GF8rHDdWu182JnqfHB0PgAA1M0pefdgWUMRu2iWGLsILAWXNB+EpaDMhw7zAQCgQp7/70tabDFj58PmJ4WT83Y+bG0VTtL5AAAAmA/FnQ/OhPngfYbIfIjDFLFS9zNopTYfiF0AANhlWjR+hoBGaeeD2cLJEWXdnQ/98DwMj/3wcO0wbMOhV95ew9248vCFsgk+mOjtaSUAAPyLB4YdjhTNmj87AAAAAElFTkSuQmCC')\" ";
a.find(".tdc-content-wrap").prepend('<div id="td_uid_start_zone_content_wrap" class="tdc-zone '+c+'" '+b+'><div class="tdc_zone"><div class="tdc-row"><div class="vc_row wpb_row td-pb-row"><div class="tdc-column"><div class="td-pb-span12 wpb_column vc_column_container"><div class="wpb_wrapper"></div></div></div></div></div></div></div>')}},init:function(){window.addWrappers=function(a,b,c){a=a.find(b);a.find(".tdc-zone").length||a.find(".tdc-row").wrapAll('<div class="tdc-zone" data-type="tdc_content"></div>');
a.find(".tdc-zone").data("type",c);a.find(".tdc-row").each(function(a,b){f(b).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});a.find(".tdc-column").each(function(a,b){a=f(b);a.find(".tdc-inner-row").each(function(){var a=f(this),b=a.attr("id");a.wrap('<div class="tdc-element-inner-row" data-tdc-inner-row-uid="'+b+'"></div>')});a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.each(function(a,b){a=f(b);a.closest(".tdb_single_content").length&&!a.hasClass("tdb_single_content")?
console.log(a):a.addClass("tdc-element")})});a.find(".tdc-inner-row").each(function(a,b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,b){a=f(b).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=f(b).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,b){a=f(b);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});
a.find(".tdc-column").each(function(a,b){a=f(b).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=f(b).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,b){a="";b=f(b);b.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":b.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+
a+'"></div>');tdcElementUI.bindEmptyElement(a);b.append(a)})};window.addZoneWrappers=function(a){a.find(".tdc-row").each(function(a,b){f(b).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});a.find(".tdc-column").each(function(a,b){a=f(b);a.find(".tdc-inner-row").each(function(){var a=f(this),b=a.attr("id");a.wrap('<div class="tdc-element-inner-row" data-tdc-inner-row-uid="'+b+'"></div>')});a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.addClass("tdc-element")});a.find(".tdc-inner-row").each(function(a,
b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,b){a=f(b).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=f(b).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,b){a=f(b);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,b){a=
f(b).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=f(b).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,b){a="";b=f(b);b.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":b.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'"></div>');tdcElementUI.bindEmptyElement(a);
b.append(a)})};window.addRowWrappers=function(a){a.find(".tdc-column").wrapAll('<div class="tdc-columns"></div>');a.find(".tdc-column").each(function(a,b){a=f(b);a.find(".tdc-inner-row").each(function(){var a=f(this),b=a.attr("id");a.wrap('<div class="tdc-element-inner-row" data-tdc-inner-row-uid="'+b+'"></div>')});a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.addClass("tdc-element")});a.find(".tdc-inner-row").each(function(a,b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,
b){a=f(b).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=f(b).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,b){a=f(b);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,b){a=f(b).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(b=f(b).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,b){a="";b=f(b);b.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":b.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'"></div>');tdcElementUI.bindEmptyElement(a);b.append(a)})};window.addColumnWrappers=function(a){var b=a.find(".td_block_wrap");window.checkTdBlockWrap(b);b.addClass("tdc-element");
a.find(".tdc-inner-row").each(function(a,b){a=f(b);b=a.attr("id");a.wrap('<div class="tdc-element-inner-row" data-tdc-inner-row-uid="'+b+'"></div>');a.find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,b){a=f(b).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=f(b).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,
b){a=f(b);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});b=a.find(".tdc-element, .tdc-element-inner-row");b.length?b.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=a.find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,b){a="";b=f(b);b.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":b.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+
tdcOperationUI._emptyElementClass+a+'"></div>');tdcElementUI.bindEmptyElement(a);b.append(a)})};window.addInnerRowWrappers=function(a){var b=a.find(".td_block_wrap");window.checkTdBlockWrap(b);b.addClass("tdc-element");a.find(".tdc-inner-row").each(function(a,b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,b){a=f(b).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=f(b).find(".wpb_wrapper"),
b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-elements:empty").each(function(a,b){a="";b=f(b);b.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":b.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'"></div>');tdcElementUI.bindEmptyElement(a);b.append(a)})};window.addInnerColumnWrappers=function(a){var b=a.find(".td_block_wrap");window.checkTdBlockWrap(b);b.addClass("tdc-element");b=a.find(".tdc-element");
b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=a.find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,b){a="";b=f(b);b.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":b.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'"></div>');tdcElementUI.bindEmptyElement(a);b.append(a)})};window.addLoopWrappers=function(a){a.find(".td-main-content").wrap('<div class="tdc-loop-content"></div>')};
window.addSidebarWrappers=function(a){a.find(".td-main-sidebar").wrap('<div class="tdc-sidebar-content"></div>')};window.checkTdBlockWrap=function(a){a.each(function(a,b){a=f(b);a.hasClass("tdc-block-empty")&&a.removeClass("tdc-block-empty");0===parseInt(a.height())&&a.addClass("tdc-block-empty")})};tdcAdminIFrameUI.checkIframe(tdcAdminIFrameUI._$liveIframe)},loadIframe:function(){(tdDetect.isIe8||tdDetect.isIe9||tdDetect.isIe10)&&tdConfirm.showModalOk("Browser Information","TagDiv Composer does not work with Internet Explorer 8, 9, 10",
function(){tb_remove()});var a=f(this).contents();"header"!==window.tdcPostSettings.tdbTemplateType&&"footer"!==window.tdcPostSettings.tdbTemplateType||a.find(".tdc-content-wrap").html("");tdcAdminIFrameUI.initContent(a);tdcAdminIFrameUI._liveIframeWindowObject=f(this).get(0).contentWindow;var b=f('<div id="tdc-recycle" class="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');a.find("body").prepend(b);tdcAdminWrapperUI.$recycle=b;tdcIFrameData._postOriginalContentJSON=d;
window.addWrappers(a,".td-main-content-wrap","tdc_content");window.addWrappers(a,".td-header-desktop-wrap","tdc_header_desktop");window.addWrappers(a,".td-header-desktop-sticky-wrap","tdc_header_desktop_sticky");window.addWrappers(a,".td-header-mobile-wrap","tdc_header_mobile");window.addWrappers(a,".td-header-mobile-sticky-wrap","tdc_header_mobile_sticky");window.addWrappers(a,".td-footer-wrap","tdc_footer");tdcIFrameData.init(a,!0);tdcOperationUI.init(a,!0);a.on("click","a",function(a){a.preventDefault();
"undefined"!==this.href&&window.open(this.href,"_blank")});a[0].addEventListener("mousedown",function(a){1!==a.which&&a.stopPropagation()},!0);a[0].addEventListener("mousemove",function(b){a.lastMouseEvent=b},!0);a.on("click",function(a){tdcContextMenu.hide()});a.on("scroll",function(a){tdcContextMenu.hide()});a.bind("contextmenu",function(a){if(!a.ctrlKey){a.preventDefault();var b=a.pageX,c=a.pageY,d=0,e=f("#tdc-context-menu"),h=e.width();e=e.height();tdcMain.getSidebarInline()&&(d=tdcSidebar.$_sidebar.width());
b+h+d>tdcWindowFrame.$_window.width()&&(b=tdcWindowFrame.$_window.width()-h-d);c+e>tdcAdminIFrameUI.getIframeWindow().scrollY+tdcWindowFrame.$_window.height()&&(c=tdcAdminIFrameUI.getIframeWindow().scrollY+tdcWindowFrame.$_window.height()-e);d=tdcAdminIFrameUI.getLiveIframe();d=(d.parent().width()-d.width())/2;f(a.target).trigger(f.Event("contextmousedown",{pageX:b+d,pageY:c}))}});"module"===window.tdcPostSettings.tdbTemplateType&&(a.find("html").addClass("tdc-template-module"),b="","undefined"!==
typeof window.tdcPostSettings.tdbTemplateSettings.viewport_widths&&"undefined"!==typeof window.tdcPostSettings.tdbTemplateSettings.viewport_widths.all&&(b=window.tdcPostSettings.tdbTemplateSettings.viewport_widths.all),""!==b&&a.find("body").css("width",b),b="#fff","undefined"!==typeof window.tdcPostSettings.tdbTemplateSettings.bg_color&&(b=window.tdcPostSettings.tdbTemplateSettings.bg_color),a.find("body").css("--tdb-tpl-bg-color",b))},checkIframe:function(a){if(b.isUndefined(a)){a=window.tdcPostSettings.postUrl;
var c="";!1!==window.tdcPostSettings.tdbLoadDataFromId&&(c+="&tdbLoadDataFromId="+window.tdcPostSettings.tdbLoadDataFromId);!1!==window.tdcPostSettings.tdbTemplateType&&(c+="&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType);a=0>a.indexOf("?")?a+("?td_action=tdc_edit&post_id="+window.tdcPostSettings.postId+c):a+("&td_action=tdc_edit&post_id="+window.tdcPostSettings.postId+c);a=f('<iframe id="tdc-live-iframe" name="tdc-live-iframe" src="'+a+'" scrolling="auto" style="width: 100%; height: 100%" class="tdc-responsive-all"></iframe>').on("load",
tdcAdminIFrameUI.loadIframe);f("#tdc-live-iframe-wrapper").append(a)}else{var h=a;c=h.contents();tdcAdminIFrameUI.initContent(c);tdcAdminIFrameUI._liveIframeWindowObject=h.get(0).contentWindow;h=f('<div id="tdc-recycle" class="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');tdcDebug.log(tdcIFrameData.tdcTopCollection.models);c.find("body").prepend(h);tdcAdminWrapperUI.$recycle=h;tdcIFrameData._postOriginalContentJSON=d;window.addWrappers(c,".td-main-content-wrap","tdc_content");
window.addWrappers(c,".td-header-desktop-wrap","tdc_header_desktop");window.addWrappers(c,".td-header-desktop-sticky-wrap","tdc_header_desktop_sticky");window.addWrappers(c,".td-header-mobile-wrap","tdc_header_mobile");window.addWrappers(c,".td-header-mobile-sticky-wrap","tdc_header_mobile_sticky");window.addWrappers(c,".td-footer-wrap","tdc_footer");tdcIFrameData.init(c,!0);tdcOperationUI.init(c,!0);c.find("a").each(function(a,b){b.setAttribute("target","_blank")});a.removeClass("tdc-live-iframe");
a.removeClass("tdc-live-iframe-temp")}tdcAdminIFrameUI._$liveIframe=a}}})(jQuery,Backbone,_);var tdcMain={};
(function(){tdcMain={_contentModified:!1,_sidebarInline:!1,_sidebarHidden:!1,_recycleShown:!1,init:function(){tdcAdminIFrameUI.init()},getContentModified:function(){return tdcMain._contentModified},setContentModified:function(){tdcMain._contentModified=!0},resetContentModified:function(){tdcMain._contentModified=!1},setSidebarInline:function(){tdcMain._sidebarInline=!0},getSidebarInline:function(){return tdcMain._sidebarInline},resetSidebarInline:function(){tdcMain._sidebarInline=!1},setSidebarHidden:function(){tdcMain._sidebarHidden=
!0},getSidebarHidden:function(){return tdcMain._sidebarHidden},resetSidebarHidden:function(){tdcMain._sidebarHidden=!1},setRecycleShown:function(){tdcMain._recycleShown=(tdcOperationUI.isRowDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isElementDragged())&&!tdcOperationUI.isSidebarElementDragged()},getRecycleShown:function(){return tdcMain._recycleShown},resetRecycleShown:function(){tdcMain._recycleShown=!1}};tdcMain.init()})();var tdcSidebarPanel={};
(function(f){tdcSidebarPanel={_defaultGroupName:"General",_currentBoundModel:f,$_paramSwitchWrap:f,$_paramNameSwitch:f,$_paramInfoSwitch:f,_timerInfoHelper:f,_hook:{_hooks:[],addAction:function(c,b){_.isUndefined(tdcSidebarPanel._hook._hooks[c])&&(tdcSidebarPanel._hook._hooks[c]=[]);tdcSidebarPanel._hook._hooks[c].push(b)},doAction:function(c,b){if(!_.isUndefined(tdcSidebarPanel._hook._hooks[c]))for(var d=0;d<tdcSidebarPanel._hook._hooks[c].length;d++)tdcSidebarPanel._hook._hooks[c][d](b)},removeAction:function(c){_.isUndefined(tdcSidebarPanel._hook._hooks[c])||
delete tdcSidebarPanel._hook._hooks[c]},hasCallback:function(c,b){return _.isUndefined(tdcSidebarPanel._hook._hooks[c])?!1:0<=tdcSidebarPanel._hook._hooks[c].indexOf(b)}},init:function(){var c=jQuery("body");c.on("change focus",".tdc-tab-no-design .tdc-property-dropdown:not(.tdc-row-col-dropdown):not(.tdc-innerRow-col-dropdown) select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{var c=jQuery(this);b=c.val();var a=tdcIFrameData.getModel(c.data("model_id"));c=c.data("param_name");
if("tdb_mobile_menu"===a.get("tag")&&"menu_id"===c){var e=tdcState.getHeaderTemplateId();"no_header"!==e&&(""===e&&(e=window.tdcAdminSettings.globalHeaderTemplateId),""!==e&&(e=e.toString().replace("tdb_template_",""),tdcSavePost.saveMobileMenu(e,b)))}tdcSidebarController.onUpdate(a,c,this.oldValue,b);this.oldValue=b;"block_template_id"!==c&&0!==c.indexOf("tds_")||setTimeout(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),
$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},500)}});c.on("change focus",".tdc-tab-no-design .tdc-property-dropdown-responsive select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this);var c=b.val(),a=tdcIFrameData.getModel(b.data("model_id")),e=b.data("param_name"),h=b.attr("name"),g=b.closest(".tdc-property-responsive");c="all"===tdcSidebar.currentViewportSettings.name&&
c===b.find("option:first").val()?tdcSidebarPanel.deleteResponsiveValue(h,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateDropdownResponsiveValues(h,c,tdcSidebar.currentViewportSettings.name);g.removeClass("tdc-css-inherited");g.find(".tdc-inherit-select").hide();"all"!==tdcSidebar.currentViewportSettings.name&&(h=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),tdcSidebar.currentViewportSettings.name),g=b.closest(".tdc-property-responsive"),"undefined"===typeof h?(h=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),
"all"),"undefined"!==typeof h&&(b.val(""),g.addClass("tdc-css-inherited"),g.find(".tdc-inherit-select").show())):(b.val(h),g.removeClass("tdc-css-inherited"),g.find(".tdc-inherit-select").show()),g.find(".tdc-inherit-select").show());tdcSidebarController.onUpdate(a,e,this.oldValue,c)}});c.on("change focus",".tdc-tab-no-design .tdc-property-dropdown-responsive input[type=radio]",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this);var c=b.val(),a=tdcIFrameData.getModel(b.data("model_id")),
e=b.data("param_name"),h=b.attr("name"),g=b.closest(".tdc-property-responsive");c="all"===tdcSidebar.currentViewportSettings.name&&c===b.find("input:first").val()?tdcSidebarPanel.deleteResponsiveValue(h,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateDropdownResponsiveValues(h,c,tdcSidebar.currentViewportSettings.name);g.removeClass("tdc-css-inherited");g.find(".tdc-inherit-select").hide();"all"!==tdcSidebar.currentViewportSettings.name&&(h=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),
tdcSidebar.currentViewportSettings.name),"undefined"===typeof h?(h=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all"),"undefined"!==typeof h&&(b.prop("checked",!1),g.find("input[type=radio]:first").prop("checked",!0),g.addClass("tdc-css-inherited"),g.find(".tdc-inherit-select").show())):(g.find("input[type=radio]").prop("checked",!1),g.find('input[type=radio][value="'+h+'"]').prop("checked",!0),g.removeClass("tdc-css-inherited"),g.find(".tdc-inherit-select").show()),g.find(".tdc-inherit-select").show());
tdcSidebarController.onUpdate(a,e,this.oldValue,c)}});c.on("keyup focus paste cut",".tdc-tab-no-design .tdc-property-textfield input",function(b){if("focusin"===b.type||this.oldValue===this.value)this.oldValue=this.value;else{var c=jQuery(this).val(),a=tdcIFrameData.getModel(jQuery(this).data("model_id"));if(0<=c.indexOf("]")||0<=this.oldValue.indexOf("]"))this.oldValue="td_encval"+window.btoa(this.oldValue),c="td_encval"+window.btoa(c);"cut"===b.type&&(c="");tdcSidebarController.onUpdate(a,jQuery(this).data("param_name"),
this.oldValue,_.escape(c));this.oldValue=c}});c.on("keyup focus paste cut",".tdc-tab-no-design .tdc-property-textfield-responsive input",function(b){if("focusin"===b.type||this.oldValue===this.value)this.oldValue=this.value;else{var c=jQuery(this),a=c.val(),e=tdcIFrameData.getModel(c.data("model_id"));"cut"===b.type&&(a="");if(this.oldValue!==a){var h=c.attr("name");b=c.closest(".tdc-property-responsive");h=tdcSidebarPanel.updateTextfieldResponsiveValues(h,a,tdcSidebar.currentViewportSettings.name);
var g="";_.isUndefined(c.data("placeholder"))||(g=c.data("placeholder"));c.attr("placeholder",g);b.removeClass("tdc-css-inherited");""===a&&"all"!==tdcSidebar.currentViewportSettings.name&&(a=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),tdcSidebar.currentViewportSettings.name),"undefined"===typeof a?(a=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),"all"),"undefined"!==typeof a&&(c.val(""),c.attr("placeholder",a),b.addClass("tdc-css-inherited"),b.find(".tdc-inherit-select").show())):
(c.val(a),b.removeClass("tdc-css-inherited"),b.find(".tdc-inherit-select").show()),b.find(".tdc-inherit-select").show());a=h;tdcSidebarController.onUpdate(e,jQuery(this).data("param_name"),this.oldValue,_.escape(a));"all"===tdcSidebar.currentViewportSettings.name&&(this.oldValue=c.val())}}});c.on("keyup focus change input",".tdc-tab-no-design .tdc-property-range input",function(b){var c=jQuery(this),a=this;if("range"===c.attr("type"))c.next('input[type="text"]').val(c.val());else if("text"===c.attr("type")){a=
c.val().trim();var e=c.data("default_value");""!==a||_.isUndefined(e)||""===e||(a=e,c.val(a));c.prev('input[type="range"]').val(a);c=c.prev('input[type="range"]');a=c.get(0)}c=a;"focusin"===b.type?c.oldValue=c.value:(a=jQuery(c).val(),e=tdcIFrameData.getModel(jQuery(c).data("model_id")),"cut"===b.type&&(a=""),tdcSidebarController.onUpdate(e,jQuery(c).data("param_name"),c.oldValue,_.escape(a)),c.oldValue=a)});c.on("keyup change input",".tdc-tab-no-design .tdc-property-range-responsive input",function(b){b=
jQuery(this);var c=this,a=b.closest(".tdc-property-responsive");a.removeClass("tdc-css-inherited");if("range"===b.attr("type")){var e=b.val();b.next('input[type="text"]').val(e);b.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(b.attr("name"),e,tdcSidebar.currentViewportSettings.name))}else if("text"===b.attr("type")){e=b.val().trim();c=b.prev('input[type="range"]');var h=b.data("default_value");if("all"===tdcSidebar.currentViewportSettings.name)""!==e||_.isUndefined(h)||""===
h||(e=h,b.val(e));else if(""===e){var g=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),"all");"undefined"===typeof g?_.isUndefined(h)||""===h||(e=h,b.val(e)):(b.val(""),b.attr("placeholder",g))}c.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(c.attr("name"),e,tdcSidebar.currentViewportSettings.name));"undefined"===typeof g?c.val(e):(c.val(g),a.addClass("tdc-css-inherited"));c=b.prev('input[type="range"]').get(0)}g=c;a=jQuery(g);b=a.data("data-to-save");a=tdcIFrameData.getModel(a.data("model_id"));
g.oldValue!==b&&(tdcSidebarController.onUpdate(a,jQuery(g).data("param_name"),g.oldValue,_.escape(b)),g.oldValue=b)});c.on("keyup focus change input",".tdc-tab-no-design .tdc-property-range_multiple input",function(b){var c=jQuery(this),a=this;if("range"===c.attr("type")){var e=c.closest(".tdc-property").find('input[type="radio"]:checked');c.closest(".tdc-property").find('input[type="text"]').val(c.val());e.data("last_value",c.val())}else if("text"===c.attr("type")){a=c.closest(".tdc-property").find('input[type="range"]');
e=c.closest(".tdc-property").find('input[type="radio"]:checked');var h=e.data("default_value"),g=c.val().trim();""!==g||_.isUndefined(h)||""===h||(g=h,c.val(g));a.val(g);e.data("last_value",g);a=a.get(0)}else if("radio"===c.attr("type")){a=c.closest(".tdc-property").find('input[type="range"]');e=c.closest(".tdc-property").find('input[type="text"]');c.closest(".tdc-property").find('input[type="radio"]:checked');g=c.data("last_value");h=c.data("default_value");var m=c.data("unit");c=a.data("min_"+m);
var f=a.data("max_"+m);m=a.data("step_"+m);a.get(0).min=c;a.get(0).max=f;a.get(0).step=m;""===g?(e.val(h),a.val(h)):(e.val(g),a.val(g));a=a.get(0)}h="";e=jQuery(a).parent().find('input[type="radio"]:checked');e.length&&(h=jQuery(e[0]).data("unit_value"));"focusin"===b.type?a.oldValue=a.value+h:(b=a.value+h,h=tdcIFrameData.getModel(jQuery(a).data("model_id")),tdcSidebarController.onUpdate(h,jQuery(a).data("param_name"),a.oldValue,_.escape(b)),a.oldValue=b)});c.on("keyup change input",".tdc-tab-no-design .tdc-property-range_multiple-responsive input",
function(b){var c=jQuery(this),a=c.closest(".tdc-property-responsive"),e=a.find('input[type="range"]'),h=a.find('input[type="radio"]:checked'),g=a.find('input[type="text"]'),m=e.get(0),f="",k=h.data("default_value"),l=tdcIFrameData.getModel(e.data("model_id")),p=e.data("param_name"),q=window.tdcAdminSettings.mappedShortcodes[l.attributes.tag],r=l="";var u=[];for(var x=0;x<q.params.length;x++)if(p===q.params[x].param_name){x=q.params[x].tdc_values;for(var t in x)x.hasOwnProperty(t)&&(u.push(x[t].unit),
""===l||""===r)&&(l=x[t].value,r=x[t].unit);break}h.length&&(f=h.data("unit_value"));if("range"===c.attr("type"))u=e.val(),g.val(u),h.data("last_value",u),g.val(u),e.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(e.attr("name"),u+f,tdcSidebar.currentViewportSettings.name)),a.removeClass("tdc-css-inherited");else if("text"===c.attr("type")){if("input"===b.type||"change"===b.type)return;a.removeClass("tdc-css-inherited");u=g.val().trim();if("all"===tdcSidebar.currentViewportSettings.name)""!==
u||_.isUndefined(k)||""===k?(e.val(u),h.data("last_value",u),e.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(e.attr("name"),u+f,tdcSidebar.currentViewportSettings.name))):(e.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+p,tdcSidebar.currentViewportSettings.name)),e.data("range_value",l),e.data("range_unit",r),e.val(l),f=a.find('input[type="radio"][data-unit_value="'+r+'"]'),q=f.data("unit"),t=e.data("min_"+q),h=e.data("max_"+q),q=e.data("step_"+q),f.prop("checked",
!0),m.min=t,m.max=h,m.step=q,m.value=l,f.data("last_value",l),g.val(l));else if(""===u)if(f=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),"all"),"undefined"===typeof f)e.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+p,tdcSidebar.currentViewportSettings.name)),e.data("range_value",l),e.data("range_unit",r),e.val(l),f=a.find('input[type="radio"][data-unit_value="'+r+'"]'),q=f.data("unit"),t=e.data("min_"+q),h=e.data("max_"+q),q=e.data("step_"+q),f.prop("checked",
!0),m.min=t,m.max=h,m.step=q,m.value=l,f.data("last_value",l),g.val(l),a.addClass("tdc-css-inherited");else for(x=0;x<q.params.length;x++){if(p===q.params[x].param_name){u=[];g=[];x=q.params[x].tdc_values;for(t in x)x.hasOwnProperty(t)&&u.push(x[t].unit);for(x=0;x<u.length&&!(g=f.split(u[x]),1<g.length);x++);g.length&&(l=g[0],r=u[x],e.data("range_value",l),e.data("range_unit",r),f=a.find('input[type="radio"][data-unit_value="'+r+'"]'),q=f.data("unit"),t=e.data("min_"+q),h=e.data("max_"+q),q=e.data("step_"+
q),f.prop("checked",!0),m.min=t,m.max=h,m.step=q,m.value=l,f.data("last_value",l),a.find('input[type="text"]').val(l));e.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+p,tdcSidebar.currentViewportSettings.name));a.addClass("tdc-css-inherited");break}}else e.val(u),h.data("last_value",u),e.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(e.attr("name"),u+f,tdcSidebar.currentViewportSettings.name))}else if("radio"===c.attr("type")){if("input"===b.type)return;
p=h.data("last_value");q=h.data("unit");t=e.data("min_"+q);h=e.data("max_"+q);q=e.data("step_"+q);m.min=t;m.max=h;m.step=q;""===p?(g.val(k),e.val(k),u=k):(g.val(p),e.val(p),u=p);e.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(e.attr("name"),u+f,tdcSidebar.currentViewportSettings.name));a.removeClass("tdc-css-inherited")}f="";a=jQuery(m).parent().find('input[type="radio"]:checked');a.length&&(f=jQuery(a[0]).data("unit_value"));"focusin"===b.type?m.oldValue=m.value+f:(a=jQuery(m),
b=a.data("data-to-save"),l=tdcIFrameData.getModel(a.data("model_id")),m.oldValue!==b&&(tdcSidebarController.onUpdate(l,jQuery(m).data("param_name"),m.oldValue,_.escape(b)),m.oldValue=b))});c.on("focus change",".tdc-tab-no-design .tdc-property-checkbox input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this);var c=b.val();b.is(":checked")||(c="");var a=tdcIFrameData.getModel(b.data("model_id"));tdcSidebarController.onUpdate(a,b.data("param_name"),this.oldValue,c);this.oldValue=
c}});c.on("focus change",".tdc-tab-no-design .tdc-property-checkbox-responsive input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this);var c=b.val(),a=tdcIFrameData.getModel(b.data("model_id")),e=b.data("param_name");b.is(":checked")||(c="");var h=b.attr("name"),g=b.closest(".tdc-property-responsive");c="all"===tdcSidebar.currentViewportSettings.name&&""===c?tdcSidebarPanel.deleteResponsiveValue(h,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateCheckboxResponsiveValues(h,
c,tdcSidebar.currentViewportSettings.name);g.removeClass("tdc-css-inherited");g.find(".tdc-inherit-checkbox").hide();"all"!==tdcSidebar.currentViewportSettings.name&&(h=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),tdcSidebar.currentViewportSettings.name),g=b.closest(".tdc-property-responsive"),"undefined"===typeof h?(h=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all"),"undefined"!==typeof h&&(g.addClass("tdc-css-inherited"),g.find(".tdc-inherit-checkbox").show())):(g.removeClass("tdc-css-inherited"),
g.find(".tdc-inherit-checkbox").show()),g.find(".tdc-inherit-checkbox").show());tdcSidebarController.onUpdate(a,e,this.oldValue,c);this.oldValue=c}});c.on("click",".tdc-tab-no-design .tdc-image-wrap",tdcSidebarPanel.tdcImageWrapHandler);c.on("click",".tdc-tab-no-design .tdc-image-remove",tdcSidebarPanel.tdcImageRemoveHandler);c.on("click",".tdc-tab-no-design .tdc-icon-wrap",tdcSidebarPanel.tdcIconWrapHandler);c.on("click",".tdc-tab-no-design .tdc-icon-remove",tdcSidebarPanel.tdcIconRemoveHandler);
c.on("click",".tdc-tab-no-design .tdc-inherit-select",tdcSidebarPanel.tdcInheritSelectHandler);c.on("click",".tdc-tab-no-design .tdc-inherit-checkbox",tdcSidebarPanel.tdcInheritCheckboxHandler);c.on("click",".tdc-icon-selector-content > span",function(b){b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());b.find(".selected").removeClass("selected");var c=jQuery(this),a=c.data("font_class"),e=tdcIFrameData.getModel(b.data("model_id"));c.addClass("selected");var h=b.prev(".tdc-property-wrap"),
g=h.find(".tdc-icon-wrap");g.attr("data-selected_icon",a);g.html(c.html());h.find(".tdc-icon-remove").removeClass("tdc-hidden-button");tdcSidebarController.onUpdate(e,b.data("param_name"),"",a)});c.on("change","#tdc-icon-selector .tdc-icon-selector-lib",function(){var b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());var c=jQuery(this).val(),a=b.find(".tdc-icon-selector-filter");b.find(".tdc-icon-selector-content").children(".tdc-font-separator").each(function(){var b=jQuery(this),
d=b.data("font_id");""===c||c===d?(b.show(),b.nextAll("span").each(function(){var b=jQuery(this),c=b.data("font_class"),d=a.val().trim();""!==d&&-1===c.indexOf(d)?b.hide():b.show()})):(b.hide(),b.nextAll("span").hide())})});c.on("tdc_wm_custom_svg_icons_update","#tdc-icon-selector",function(b,c,a){b=jQuery(this);var d=b.find('.tdc-font-separator[data-font_id="custom_svg_icons"]'),h=jQuery('.tdc-icon-wrap[data-selected_icon="td-icon-'+a.id+'"]');"new"===c&&d.after('<span class="td-icon-svg" title="Gradient color options are not available for this icon" data-font_class="td-icon-'+
a.id+'">'+atob(a.code)+"</span>");"update"===c&&(b.find('.td-icon-svg[data-font_class="td-icon-'+a.id+'"]').html(atob(a.code)),h.length&&h.html(atob(a.code)));"delete"===c&&(b.find('.td-icon-svg[data-font_class="td-icon-'+a.id+'"]').remove(),h.length&&h.html(""))});c.on("click",".tdc-tab-no-design .tdc-gradient-wrap",function(b){b=jQuery("#tdc-gradient");b.length||(b=tdcSidebar.buildGradient());var c=jQuery(this),a=c.closest(".tdc-property-wrap");c=c.next("input").val();b.toggle();a.after(b);a.next().find(".wp-picker-container").find("input.wp-color-picker").tdGradientColorPicker("open_gradient",
c)});c.on("click",".tdc-colorpicker-wrap",function(b){tdcSidebarPanel.showHideTdcPalette.call(this,b)});c.on("click",".tdc-property-editor_css .tdc-property-title",function(b){var c=jQuery(this),a=c.data("status");f!==typeof a&&"ready"===a?tdcSidebarPanel.showHideTdcCssEditor.call(this,b):c.data("open",!0)});c.on("change focus",".tdc-tab-no-design .tdc-property-woo_search_version select",function(b){b=jQuery(this).val();var c=jQuery(".tdc-woos-dropdown"),a=jQuery(".tdc-woos-regular");""===b?(c.show(),
a.hide()):"regular"===b&&(c.hide(),a.show())});c.on("click",".tdc-property-flex_layout label",function(b){b=jQuery(this);var c=jQuery(".tdc-property-flex_horiz_align"),a=jQuery(".tdc-property-flex_vert_align"),e=jQuery(".tdc-property-flex_layout_reverse");"Row"===b.attr("title")?(c.hasClass("tdc-flex-row-align-rev")||c.addClass("tdc-flex-row-align-rev"),a.hasClass("tdc-flex-row-align-rev")||a.addClass("tdc-flex-row-align-rev"),e.find("input").is(":checked")&&(c.hasClass("tdc-flex-row-rev-align-rev")||
c.addClass("tdc-flex-row-rev-align-rev"))):(c.hasClass("tdc-flex-row-align-rev")&&c.removeClass("tdc-flex-row-align-rev"),a.hasClass("tdc-flex-row-align-rev")&&a.removeClass("tdc-flex-row-align-rev"),c.hasClass("tdc-flex-row-rev-align-rev")&&c.removeClass("tdc-flex-row-rev-align-rev"))});c.on("change",".tdc-property-flex_layout_reverse input",function(b){b=jQuery(this);var c=jQuery(".tdc-property-flex_layout .tdc-property-input-radio:checked"),a=jQuery(".tdc-property-flex_horiz_align");"column"===
c.val()&&(b.is(":checked")?a.hasClass("tdc-flex-row-rev-align-rev")||a.addClass("tdc-flex-row-rev-align-rev"):a.hasClass("tdc-flex-row-rev-align-rev")&&a.removeClass("tdc-flex-row-rev-align-rev"))});c.on({mouseenter:function(){clearTimeout(tdcSidebarPanel._timerInfoHelper);tdcSidebarPanel._timerInfoHelper=setTimeout(function(b){var c=jQuery(window).height(),a=b.parents(".tdc-property-wrap");if(b.hasClass("tdc-sidebar-shadow-title")||b.hasClass("tdc-sidebar-font-title"))a=b;b=a.offset().top;var e=
a.data("info-img"),h="",g=jQuery("#tdc-property-info").find(".tdc-property-info-inner");"undefined"!==typeof a.data("info-descr")&&""!==a.data("info-descr")&&(h='<div class="tdc-property-info-descr">'+a.data("info-descr")+"</div>");g.html('<div class="tdc-property-info-img"><img src="'+e+'" /></div>'+h);a=jQuery("#tdc-property-info");e=a.outerHeight();b+e>=c?(c-=e,a.css("top",c),a.find(".tdc-property-info-arrow").css("top",b-c)):a.css("top",b);a.addClass("tdc-property-info-visible")},200,jQuery(this))},
mouseleave:function(){clearTimeout(tdcSidebarPanel._timerInfoHelper);var b=jQuery("#tdc-property-info");b.hasClass("tdc-property-info-visible")&&(b.removeClass("tdc-property-info-visible"),b.css("top","auto"),b.find(".tdc-property-info-arrow").css("top","auto"),b.find(".tdc-property-info-inner").html(""))}},"#tdc-sidebar.tdc-param-info-active .tdc-property-wrap[data-info-img] .tdc-property-title, #tdc-sidebar.tdc-param-info-active .tdc-sidebar-shadow-title[data-info-img], #tdc-sidebar.tdc-param-info-active .tdc-sidebar-font-title[data-info-img]");
c.on("keyup",".tdc-property-wrap[data-enable-params] textarea,.tdc-property-wrap[data-enable-params] input[type=text]",function(b){tdcSidebarPanel.toggleEnableParamsFromText(jQuery(this))});c.on("change",".tdc-property-wrap[data-enable-params] select",function(b){tdcSidebarPanel.toggleEnableParamsFromSelect(jQuery(this))});c.on("change",".tdc-property-wrap[data-disable-params] select",function(b){tdcSidebarPanel.toggleDisableParamsFromSelect(jQuery(this))});c.on("change",".tdc-property-wrap[data-enable-params] input[type=checkbox]",
function(b){tdcSidebarPanel.toggleEnableParamsFromCheckbox(jQuery(this))});c.on("change",".tdc-list-menu-display select",function(){tdcSidebarPanel.toggleEnableListMenuDepthParam(jQuery(this))});c.on("change",".tdc-gallery-source select",function(){tdcSidebarPanel.toggleEnableGalleryACFfieldParam(jQuery(this))});c.on("change",'.tdc-ml-dropdown-only input[type="checkbox"]',function(){tdcSidebarPanel.toggleEnableTDSMenuLoginDrodownOnlyParams(jQuery(this))});c.on("change",'.tdc-fs-enable-post-create input[type="checkbox"]',
function(){var b=jQuery('.tdc-fs-link-post-toggle input[type="checkbox"]');b.length&&tdcSidebarPanel.toggleEnableFSLinkPostParams(b)});c.on("change",'.tdc-fs-link-post-toggle input[type="checkbox"]',function(){tdcSidebarPanel.toggleEnableFSLinkPostParams(jQuery(this))});c.on("change",".tdc-block-sort select",function(){tdcSidebarPanel.toggleEnableBlockSortParams(jQuery(this))});c.on("mousedown",function(b){var c=jQuery("#tdc-sidebar"),a=jQuery("#tdc-icon-selector"),e=jQuery("#tdc-gradient"),h=jQuery("#tdc-palette"),
g=jQuery("#tdc-font-list"),m=jQuery(".tdc-preset-values-list");a.length?a.get(0).contains(b.target)||(a.hide(),c.after(a)):a=tdcSidebar.buildIconSelector();e.length?e.get(0).contains(b.target)||(a=jQuery(b.target),a.hasClass("tdc-gradient-wrap")||(e.hide(),c.after(e))):e=tdcSidebar.buildGradient();h.length?h.get(0).contains(b.target)||(a=jQuery(b.target),a.hasClass("tdc-colorpicker-wrap")||(h.hide(),c.after(h),h.find("input.wp-color-picker").tdPaletteColorPicker("save_color"))):h=tdcSidebar.buildPalette();
g.length&&!g.get(0).contains(b.target)&&(g.hide(),c.after(g));!m.length||m.get(0).contains(b.target)||jQuery(".tdc-preset-values").get(0).contains(b.target)?m.is(":visible")&&jQuery(".tdc-preset-values").get(0).contains(b.target)&&setTimeout(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),
$currentElement:tdcSidebar.getCurrentElement()},!0)},100):m.is(":visible")&&(m.hide(),c=jQuery(b.target),jQuery(".tdc-top-buttons").get(0).contains(b.target)||c.hasClass("tdc-top-buttons")||jQuery(".tdc-sidebar-bottom").get(0).contains(b.target)||c.hasClass("tdc-sidebar-bottom")||jQuery(".tdc-current-element-head").get(0).contains(b.target)||c.hasClass("tdc-current-element-head")?jQuery(".tdc-current-element-head").get(0).contains(b.target)||c.hasClass("tdc-current-element-head")?(tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),
$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0),jQuery(".tdc-current-element-head").trigger(b)):tdcSidebarPanel.clearPanel():setTimeout(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),
$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},100))});c.on("keyup focus paste cut change","input.tdc-icon-selector-filter",function(b){b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());var c=this.value.trim();b.find(".tdc-icon-selector-content").find(".tdc-font-separator:visible").each(function(){jQuery(this).nextAll("span").each(function(){var a=jQuery(this);-1===a.data("font_class").indexOf(c)?a.hide():a.show()})})});
c.on("change keyup focus",".tdc-tab-no-design .tdc-property-colorpicker input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var c=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(c,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});c.on("change",".tdc-tab-no-design .tdc-property-gradient input",function(b){b=jQuery(this).val();var c=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(c,
jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b});c.on("change",".tdc-tab-no-design .tdc-row-col-dropdown input.tdc-property-input-radio",function(b){"undefined"!==typeof tdcSidebarPanel.timerChangingColumns&&clearTimeout(tdcSidebarPanel.timerChangingColumns);var c=jQuery(this);tdcSidebarPanel.timerChangingColumns=setTimeout(function(){var a=c.val(),b=tdcSidebar.getCurrentRow().data("model_id");b=tdcIFrameData.getModel(b);var d=b.get("childCollection");this.oldValue="11";_.isUndefined(d)||
(d=tdcIFrameData.getChildCollectionWidths(d),_.isUndefined(d)||(this.oldValue=d));"11"===this.oldValue&&("23_13"===a||"13_23"===a||"13_13_13"===a)||"23_13"===this.oldValue&&("11"===a||"13_23"===a||"13_13_13"===a)||"13_23"===this.oldValue&&("11"===a||"23_13"===a||"13_13_13"===a)||"13_13_13"===this.oldValue&&("11"===a||"23_13"===a||"13_23"===a)?(tdcIFrameData.changeRowModel(b,this.oldValue,a),b.getShortcodeRender(1,null,!0)):this.oldValue!==a&&(tdcIFrameData.changeFluidStructureModel(b,this.oldValue,
a),b.getShortcodeRender(1,null,!0));this.oldValue=a},300)});c.on("change",".tdc-tab-no-design .tdc-property-dropdown.tdc-add-class input.tdc-property-input-radio",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this);var c=b.val(),a=tdcIFrameData.getModel(b.data("model_id"));tdcSidebarController.onUpdate(a,b.data("param_name"),this.oldValue,c);this.oldValue=c}});c.on("change focus",".tdc-tab-no-design .tdc-innerRow-col-dropdown select",function(b){if("focusin"===
b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var c=tdcSidebar._$currentInnerRow.data("model_id");c=tdcIFrameData.getModel(c);tdcIFrameData.changeInnerRowModel(c,this.oldValue,b);c.getShortcodeRender(tdcIFrameData.getColumnNumber(c),null,!0);this.oldValue=b}});c.on("change",".tdc-tab-no-design .tdc-innerRow-col-dropdown input.tdc-property-input-radio",function(b){"undefined"!==typeof tdcSidebarPanel.timerChangingInnerColumns&&clearTimeout(tdcSidebarPanel.timerChangingInnerColumns);
var c=jQuery(this);tdcSidebarPanel.timerChangingInnerColumns=setTimeout(function(){var a=c.val(),b=tdcSidebar._$currentInnerRow.data("model_id");b=tdcIFrameData.getModel(b);var d=b.get("childCollection");this.oldValue="11";_.isUndefined(d)||(d=tdcIFrameData.getChildCollectionWidths(d),_.isUndefined(d)||(this.oldValue=d));tdcIFrameData.changeInnerRowModel(b,this.oldValue,a);b.getShortcodeRender(tdcIFrameData.getColumnNumber(b),null,!0);this.oldValue=a},300)});c.on("change focus",".tdc-tab-no-design .tdc-widget-sidebar-dropdown select",
function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var c=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(c,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});c.on("click",".tdc-tab-no-design .tdc-open-wpeditor",function(b){b.preventDefault();var c=jQuery(this);b=jQuery("#tdc-wpeditor");var a=b.children(".content"),e=c.data("mapped_parameter_name");c=c.data("model_id");var h=tdcIFrameData.getModel(c).get("parentModel").get("attrs"),
g="tdc-three-column";if(_.has(h,"width"))switch(h.width){case "1/3":g="tdc-one-column";break;case "2/3":g="tdc-two-column"}a.addClass("tdc-dropped-wpeditor");a.html('<iframe id="tdc-iframe-wpeditor" class="'+g+'" src="'+window.tdcAdminSettings.pluginUrl+"/includes/wpeditor.php?wp_path="+window.tdcAdminSettings.ABSPATH+'" scrolling="auto" style="width: 100%; height: 100%" data-model_id="'+c+'" data-mapped_parameter_name="'+e+'"></iframe>');b.show();tdcWindowFrame.setWindowFrame(b)});c.on("click","#tdc-wpeditor .tdc-iframe-close-button",
function(b){b.preventDefault();jQuery("#tdc-wpeditor").hide()});c.on("click","#tdc-zone .tdc-iframe-close-button",function(b){b.preventDefault();jQuery("#tdc-zone").hide()});c.on("click",".tdc-sidebar-shortcode-row",function(b){b=jQuery(b.currentTarget).data("model_id");b=tdcIFrameData.getModel(b);var c={error:f,getShortcode:""};_.isUndefined(b)||tdcIFrameData._checkModelData(b,c);_.isUndefined(c.getShortcode)||console.log(c.getShortcode)});c.on("click",".tdc-sidebar-current-styles-settings",function(b){b=
tdcSidebarPanel.getCurrentStyleSettings(b);if(!_.isUndefined(b)){var c="",a;for(a in b)c+='"'+a+'" => "'+b[a]+'",\n';console.log(c)}});c.on("click",".tdc-sidebar-font-reset",function(b){tdConfirm.modal({caption:"Clear Font Settings",htmlInfoContent:"This will clear all values for this font group settings.",textYes:"Yes",objectContext:this,callbackYes:function(){tb_remove();var b=jQuery(this),a=b.data("model_id"),c=tdcIFrameData.getModel(a),h=c.get("attrs");h=_.clone(h);for(var g="font-family font-size font-line-height font-style font-weight font-transform font-spacing".split(" "),
m="",f=0;f<g.length;f++){var k=b.closest(".tdc-font-manager-wrap").nextAll(".tdc-"+g[f]+":first");if(k.length){var l=k.find('[data-model_id="'+a+'"]');l.length&&(l.val(""),l.data("responsive",""),k.removeClass("tdc-css-inherited"),m=k.find(".tdc-inherit"),m.length&&m.hide(),m=l.data("placeholder"),"undefined"!==typeof m&&l.attr("placeholder",m),m=l.data("param_name"),delete h[m],l=l.attr("name"),tdcSidebarPanel.deleteResponsiveValues(l))}}c.set("attrs",h);tdcSidebarController.onUpdate(c,m,"","")}})});
c.on("click",".tdc-sidebar-font-save",function(b){b=jQuery(this);var c=b.data("model_id");c=tdcIFrameData.getModel(c).get("attrs");var a=b.data("param_name").replace("font_settings",""),e="font_family font_size font_line_height font_style font_weight font_transform font_spacing".split(" "),h={};_.each(c,function(b,c,d){if(0===c.indexOf(a))for(d=0;d<e.length;d++)if(0<c.indexOf(e[d])){h[e[d]]=b;break}});_.isEmpty(h)||tdConfirm.modal({caption:"Saving Font Settings",htmlInfoContent:function(){setTimeout(function(){jQuery("#TB_ajaxContent").find("input").focus()},
100);return'<label>Font Name: </label><input type="text" autofocus><div class="info"></div>'},textYes:"Save",textNo:"Cancel",callbackYes:function(){var a=jQuery("#TB_ajaxContent"),b=a.find(".info");a=a.find("input").val().trim();if(""===a)b.html("Please enter a font name");else{if("undefined"===typeof window.tdcAdminSettings.tdcSavings||""===window.tdcAdminSettings.tdcSavings)window.tdcAdminSettings.tdcSavings={};"undefined"===typeof window.tdcAdminSettings.tdcSavings.fonts&&(window.tdcAdminSettings.tdcSavings.fonts=
[]);-1===_.findIndex(window.tdcAdminSettings.tdcSavings.fonts,{name:a})?(b.html("Saving..."),window.tdcAdminSettings.tdcSavings.fonts.push({name:a,value:window.btoa(JSON.stringify(h))}),tdcUtil.updateTdcSavings(window,function(){jQuery("#TB_ajaxContent").find(".info").html("Font has been saved!");setTimeout(function(){tb_remove()},500)})):b.html("Font name already exists! Choose another one")}}})});c.on("click",".tdc-sidebar-font-load",function(){var b=jQuery(this),c=b.closest(".tdc-property-wrap"),
a=b.data("model_id"),e=b.data("param_name");if(""!==window.tdcAdminSettings.tdcSavings&&("undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts||"undefined"!==typeof window.tdcAdminSettings.tdcSavings.recentFonts)){var h=jQuery("#tdc-font-list");h.length||(h=tdcSidebar.buildFontList(a,e));h.html("");"undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts&&(jQuery('<div class="tdc-font-list-header"><span>Saved fonts</span></div>').appendTo(h),_.map(window.tdcAdminSettings.tdcSavings.fonts,
function(b){jQuery('<div class="tdc-font-settings" data-value="'+b.value+'" data-model_id="'+a+'" data-param_name="'+e+'"><span class="tdc-font-name">'+b.name+'</span><span class="tdc-font-delete"></span></div>').appendTo(h)}));if("undefined"!==typeof window.tdcAdminSettings.tdcSavings.recentFonts){jQuery('<div class="tdc-font-list-header"><span>Recent fonts</span></div>').appendTo(h);b=_.invert(window.tdcAdminSettings.mappedFontFamily);for(var g=window.tdcAdminSettings.tdcSavings.recentFonts.length;0<
g;g--){var m=window.tdcAdminSettings.tdcSavings.recentFonts[g],f=b[m];_.isUndefined(f)||jQuery('<div class="tdc-recent-font-settings" data-value="'+m+'" data-model_id="'+a+'" data-param_name="'+e+'"><span class="tdc-font-name">'+f+'</span><span class="tdc-recent-font-delete"></span></div>').appendTo(h)}}c.after(h);h.toggle()}});c.on("click",".tdc-font-delete",function(b){b.stopImmediatePropagation();var c=jQuery(this).closest(".tdc-font-settings");b=c.data("name");b=_.findIndex(window.tdcAdminSettings.tdcSavings.fonts,
{name:b});window.tdcAdminSettings.tdcSavings.fonts.splice(b,1);tdcUtil.updateTdcSavings(this,function(){c.remove()})});c.on("click",".tdc-recent-font-delete",function(b){b.stopImmediatePropagation();var c=jQuery(this).closest(".tdc-recent-font-settings");b=c.data("name");b=_.findIndex(window.tdcAdminSettings.tdcSavings.recentFonts,{name:b});window.tdcAdminSettings.tdcSavings.recentFonts.splice(b,1);tdcUtil.updateTdcSavings(this,function(){c.remove()})});c.on("click",".tdc-font-settings",function(){var b=
jQuery(this),c=b.data("value");c=JSON.parse(window.atob(c));var a=b.data("model_id");a=tdcIFrameData.getModel(a);var e=a.get("attrs"),h=b.data("param_name").replace("font_settings",""),g="font_family font_size font_line_height font_style font_weight font_transform font_spacing".split(" ");_.each(c,function(a,b,c){-1!==_.indexOf(g,b)&&(e[h+b]=a)});a.set({attrs:e,rebindToPanel:!0});tdcSidebarController.onUpdate(a)});c.on("click",".tdc-recent-font-settings",function(){var b=jQuery(this),c=b.data("value"),
a=b.data("model_id");a=tdcIFrameData.getModel(a);var e=a.get("attrs");b=b.data("param_name").replace("font_settings","");e[b+"font_family"]=c;a.set({attrs:e,rebindToPanel:!0});tdcSidebarController.onUpdate(a)});tdcSidebarPanel.$_paramSwitchWrap=c.find(".tdc-param-switch-wrap");tdcSidebarPanel.$_paramNameSwitch=c.find(".tdc-param-name-switch");if(0<tdcSidebarPanel.$_paramNameSwitch.length)c.on("click",".tdc-param-name-switch",function(){jQuery(this).toggleClass("tdc-param-switch-active");jQuery(".tdc-param-name").toggleClass("tdc-param-name-active")});
tdcSidebarPanel.$_paramInfoSwitch=c.find(".tdc-param-info-switch");c.on("click",".tdc-param-info-switch",function(){jQuery(this).toggleClass("tdc-param-switch-active");jQuery("#tdc-sidebar").toggleClass("tdc-param-info-active");jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/set_param_info_option","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{action:"tdc_ajax_set_param_info_option"}})});
c.on("tdc_wm_global_color_name_update",function(b,c){b=c.new_option;var a="var(--"+c.option.replace("_","-")+")",d="var(--"+b.replace("_","-")+")";jQuery(".tdc-property-colorpicker").each(function(){var b=jQuery(this),c=b.find("input");b=b.find(".tdc-colorpicker-wrap");!_.isUndefined(c.val())&&""!==c.val()&&/var\(--[a-zA-z0-9\-]*\)/.test(c.val())&&c.val()===a&&(c.val(d),b.attr("style","background: "+d).data("has-color","1"),b.attr("title","Global color: "+d),c.trigger("change"))});jQuery(".tdc-property-gradient").each(function(){var b=
jQuery(this),c=b.find("input");b=b.find(".tdc-gradient-wrap");!_.isUndefined(c.val())&&""!==c.val()&&/var\(--[a-zA-z0-9\-]*\)/.test(c.val())&&c.val()===a&&(c.val(d),b.attr("style","background: "+d),b.attr("title","Global color: "+d),c.trigger("change"))})});c.on("keyup","input.tdc-edit-page_id",function(b){var c=jQuery(this).closest(".tdc-property-wrap").find("a.tdc-edit-page_id");""===b.currentTarget.value.trim()?c.hide():c.length&&"undefined"!==typeof window.tdData&&(c.attr("href",tdData.adminUrl+
"post.php?post="+b.currentTarget.value.trim()+"&action=edit").show(),c.css("visibility","visible"))});c.on("change","select.tdc-edit-cloud_tpl_module_id",function(b){var c=jQuery(this).closest(".tdc-property-wrap").find("a.tdc-edit-cloud_tpl_module_id");""===b.currentTarget.value.trim()?c.hide():c.length&&"undefined"!==typeof window.tdData&&(c.attr("href",tdData.adminUrl+"post.php?post_id="+b.currentTarget.value.trim()+"&td_action=tdc&tdbTemplateType=module").show(),c.css("visibility","visible"))});
c.on("change",".tdc-property-dropdown select",function(b){b=jQuery(this);b.find("option:selected").is(":disabled")?b.addClass("selected-op-disabled"):b.removeClass("selected-op-disabled")})},getCurrentStyleSettings:function(c,b){_.isUndefined(b)&&(b=jQuery(c.currentTarget).data("model_id"),b=tdcIFrameData.getModel(b),c={error:f},_.isUndefined(b)||tdcIFrameData._checkModelData(b,c));var d=b.get("tag");b=b.get("attrs");b=_.clone(b);if(!_.isUndefined(b)){var a={};c={};for(var e in b)0===e.indexOf("tds_")&&
(a[e]=b[e]);e=window.tdcAdminSettings.mappedShortcodes[d].params;for(d=0;d<e.length;d++){var h=!1,g=e[d];if(0===g.param_name.indexOf("tds_")){for(var m in a)if(g.param_name===m){c[m]=a[m];h=!0;break}h||(c[g.param_name]="")}}for(m in a)switch(a=m.split("-"),a.length){case 2:if(!_.has(c,m)){e=a[0];a=!1;for(var n in c)if(e===c[n]&&1===n.split("-").length){a=!0;break}if(!a){var k;for(k in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[k],e)){var l=k;break}_.has(c,
l)&&""===c[l]&&window.tdcAdminSettings.globalStyle[l]===e&&(a=!0)}a||delete b[m]}break;case 3:e=a[0];d=a[2];for(k in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[k],e)){l=k;break}a=!1;for(n in c)if(e===c[n]&&n===l+"-"+d){a=!0;break}a||_.has(c,l+"-"+d)&&""===c[l+"-"+d]&&window.tdcAdminSettings.globalStyle[l]===e&&(a=!0);a||delete b[m]}return b}},getCurrentListAtts:function(c,b,d){_.isUndefined(b)&&(c=jQuery(c.currentTarget).data("model_id"),b=tdcIFrameData.getModel(c),
c={error:f},_.isUndefined(b)||tdcIFrameData._checkModelData(b,c));c=b.get("tag");b=b.get("attrs");var a=_.clone(b);if(!_.isUndefined(a)){var e={};b={};for(var h in a)0===h.indexOf("tds_")&&(e[h]=a[h]);h=window.tdcAdminSettings.mappedShortcodes[c].params;for(var g=0;g<h.length;g++){var m=!1,n=h[g];if(0===n.param_name.indexOf("tds_")){for(var k in e)if(n.param_name===k){b[k]=e[k];m=!0;break}m||(b[n.param_name]="")}}for(k in e)switch(e=k.split("-"),e.length){case 2:if(!_.has(b,k)){h=e[0];e=!1;for(var l in b)if(h===
b[l]&&1===l.split("-").length){e=!0;break}if(!e){var p;for(p in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[p],h)){var q=p;break}_.has(b,q)&&""===b[q]&&window.tdcAdminSettings.globalStyle[q]===h&&(e=!0)}e||delete a[k]}break;case 3:h=e[0];m=e[2];for(p in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[p],h)){q=p;break}e=!1;for(l in b)if(h===b[l]&&l===q+"-"+m){e=!0;break}e||_.has(b,q+"-"+m)&&""===b[q+"-"+m]&&window.tdcAdminSettings.globalStyle[q]===
h&&(e=!0);e||delete a[k]}var r=[],u;for(u in window.tdcAdminSettings.listStyles[d])if(u===c){for(g=0;g<window.tdcAdminSettings.listStyles[d][u].length;g++)k=window.tdcAdminSettings.listStyles[d][u][g],_.isArray(k)?_.map(k,function(b){_.isUndefined(a[b])||(_.isUndefined(r[g])&&(r[g]=[]),r[g].push(a[b]))}):_.isUndefined(a[k])||(_.isArray(a[k])&&a[k].length?r[g]=a[k][0]:r[g]=a[k]);break}return r}},showHideTdcCssEditor:function(c){c=jQuery("#tdc-editor-css");var b=jQuery(this).closest(".tdc-property-wrap"),
d=b.find("textarea:first");c.length||tdcSidebar.buildEditorCss();tdcSidebar.$editorTextarea=d;b.next(".tdc-property-editor_css-title").length?(b.next(".tdc-property-editor_css-title").toggle(),c.toggle()):(b.after(c),b.after('<div class="tdc-property-editor_expand tdc-property-editor_css-title"><span></span><div class="tdc-editor-toggle tdc-css-ace-editor-expand-collapse"></div></div>'),c.show(),tdcSidebar.editorCss.getSession().setValue(d.val()))},toggleEnableParamsFromText:function(c){var b=c.closest(".tdc-property-wrap"),
d=b.data("enable-params");b=b.data("enable-params-reverse");d=jQuery('.tdc-property-wrap[data-enabled-by="'+d+'"]');d.length&&(""!==c.val()?"undefined"!==typeof b&&1===b?d.hasClass("tdc-disabled")||d.addClass("tdc-disabled"):d.hasClass("tdc-disabled")&&d.removeClass("tdc-disabled"):"undefined"!==typeof b&&1===b?d.hasClass("tdc-disabled")&&d.removeClass("tdc-disabled"):d.hasClass("tdc-disabled")||d.addClass("tdc-disabled"))},toggleEnableParamsFromSelect:function(c){var b=c.val();c=c.closest(".tdc-property-wrap");
var d=c.data("enable-params"),a=c.data("enable-params-reverse"),e=jQuery('.tdc-property-wrap[data-enabled-by^="'+d+'"]');e.length&&e.each(function(c,d){c=jQuery(d);d=c.data("enabled-by");-1!==d.indexOf("--")?d.substring(d.indexOf("--")+2)===b?"undefined"!==typeof a&&1===a?c.hasClass("tdc-disabled")||c.addClass("tdc-disabled"):c.hasClass("tdc-disabled")&&c.removeClass("tdc-disabled"):"undefined"!==typeof a&&1===a?c.hasClass("tdc-disabled")&&c.removeClass("tdc-disabled"):c.hasClass("tdc-disabled")||
c.addClass("tdc-disabled"):""!==b?"undefined"!==typeof a&&1===a?e.hasClass("tdc-disabled")||e.addClass("tdc-disabled"):e.hasClass("tdc-disabled")&&e.removeClass("tdc-disabled"):"undefined"!==typeof a&&1===a?e.hasClass("tdc-disabled")&&e.removeClass("tdc-disabled"):e.hasClass("tdc-disabled")||e.addClass("tdc-disabled")})},toggleDisableParamsFromSelect:function(c){var b=c.val();c=c.closest(".tdc-property-wrap").data("disable-params");c=jQuery('.tdc-property-wrap[data-disabled-by^="'+c+'"]');c.length&&
c.each(function(c,a){c=jQuery(a);a=c.data("disabled-by");-1!==a.indexOf("--")&&(a.substring(a.indexOf("--")+2)===b?c.hasClass("tdc-disabled")||c.addClass("tdc-disabled"):c.hasClass("tdc-disabled")&&c.removeClass("tdc-disabled"))})},toggleEnableParamsFromCheckbox:function(c){var b=c.closest(".tdc-property-wrap"),d=b.data("enable-params");b=b.data("enable-params-reverse");d=jQuery('.tdc-property-wrap[data-enabled-by="'+d+'"]');d.length&&(c.is(":checked")?"undefined"!==typeof b&&1===b?d.hasClass("tdc-disabled")||
d.addClass("tdc-disabled"):d.hasClass("tdc-disabled")&&d.removeClass("tdc-disabled"):"undefined"!==typeof b&&1===b?d.hasClass("tdc-disabled")&&d.removeClass("tdc-disabled"):d.hasClass("tdc-disabled")||d.addClass("tdc-disabled"))},showHideTdcPalette:function(c){c=jQuery("#tdc-palette");var b=jQuery(this).closest(".tdc-property-wrap");c.length||tdcSidebar.buildPalette();b.next("#tdc-palette").length?(c.toggle(),tdcSidebarPanel.saveTdcPalette()):(tdcSidebarPanel.saveTdcPalette(),b.after(c),c.show(),
tdcSidebarPanel.openTdcPalette())},saveTdcPalette:function(){var c=jQuery("#tdc-palette"),b=c.prev(".tdc-property-wrap");c.length||tdcSidebar.buildPalette();b.length&&(b=b.find("input").val(),c=c.find("input.wp-color-picker"),c.tdPaletteColorPicker("open_palette",b),c.tdPaletteColorPicker("save_color"))},openTdcPalette:function(){var c=jQuery("#tdc-palette"),b=c.prev(".tdc-property-wrap");c.length||tdcSidebar.buildPalette();b.length&&(b=b.find("input").val(),c.find("input.wp-color-picker").tdPaletteColorPicker("open_palette",
b))},tdcIconWrapHandler:function(c){var b=jQuery(this),d=jQuery("#tdc-icon-selector");d.length||(d=tdcSidebar.buildIconSelector());var a=b.closest(".tdc-property-wrap");c=d.find(".tdc-icon-selector-filter");var e=d.find(".tdc-icon-selector-lib"),h=d.find(".tdc-icon-selector-content");e.val("");c.val("");h.children().each(function(){jQuery(this).show()});d.data("model_id",b.data("model_id"));d.data("param_name",b.data("param_name"));d.show();a.after(d);b=d.data("param_name");d=tdcIFrameData.getModel(d.data("model_id")).get("attrs");
var g="";_.has(d,b)&&(g=d[b].trim());c.focus();h.find("span").each(function(){var a=jQuery(this),b=a.data("font_class");if(g===b){for(a.addClass("selected");!a.prev(".tdc-font-separator").length;)a=a.prev();a=a.prev(".tdc-font-separator").data("font_id");e.val(a);e.trigger("change")}else a.removeClass("selected")})},tdcIconRemoveHandler:function(c){var b=jQuery(c.currentTarget);c=b.closest(".tdc-property-wrap").find(".tdc-icon-wrap");b.addClass("tdc-hidden-button");c.addClass("tdc-no-icon-selected");
c.html("");b=c.data("model_id");b=tdcIFrameData.getModel(b);tdcSidebarController.onUpdate(b,c.data("param_name"),"","")},tdcImageWrapHandler:function(c){var b=jQuery(c.currentTarget);b.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(b);jQuery(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");
window.send_to_editor=function(c){if(-1!==c.indexOf("[caption")){var a=/\[caption(.*)\](.*)\[\/caption\]/g.exec(c);3===a.length&&(c=a[2])}var d=jQuery("img",c).attr("src"),h=a="",g="";"undefined"===typeof d?(c=jQuery(c),d=c.attr("src"),a=c.attr("class"),h=c.attr("height"),g=c.attr("width")):(c=jQuery("img",c),a=c.attr("class"),h=c.attr("height"),g=c.attr("width"));jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:a,action:"tdc_ajax_get_image_id"}}).done(function(a,c,e){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(b.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button"),b.attr("style","background-image: url( '"+d+"') "),b.data("image_link",d),b.data("image_id",a.image_id),b.data("image_height",h),b.data("image_width",g),b.removeClass("tdc-no-image-selected"),window.send_to_editor=
window.original_send_to_editor,window.tb_remove(),c="",e=b.data("model_id"),e=tdcIFrameData.getModel(e),b.hasClass("tdc-no-image-selected")||(c=a.image_id.toString()),a=e.get("attrs"),a.media_size_image_height=h,a.media_size_image_width=g,e.set("attrs",a),tdcSidebarController.onUpdate(e,b.data("param_name"),"",c)))}).fail(function(a,b,c){})};return!1},tdcImageRemoveHandler:function(c){var b=jQuery(c.currentTarget);c=b.closest(".tdc-property-wrap").find(".tdc-image-wrap");b.addClass("tdc-hidden-button");
c.addClass("tdc-no-image-selected");jQuery.removeData(c,"image_link");c.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");b=c.data("model_id");b=tdcIFrameData.getModel(b);tdcSidebarController.onUpdate(b,c.data("param_name"),"","")},tdcInheritSelectHandler:function(c){c=jQuery(c.currentTarget);var b=c.closest(".tdc-property-wrap"),d=b.find("[data-responsive]"),a=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all");b.hasClass("tdc-property-dropdown-responsive")&&
(b.hasClass("tdc-visual-selector")?(d=b.find("[data-responsive]:checked:first"),d.length&&d.prop("checked",!1),"undefined"===typeof a?(b.removeClass("tdc-css-inherited"),d=b.find("[data-responsive]:first")):(b.addClass("tdc-css-inherited"),d=b.find('[data-responsive][value="'+a+'"]')),d.length&&d.prop("checked",!0)):"undefined"===typeof a?(b.removeClass("tdc-css-inherited"),d.find("option:selected").removeAttr("selected").find("option:first").attr("selected","selected")):(b.addClass("tdc-css-inherited"),
d.val(a)),b=tdcSidebarPanel.deleteResponsiveValue(d.attr("name"),tdcSidebar.currentViewportSettings.name),a=tdcIFrameData.getModel(d.data("model_id")),d=d.data("param_name"),tdcSidebarController.onUpdate(a,d,"",b));c.hide()},tdcInheritCheckboxHandler:function(c){c=jQuery(c.currentTarget);var b=c.closest(".tdc-property-wrap"),d=b.find("[data-responsive]"),a=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all");b.hasClass("tdc-property-checkbox-responsive")&&("undefined"===typeof a?(b.removeClass("tdc-css-inherited"),
d.removeAttr("checked")):(""===a?d.removeAttr("checked"):d.attr("checked","checked"),b.addClass("tdc-css-inherited")),b=tdcSidebarPanel.deleteResponsiveValue(d.attr("name"),tdcSidebar.currentViewportSettings.name),a=tdcIFrameData.getModel(d.data("model_id")),d=d.data("param_name"),tdcSidebarController.onUpdate(a,d,"",b));c.hide()},toggleEnableListMenuDepthParam:function(c){c=c.val();var b=jQuery(".tdc-list-menu-depth");""===c||"accordion"===c?b.hasClass("tdc-disabled")&&b.removeClass("tdc-disabled"):
b.hasClass("tdc-disabled")||b.addClass("tdc-disabled")},toggleEnableGalleryACFfieldParam:function(c){var b=c.val();c=c.closest(".tdc-tab-content").find(".tdc-property-acf_field");"acf_field"===b?c.hasClass("tdc-disabled")&&c.removeClass("tdc-disabled"):c.hasClass("tdc-disabled")||c.addClass("tdc-disabled")},toggleEnableTDSMenuLoginDrodownOnlyParams:function(c){var b=jQuery(".tdc-ml-do-show"),d=jQuery(".tdc-ml-do-hide"),a=jQuery('.tdc-ml-disable-dropdown input[type="checkbox"]');c.is(":checked")?(b.hasClass("tdc-disabled")&&
b.removeClass("tdc-disabled"),d.hasClass("tdc-disabled")||d.addClass("tdc-disabled")):a.is(":checked")?(b.hasClass("tdc-disabled")||b.addClass("tdc-disabled"),d.hasClass("tdc-disabled")||d.addClass("tdc-disabled")):d.hasClass("tdc-disabled")&&d.removeClass("tdc-disabled")},toggleEnableFSLinkPostParams:function(c){var b=c.closest(".tdc-property-wrap"),d=jQuery(".tdc-property-make_child");c.is(":checked")?b.hasClass("tdc-disabled")?d.addClass("tdc-disabled"):d.hasClass("tdc-disabled")&&d.removeClass("tdc-disabled"):
d.hasClass("tdc-disabled")||d.addClass("tdc-disabled")},toggleEnableBlockSortParams:function(c){c=c.find("option:selected").val();var b=jQuery(".tdc-block-sort-popular-by-day");b.length&&("popular1"===c||"popular2"===c||"popular3"===c||"popular7"===c?b.hasClass("tdc-disabled")&&b.removeClass("tdc-disabled"):b.hasClass("tdc-disabled")||b.addClass("tdc-disabled"))},bindPanelToModel:function(c,b){if(_.isUndefined(tdcSidebarPanel._currentBoundModel)||tdcSidebarPanel._currentBoundModel.cid!==c.cid||!_.isUndefined(b)&&
(_.isUndefined(b)||!0===b)){b=window.tdcAdminSettings.mappedShortcodes[c.attributes.tag];tdcSidebarPanel._deletePanel();jQuery(".tdc-empty-sidebar").hide();tdcSidebarPanel._currentBoundModel=c;for(var d=[],a=0;a<b.params.length;a++){var e=tdcSidebarPanel._defaultGroupName;_.isEmpty(b.params[a].group)||(e=b.params[a].group);d.push(e)}d=_.uniq(d);var h=e="",g=tdcSidebar.getCurrentTabId(),m,f;e+='<div class="tdc-sidebar-header"><div class="tdc-tabs">';var k=f=m="";for(a=0;a<d.length;a++){h=tdcSidebarPanel._fixGroupName(d[a]);
var l=tdcUtil.makeSafeForCSS(h);0===a?(m='<a href="#" data-tab-id="td-tab-'+l+'" class="tdc-tab-active" title="'+h+' settings">'+h+'<span class="tdc-tab-search-notice"></span></a>',f='<a href="#" data-tab-id="td-tab-'+l+'" title="'+h+' settings">'+h+'<span class="tdc-tab-search-notice"></span></a>'):_.isUndefined(g)||g!=="td-tab-"+l?k+='<a href="#" data-tab-id="td-tab-'+l+'" title="'+h+' settings">'+h+'<span class="tdc-tab-search-notice"></span></a>':(m=f,k+='<a href="#" data-tab-id="td-tab-'+l+'" class="tdc-tab-active" title="'+
h+' settings">'+h+'<span class="tdc-tab-search-notice"></span></a>')}e=e+(m+k)+"</div>";k=f=m=a="";if(tdcState.isMobileComposer())switch(tdcSidebar.currentViewportSettings.name){case "all":a="selected";break;case "phone":k="selected"}else switch(tdcSidebar.currentViewportSettings.name){case "all":a="selected";break;case "landscape":m="selected";break;case "portrait":f="selected";break;case "phone":k="selected"}e+='<div class="tdc-tab-responsive"><div class="tdc-responsive-buttons">';tdcState.isMobileComposer()?
e=e+('<div class="tdc-responsive-all tdc-responsive-tablet-landscape '+a+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div><div class="tdc-responsive-phone ')+(k+'" title="Portrait viewport"><span class="tdc-phone-icon"></span></div>'):(e+='<div class="tdc-responsive-all '+a+'" title="Desktop viewport"><span class="tdc-all-icon"></span></div>',"Newspaper"===window.tdcAdminSettings.themeName&&(e+='<div class="tdc-responsive-tablet-landscape '+m+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div>'),
e+='<div class="tdc-responsive-tablet-portrait '+f+'" title="Portrait viewport"><span class="tdc-tablet-portrait-icon"></span></div>',e+='<div class="tdc-responsive-phone '+k+'" title="Phone viewport"><span class="tdc-phone-icon"></span></div>');e+="</div>";e+="</div>";e+='<div class="tdc-search">';e+='<i class="td-icon-search"></i>';e+='<input type="text" placeholder="Search settings..." />';e+="</div></div>";e+='<div class="tdc-sidebar-sticky-a"></div>';e+='<div class="tdc-sidebar-sticky-b"></div>';
e+='<div class="tdc-tab-content-wrap" data-tag="'+c.get("tag")+'">';k=f=m="";for(a=0;a<d.length;a++){h=tdcSidebarPanel._fixGroupName(d[a]);l=tdcUtil.makeSafeForCSS(h);h="tdc-tab-no-design";var p=c.get("tag");"css"===l&&(h="tdc-tab-design");0===a?(m='<div class="tdc-tab-content tdc-tab-content-visible '+h+'" id="td-tab-'+l+'">',f='<div class="tdc-tab-content '+h+'" id="td-tab-'+l+'">',l=window.tdcAdminSettings.mappedShortcodes[p].tdc_start_values,c.unset("presetValues"),_.isUndefined(l)||(l=JSON.parse(window.atob(l)),
_.isArray(l)&&1<l.length&&c.set("presetValues",l)),c.has("presetValues")&&(l=c.get("presetValues"),k+=tdcSidebarPanel._addPresetValuesSelector(l,c))):_.isUndefined(g)||g!=="td-tab-"+l?k+='<div class="tdc-tab-content '+h+'" id="td-tab-'+l+'">':(m=f,k+='<div class="tdc-tab-content tdc-tab-content-visible '+h+'" id="td-tab-'+l+'">');k+=tdcSidebarPanel._bindGroupAndGetHtml(d[a],b,c);l=' data-model_id="'+c.cid+'" ';"dev"===window.tdcAdminSettings.deployMode&&(k+='<div class="tdc-sidebar-row-buttons">',
k+='<div class="tdc-sidebar-button tdc-sidebar-shortcode-row" '+l+' title="Get the shortcode of the current row">CONSOLE: shortcode</div>',k+='<div class="tdc-sidebar-button tdc-sidebar-current-styles-settings" '+l+' title="Get the current styles\' settings">CONSOLE: style presets</div>',k+="</div>");k+="</div>"}e=e+(m+k)+"</div>";jQuery(".tdc-inspector .tdc-tabs-wrapper").html(e);jQuery(".tdc-inspector-wrap").addClass("tdc-inspector-active");tdcSidebarPanel._hook.addAction("panel_rendered",function(){"undefined"===
typeof window.tdcResponsiveValues&&(window.tdcResponsiveValues={},"all"===tdcSidebar.currentViewportSettings.name?jQuery(".tdc-tab-content-wrap").removeClass("tdc-viewport-responsive"):jQuery(".tdc-tab-content-wrap").addClass("tdc-viewport-responsive"),jQuery(".tdc-tab-content-wrap .tdc-property-responsive").each(function(){var a=jQuery(this),b=a.find("[data-responsive]"),c=b.attr("name"),d=b.data("responsive");try{var e=window.atob(d);window.tdcResponsiveValues[c]=JSON.parse(e)}catch(v){d={},a.hasClass("tdc-property-textfield-responsive")?
""!==b.val()&&(d.all=b.val()):a.hasClass("tdc-property-dropdown-responsive")?a.hasClass("tdc-visual-selector")?(b=a.find("[data-responsive]:checked:first"),b.length?d.all=b.val():(b=a.find("[data-responsive]:first"),b.length&&(d.all=b.val()))):b.find("option:first").val()!==b.val()&&(d.all=b.val()):a.hasClass("tdc-property-checkbox-responsive")?b.is(":checked")&&(d.all=b.val()):a.hasClass("tdc-property-range-responsive")?d.all=b.data("value"):a.hasClass("tdc-property-range_multiple-responsive")&&
(d.all=b.data("range_value")+b.data("range_unit")),window.tdcResponsiveValues[c]=d}tdcSidebarPanel.setViewportCurrentResponsiveValue(b)}))});tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-tab-content-wrap").find('select[name$="font_family"]').change(function(a){a=jQuery(this).val();""===window.tdcAdminSettings.tdcSavings&&(window.tdcAdminSettings.tdcSavings={});"undefined"===typeof window.tdcAdminSettings.tdcSavings.recentFonts&&(window.tdcAdminSettings.tdcSavings.recentFonts=
[]);var b=window.tdcAdminSettings.tdcSavings.recentFonts.indexOf(a);-1!==b&&window.tdcAdminSettings.tdcSavings.recentFonts.splice(b,1);window.tdcAdminSettings.tdcSavings.recentFonts.push(a);20<=window.tdcAdminSettings.tdcSavings.recentFonts.length&&window.tdcAdminSettings.tdcSavings.recentFonts.splice(0,1);tdcUtil.updateTdcSavings()})});jQuery(".tdc-breadcrumbs").show();tdcSidebarPanel.$_paramSwitchWrap.css("display","flex");tdcSidebarPanel.$_paramInfoSwitch.hasClass("tdc-param-switch-active")&&jQuery("#tdc-sidebar").addClass("tdc-param-info-active");
0<tdcSidebarPanel.$_paramNameSwitch.length&&tdcSidebarPanel.$_paramNameSwitch.hasClass("tdc-param-switch-active")&&jQuery(".tdc-param-name").addClass("tdc-param-name-active");tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css");(function(){if("vc_row"===c.get("tag")){var a=jQuery("body .tdc-row-col-dropdown select"),b=jQuery("body .tdc-row-stretch-dropdown select"),d=c.get("childCollection");if(!_.isUndefined(d)){d=tdcIFrameData.getChildCollectionWidths(d);
_.isUndefined(d)&&(d="11");a.length?a.val(d):(a=jQuery("body .tdc-row-col-dropdown input[value='"+d+"']"),a.length&&a.attr("checked","checked"));a=c.get("attrs");if(_.has(a,"full_width"))var e=a.full_width;_.isUndefined(e)&&(e="");b.val(e)}}})();(function(){if("vc_row_inner"===c.get("tag")){var a=jQuery("body .tdc-innerRow-col-dropdown select"),b=c.get("childCollection");if(!_.isUndefined(b)){b=tdcIFrameData.getChildCollectionWidths(b);_.isUndefined(b)&&(b="11");var d=c.get("parentModel").get("attrs"),
e="";_.has(d,"width")&&(e=d.width.replace("/",""));if(a.length)switch(a.val(b),e){case "":case "11":a.find("option[value=12_12]").addClass("tdc-block-col");a.find("option[value=23_13]").removeClass("tdc-block-col");a.find("option[value=13_23]").removeClass("tdc-block-col");a.find("option[value=13_13_13]").removeClass("tdc-block-col");break;case "13":a.find("option[value=12_12]").addClass("tdc-block-col");a.find("option[value=23_13]").addClass("tdc-block-col");a.find("option[value=13_23]").addClass("tdc-block-col");
a.find("option[value=13_13_13]").addClass("tdc-block-col");break;case "23":a.find("option[value=12_12]").removeClass("tdc-block-col"),a.find("option[value=23_13]").addClass("tdc-block-col"),a.find("option[value=13_23]").addClass("tdc-block-col"),a.find("option[value=13_13_13]").addClass("tdc-block-col")}else if(a=jQuery('body .tdc-innerRow-col-dropdown input[value="'+b+'"]'),a.length)switch(a.attr("checked","checked"),a.next("label").show(),e){case "":case "11":a.parent().find("input[value=12_12] + label").addClass("tdc-block-col");
a.parent().find("input[value=23_13] + label").removeClass("tdc-block-col");a.parent().find("input[value=13_23] + label").removeClass("tdc-block-col");a.parent().find("input[value=13_13_13] + label").removeClass("tdc-block-col");break;case "13":a.parent().find("input[value=12_12] + label").addClass("tdc-block-col");a.parent().find("input[value=23_13] + label").addClass("tdc-block-col");a.parent().find("input[value=13_23] + label").addClass("tdc-block-col");a.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col");
break;case "23":a.parent().find("input[value=12_12] + label").removeClass("tdc-block-col"),a.parent().find("input[value=23_13] + label").addClass("tdc-block-col"),a.parent().find("input[value=13_23] + label").addClass("tdc-block-col"),a.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col")}}}})();(function(){var a=c.get("tag");if("vc_row"===a||"vc_row_inner"===a||"vc_column"===a||"vc_column_inner"===a){a=jQuery("body .tdc-property-flex_layout");var b=c.get("childCollection");if(!_.isUndefined(b)&&
a.length){b=jQuery("body .tdc-property-flex_horiz_align");var d=jQuery("body .tdc-property-flex_vert_align"),e=jQuery("body .tdc-property-flex_layout_reverse");a.find("input[value=column]").is(":checked")&&(b.addClass("tdc-flex-row-align-rev"),d.addClass("tdc-flex-row-align-rev"),e.find("input").is(":checked")&&b.addClass("tdc-flex-row-rev-align-rev"))}}})();(function(){if("td_woo_products_live_search"===c.get("tag")){var a=jQuery("body .tdc-property-woo_search_version select").val(),b=jQuery("body .tdc-woos-dropdown"),
d=jQuery("body .tdc-woos-regular");""===a?d.hide():"regular"===a&&b.hide()}})();b=jQuery(".tdc-property-wrap[data-enable-params] textarea,.tdc-property-wrap[data-enable-params] input[type=text]");b.length&&b.each(function(a,b){tdcSidebarPanel.toggleEnableParamsFromText(jQuery(b))});b=jQuery(".tdc-property-wrap[data-enable-params] select");b.length&&b.each(function(a,b){tdcSidebarPanel.toggleEnableParamsFromSelect(jQuery(b))});b=jQuery(".tdc-property-wrap[data-disable-params] select");b.length&&b.each(function(a,
b){tdcSidebarPanel.toggleDisableParamsFromSelect(jQuery(b))});b=jQuery(".tdc-property-wrap[data-enable-params] input[type=checkbox]");b.length&&b.each(function(a,b){tdcSidebarPanel.toggleEnableParamsFromCheckbox(jQuery(b))});b=jQuery(".tdc-list-menu-display select");b.length&&b.each(function(a,b){tdcSidebarPanel.toggleEnableListMenuDepthParam(jQuery(b))});b=jQuery(".tdc-gallery-source select");b.length&&b.each(function(a,b){tdcSidebarPanel.toggleEnableGalleryACFfieldParam(jQuery(b))});b=jQuery('.tdc-ml-dropdown-only input[type="checkbox"]');
b.length&&b.each(function(a,b){tdcSidebarPanel.toggleEnableTDSMenuLoginDrodownOnlyParams(jQuery(b))});b=jQuery('.tdc-fs-link-post-toggle input[type="checkbox"]');b.length&&b.each(function(a,b){tdcSidebarPanel.toggleEnableFSLinkPostParams(jQuery(b))});b=jQuery(".tdc-block-sort select");b.length&&b.each(function(a,b){tdcSidebarPanel.toggleEnableBlockSortParams(jQuery(b))})}},_bindGroupAndGetHtml:function(c,b,d){var a="",e=d.get("attrs");if("tdc_zone"===d.get("tag"))var h=e.type;for(var g=0;g<b.params.length;g++){var m=
b.params[g].param_name,f=b.params[g].group;if(c===tdcSidebarPanel._defaultGroupName&&_.isEmpty(b.params[g].group)||b.params[g].group===c){if(!_.isUndefined(h)){if(!_.isUndefined(b.params[g].zone_group)&&h!==b.params[g].zone_group||"type"===m)continue;if("mob_load"===m&&!_.includes(["tdc_header_desktop","tdc_header_desktop_sticky"],h))continue;if("desktop_load"===m&&!_.includes(["tdc_header_mobile","tdc_header_mobile_sticky"],h))continue}a+=tdcSidebarPanel._bindParamAndGetHtml(b.params[g],d)}if("block_template_id"===
m){f=e.block_template_id;_.isEmpty(f)&&(f=window.tdcAdminSettings.globalBlockTemplate);m=window.tdcAdminSettings.mappedBlockTemplates;for(var k=0;k<m[f].params.length;k++)if(c===tdcSidebarPanel._defaultGroupName&&_.isEmpty(m[f].params[k].group)||m[f].params[k].group===c)a+=tdcSidebarPanel._bindParamAndGetHtml(m[f].params[k],d)}else if(0===m.indexOf("tds_")){var l=m.split("-");k=l[0];var p;2===l.length?p=l[1]:2<l.length&&new tdcNotice.notice('Param "'+m+'" must have up to at most one "-" separator ',
!0,!1);m=e[m];_.isEmpty(m)&&(m=window.tdcAdminSettings.globalStyle[k]);l=window.tdcAdminSettings.settingsStyle[k];if("undefined"!==typeof l[m])for(k=0;k<l[m].params.length;k++)if(f==c||_.isUndefined(f)&&c===tdcSidebarPanel._defaultGroupName){var q=JSON.parse(JSON.stringify(l[m].params[k]));q.param_name=m+"-"+q.param_name;_.isUndefined(p)||(q.param_name+="-"+p);a+=tdcSidebarPanel._bindParamAndGetHtml(q,d)}}}return a},_bindParamAndGetHtml:function(c,b){switch(c.type){case "custom":return tdcSidebarPanel.addCustom(c,
b);case "colorpicker":return tdcSidebarPanel.addColorpicker(c,b);case "gradient":return tdcSidebarPanel.addGradient(c,b);case "dropdown":return tdcSidebarPanel.addDropDown(c,b);case "dropdown-responsive":return tdcSidebarPanel.addDropDownResponsive(c,b);case "checkbox":return tdcSidebarPanel.addCheckBox(c,b);case "checkbox-responsive":return tdcSidebarPanel.addCheckBoxResponsive(c,b);case "range":return tdcSidebarPanel.addRange(c,b);case "range-responsive":return tdcSidebarPanel.addRangeResponsive(c,
b);case "range_multiple":return tdcSidebarPanel.addRangeMultiple(c,b);case "range_multiple-responsive":return tdcSidebarPanel.addRangeMultipleResponsive(c,b);case "icon":return tdcSidebarPanel.addIconSelector(c,b);case "attach_image":return tdcSidebarPanel.addUploadImage(c,b);case "textfield":return tdcSidebarPanel.addTextField(c,b);case "do_shortcode_textfield":return tdcSidebarPanel.addDoShortcode(c,b);case "textfield-responsive":return tdcSidebarPanel.addTextFieldResponsive(c,b);case "textarea":return tdcSidebarPanel.addTextArea(c,
b);case "textarea_html":return tdcSidebarPanel.addTextAreaHtml(c,b);case "textarea_raw_html":return tdcSidebarPanel.addTextAreaRawHtml(c,b);case "textarea_raw_html_ace":return tdcSidebarPanel.addTextAreaRawHtmlAce(c,b);case "editor_css":return tdcSidebarPanel.addEditorCss(c,b);case "css_editor":return"";case "tdc_css_editor":return tdcCssEditor.init(),tdcCssEditor.addComposerCssEditor(c,b);case "horizontal_separator":return tdcSidebarPanel.addSeparatorHorizontal(c,b);case "text_separator":return tdcSidebarPanel.addTextSeparatorHorizontal(c,
b);case "font_header":return tdcSidebarPanel.addFontHeader(c,b);case "font_title":return tdcSidebarPanel.addFontTitle(c,b);case "font_reset":return tdcSidebarPanel.addFontReset(c,b);case "font_save":return tdcSidebarPanel.addFontSave(c,b);case "font_load":return tdcSidebarPanel.addFontLoad(c,b);case "font_settings":return tdcSidebarPanel.addFontSettings(c,b);case "shadow_header":return tdcSidebarPanel.addShadowHeader(c,b);case "shadow_title":return tdcSidebarPanel.addShadowTitle(c,b);case "spot_header":return tdcSidebarPanel.addSpotHeader(c,
b);case "filter_header":return tdcSidebarPanel.addFilterHeader(c,b);case "pages_header":return tdcSidebarPanel.addPagesHeader(c,b);case "plans_limit_header":return tdcSidebarPanel.addPlansLimitHeader(c,b);case "tdb_filter_type_header":return tdcSidebarPanel.addFilterTypeHeader(c,b);case "filter_title":return tdcSidebarPanel.addFilterTitle(c,b);case "search_section_header":return tdcSidebarPanel.addSearchSectionHeader(c,b);case "clearfix":return tdcSidebarPanel.addClearfix(c,b);case "tdc_hidden_field":return"";
default:return c.param_name+" - "+c.type+"<br>"}},_deletePanel:function(){tdcSidebarPanel._hook._hooks=[];tdcSidebarPanel._currentBoundModel=f;tdcSidebarPanel.saveTdcPalette();jQuery(".tdc-breadcrumbs").hide();jQuery(".tdc-param-switch-wrap").hide();jQuery(".tdc-inspector .tdc-current-element-head").empty();jQuery(".tdc-inspector .tdc-tabs-wrapper").empty();jQuery(".tdc-inspector-wrap").removeClass("tdc-inspector-active");jQuery(".tdc-empty-sidebar").show();tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible");
tdcSidebar.$_currentElementHead.removeClass("tdc-current-element-siblings-button-on");delete window.tdcResponsiveValues;tdcSidebar.hideWpeditor()},_getParameterClasses:function(c){var b="tdc-property-wrap tdc-property-"+c.type;b+=" tdc-property-"+c.param_name;_.isUndefined(c.class)||(b+=" "+c.class);return b},_getParameterCurrentValue:function(c,b){b=b.get("attrs");return _.isUndefined(b[c.param_name])?"dropdown"===c.type||_.isUndefined(c.value)?"":c.value:b[c.param_name]},_getParameterDomName:function(c){return"tdc-param-"+
c.param_name},_getParamterDataAtts:function(c,b){var d="";if("undefined"===typeof b)return d;d+=' data-model_id="'+b.cid+'"';"undefined"!==typeof c&&(d+=' data-param_name="'+c.param_name+'"',"woo_shortcode"===c.param_name&&(d+='id="woo_shortcode" '));return d},_fixGroupName:function(c){switch(c){case "Design options":return"Css";case "Pagination":return"Extra";case "Ajax filter":return"Ajax"}return c},clearPanel:function(){tdcSidebarPanel._deletePanel()},blurInputPanel:function(){jQuery("body").find("input").blur()},
_addPresetValuesSelector:function(c,b){b='<div class="tdc-preset-values tdc-sidebar-horizontal-separator"><i class="tdc-font-fa tdc-font-fa-cube"></i>Pre-made style presets<i class="tdc-font-fa tdc-font-fa-angle-right"></i></div><ul class="tdc-preset-values-list" data-model_id="'+(b.cid+'">');for(var d=1;d<c.length;d++){var a="";_.isUndefined(c[d].tdc_preset_individual)||(a='data-individual="1"');var e="";_.isUndefined(c[d].tdc_preset_class)||(e=' class="'+c[d].tdc_preset_class+'"');b+="<li "+a+" "+
e+' data-values="'+window.btoa(JSON.stringify(c[d]))+'">'+c[d].tdc_preset_name+"</li>"}b+="</ul>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackPresets)||tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackPresets);return b},callbackPresets:function(){jQuery(".tdc-preset-values").click(function(){jQuery(this).next(".tdc-preset-values-list").toggle()});jQuery(".tdc-preset-values-list > li").click(function(){var c=jQuery(this),b=c.data("individual"),
d=c.parent(".tdc-preset-values-list");c=JSON.parse(window.atob(c.data("values")));var a=tdcIFrameData.getModel(d.data("model_id")),e={};_.isUndefined(b)||(e=_.clone(a.get("attrs")));_.isObject(c)&&(_.map(c,function(b,c){var d=!1;_.map(window.tdcAdminSettings.mappedShortcodes[a.get("tag")].params,function(a,h){a.param_name===c&&(d=!0,e[c]=b)});if(!d){var h=e.block_template_id;if(_.isUndefined(h)||""===h)h=window.tdcAdminSettings.globalBlockTemplate;_.isUndefined(h)||_.map(window.tdcAdminSettings.mappedBlockTemplates[h].params,
function(a,h){a.param_name===c&&(d=!0,e[c]=b)})}d||0!==c.indexOf("tds_")||(e[c]=b)}),a.set("attrs",e));tdcSidebarController.onUpdate(a)})},addColorpicker:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':e=' title="'+c.description+'" ');var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(h='data-enable-params="'+c.toggle_enable_params+
'"');var g="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');var m="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(m='data-enabled-by="'+c.toggle_enabled_by+'"');d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+h+" "+g+" "+m+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><div class="tdc-colorpicker-wrap" title="'+
(c.heading+'">');d=d+"</div><input "+(tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(c,b)+'"/>');d=d+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");d+="</div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackColorPicker)||tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackColorPicker);return d},addCustom:function(c,b){b="";
_.has(c,"description")&&""!==c.description&&(b=' title="'+c.description+'" ');var d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'">';d+='<div class="tdc-property-title"><span class="tdc-search-data"'+b+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property">'+c.value;d=d+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");return d+"</div>"},callbackEditorCss:function(){tdcSidebar.buildEditorCss()},callbackColorPicker:function(){jQuery("#tdc-palette-color-picker").tdPalette();
jQuery(".tdc-tab-no-design .tdc-property-colorpicker").each(function(){var c=jQuery(this),b=c.find("input");c=c.find(".tdc-colorpicker-wrap");_.isUndefined(b.val())||""===b.val()||(c.attr("style","background: "+b.val()),/var\(--[a-zA-z0-9\-]*\)/.test(b.val())&&(c.append('<i class="tdc-font-tdmp tdc-font-tdmp-globe"></i>'),c.attr("title","Global color: "+b.val()).data("has-color","1")))})},addGradient:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+
'"');var e="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':e=' title="'+c.description+'" ');var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(h='data-enable-params="'+c.toggle_enable_params+'"');var g="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');var m="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(m='data-enabled-by="'+c.toggle_enabled_by+'"');
d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+h+" "+g+" "+m+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><div class="tdc-gradient-wrap tdc-no-gradient-selected"></div><input '+(tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(c,b)+'"/>');d=d+'</div><span class="tdc-param-name">'+
(c.param_name+"</span>");d+="</div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackGradient)||tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackGradient);return d},callbackGradient:function(){jQuery("#tdc-gradient-color-picker").tdGradient();jQuery(".tdc-property-gradient").each(function(){var c=jQuery(this),b=c.find("input");c=c.find(".tdc-gradient-wrap");if(!_.isUndefined(b.val())&&""!==b.val())try{var d=JSON.parse(window.atob(b.val()));_.isUndefined(d.css)||
c.attr("style",d.css)}catch(a){d=b.val(),_.isUndefined(d)||(c.attr("style","background: "+d),/var\(--[a-zA-z0-9\-]*\)/.test(b.val())&&(c.append('<i class="tdc-font-tdmp tdc-font-tdmp-globe"></i>'),c.attr("title","Global color: "+d)))}})},addDropDown:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');if("tdb_mobile_menu"===b.get("tag")&&"menu_id"===c.param_name){var e=b.get("attrs");e.menu_id=window.tdcPostSettings.mobileMenuId;b.set("attrs",e)}var h=
!1,g=!1;_.has(c,"tdc_dropdown_images")&&""!==c.tdc_dropdown_images&&(h=!0);_.has(c,"tdc_dropdown_texts")&&""!==c.tdc_dropdown_texts&&(g=!0);var m="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(m='data-enable-params="'+c.toggle_enable_params+'"');var f="";_.has(c,"toggle_disable_params")&&""!==c.toggle_disable_params&&(f='data-disable-params="'+c.toggle_disable_params+'"');var k="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(k='data-enable-params-reverse="1"');
var l="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(l='data-enabled-by="'+c.toggle_enabled_by+'"');var p="";_.has(c,"toggle_disabled_by")&&""!==c.toggle_disabled_by&&(p='data-disabled-by="'+c.toggle_disabled_by+'"');var q=e="",r=!1,u=Object.keys(c.value),x=!0;if(_.has(c,"tdc_min_options")&&u.length<=parseInt(c.tdc_min_options))return e;for(var t=0;t<u.length;t++){var v=!1,B="",z="",w="",y="",A="",C=u[t],E=String(tdcSidebarPanel._getParameterCurrentValue(c,b)),D=String(c.value[u[t]]);
_.has(c,"options_to_disable")&&""!==c.options_to_disable&&(z=c.options_to_disable);_.has(c,"options_to_hide")&&""!==c.options_to_hide&&(w=c.options_to_hide);_.isObject(c.value[u[t]])&&(v=!0,D=_.values(c.value[u[t]])[0],C=_.keys(c.value[u[t]])[0]);if(h||g)0===t&&""===E&&(E=D),E===D&&(B=" checked "),z=_.uniqueId(),w=D,"vc_row"!==b.attributes.tag&&"vc_row_inner"!==b.attributes.tag||-1!==c.param_name.indexOf("flex_")||(w="col_"+w),q+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(c,
b)+' id="'+z+'" name="'+tdcSidebarPanel._getParameterDomName(c)+'" '+B+' value="'+D+'">',h?(B="",v&&(B="tdc-standard-value"),q+='<label class="tdc-property-input-radio-label '+B+'" for="'+z+'" title="'+C+'"><div class="'+w+'"></div></label>'):q+='<label class="tdc-property-input-radio-label" for="'+z+'" title="'+C+'">'+D+"</label>";else{E===D&&(B=' selected="selected" ',x=!1);if("__"===D&&-1!==C.search("--")||-1<z.indexOf(D)&&""!==D)y=" disabled ";-1<w.indexOf(D)&&""!==D&&(A=' style="display:none" ',
"popular"===D&&(A=""));""!==y&&""!==B&&(r=!0);q+="<option "+B+" "+y+A+' value="'+D+'">'+C+"</option>"}}u="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':u=' title="'+c.description+'" ');e+='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+m+" "+f+" "+k+" "+l+" "+p+">";e+='<div class="tdc-property-title"><span class="tdc-search-data"'+u+">"+c.heading+"</span>";d="";a="#";"tdb_flex_block_builder"===b.get("tag")&&"cloud_tpl_module_id"===
c.param_name&&(d="tdc-edit-cloud_tpl_module_id",m='style="margin-left: 10px"',_.has(b.get("attrs"),"cloud_tpl_module_id")?""===b.get("attrs").cloud_tpl_module_id.trim()?m='style="margin-left: 10px; visibility: hidden"':"undefined"!==typeof window.tdData&&(a=tdData.adminUrl+"post.php?post_id="+b.get("attrs").cloud_tpl_module_id.trim()+"&td_action=tdc&tdbTemplateType=module"):m='style="margin-left: 10px; visibility: hidden"',e+='<a href="'+a+'" class="'+d+'" target="_blank" '+m+">Edit</a>");e+='</div><div class="tdc-property">';
h||g?e+=q:(r&&(d+=" selected-op-disabled"),x&&["tds_plans_button","tds_plans_price"].includes(b.get("tag"))&&(h=String(tdcSidebarPanel._getParameterCurrentValue(c,b)),q+='<option selected="selected" value="'+h+'" disabled>Plan #'+h+" n/a</option>",d+=" selected-op-disabled"),e+="<select "+tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" class="'+d+'">',e=e+q+"</select>");e=e+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");return e+"</div>"},
addDropDownResponsive:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e=!1,h=!1;_.has(c,"tdc_dropdown_images")&&""!==c.tdc_dropdown_images&&(e=!0);_.has(c,"tdc_dropdown_texts")&&""!==c.tdc_dropdown_texts&&(h=!0);var g="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(g='data-enable-params="'+c.toggle_enable_params+'"');var m="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(m='data-enable-params-reverse="1"');
var f="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(f='data-enabled-by="'+c.toggle_enabled_by+'"');var k="",l="",p=Object.keys(c.value);if(_.has(c,"tdc_min_options")&&p.length<=parseInt(c.tdc_min_options))return k;var q=' data-responsive="" ',r=String(tdcSidebarPanel._getParameterCurrentValue(c,b));try{var u=JSON.parse(window.atob(r));q=' data-responsive="'+r+'" ';"undefined"!==typeof u[tdcSidebar.currentViewportSettings.name]&&(r=u[tdcSidebar.currentViewportSettings.name])}catch(y){}for(u=
0;u<p.length;u++){var x=!1,t="",v="",B=p[u],z=String(c.value[p[u]]);_.isObject(c.value[p[u]])&&(x=!0,z=_.values(c.value[p[u]])[0],B=_.keys(c.value[p[u]])[0]);if(e||h){0===u&&""===r&&(r=z);r===z&&(t=" checked ");v=_.uniqueId();var w=z;"vc_row"!==b.attributes.tag&&"vc_row_inner"!==b.attributes.tag||-1!==c.param_name.indexOf("flex_")||(w="col_"+w);l+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(c,b)+' id="'+v+'" name="'+tdcSidebarPanel._getParameterDomName(c)+
'" '+t+' value="'+z+'" '+q+">";e?(t="",x&&(t="tdc-standard-value"),l+='<label class="tdc-property-input-radio-label '+t+'" for="'+v+'" title="'+B+'"><div class="'+w+'"></div></label>'):l+='<label class="tdc-property-input-radio-label" for="'+v+'" title="'+B+'">'+z+"</label>"}else r===z&&(t=' selected="selected" '),"__"===z.substring(0,2)&&-1!==B.search("--")&&(v=" disabled "),l+="<option "+t+" "+v+' value="'+z+'">'+B+"</option>"}p="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+
c.description+'"':p=' title="'+c.description+'" ');k+='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+g+" "+m+" "+f+">";k+='<div class="tdc-property-title"><span class="tdc-search-data"'+p+">"+c.heading+'<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select" style="display: block;"></div></span></div>';k+='<div class="tdc-property">';e||h?k+=l:(k+="<select "+tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+
'" '+q+p+">",k=k+l+"</select>");k=k+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");return k+"</div>"},addCheckBox:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':e=' title="'+c.description+'" ');var h="",g=tdcSidebarPanel._getParameterCurrentValue(c,b);"product_cat_type_action"===c.param_name?""!==g&&"single_selection"!==g&&(h=
" checked "):""!==g&&(h=" checked ");var m="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(m='data-enable-params="'+c.toggle_enable_params+'"');var f="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(f='data-enable-params-reverse="1"');var k="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(k='data-enabled-by="'+c.toggle_enabled_by+'"');var l="";_.has(c,"toggle_disabled_by")&&""!==c.toggle_disabled_by&&(l='data-disabled-by="'+c.toggle_disabled_by+
'"');g="";var p=tdcSidebarPanel._getParameterClasses(c);p.includes("tdc-filter-multiple")&&(g=' title="'+c.description+'" ');d='<div class="'+p+'" '+d+" "+a+" "+m+" "+f+" "+k+" "+l+'><div class="tdc-property-title"><span class="tdc-search-data"'+(e+">"+c.heading+"</span></div>");d=d+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="checkbox" value="yes" '+h+" "+g+"/>");d=d+'</div><span class="tdc-param-name">'+
(c.param_name+"</span>");return d+"</div>"},addCheckBoxResponsive:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e="",h=' data-responsive="" ',g=String(tdcSidebarPanel._getParameterCurrentValue(c,b));try{var m=JSON.parse(window.atob(g));h=' data-responsive="'+g+'" ';"undefined"!==typeof m[tdcSidebar.currentViewportSettings.name]&&(g=m[tdcSidebar.currentViewportSettings.name])}catch(l){}""!==g&&(e=" checked ");m="";_.has(c,"description")&&
""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':m=' title="'+c.description+'" ');g="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(g='data-enable-params="'+c.toggle_enable_params+'"');var f="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(f='data-enable-params-reverse="1"');var k="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(k='data-enabled-by="'+c.toggle_enabled_by+'"');d='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(c)+
'" '+d+" "+a+" "+g+" "+f+" "+k+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+m+">"+c.heading+'<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-checkbox" style="display: block;"></div></span></div>';d=d+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="checkbox" value="yes" '+e+h+"/>");d=d+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");return d+"</div>"},
addRange:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':e=' title="'+c.description+'" ');var h="";_.has(c,"range_max")&&""!==c.range_max&&(h=c.range_max);var g="";_.has(c,"range_min")&&""!==c.range_min&&(g=c.range_min);var m="";_.has(c,"range_step")&&""!==c.range_step&&(m=c.range_step);var f="";_.has(c,"value")&&""!==c.value&&(f=c.value);var k=
"";""!==tdcSidebarPanel._getParameterCurrentValue(c,b)&&(k=tdcSidebarPanel._getParameterCurrentValue(c,b));var l="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(l='data-enable-params="'+c.toggle_enable_params+'"');var p="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(p='data-enable-params-reverse="1"');var q="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(q='data-enabled-by="'+c.toggle_enabled_by+'"');d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+
'" '+d+" "+a+" "+l+" "+p+" "+q+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="range" data-value="'+k+'" data-min="'+g+'" data-max="'+h+'" data-step="'+m+'" min="'+g+'" max="'+h+'" step="'+m+'" value="'+k+'" />');d=d+('<input type="text" class="tdc_range_value" data-default_value="'+f+'" value="'+k+'"/></div><span class="tdc-param-name">')+
(c.param_name+"</span>");return d+="</div>"},addRangeResponsive:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':e=' title="'+c.description+'" ');var h="";_.has(c,"range_max")&&""!==c.range_max&&(h=c.range_max);var g="";_.has(c,"range_min")&&""!==c.range_min&&(g=c.range_min);var m="";_.has(c,"range_step")&&""!==c.range_step&&(m=c.range_step);var f=
"";_.has(c,"value")&&""!==c.value&&(f=c.value);""!==tdcSidebarPanel._getParameterCurrentValue(c,b)&&tdcSidebarPanel._getParameterCurrentValue(c,b);var k="";_.has(c,"placeholder")&&""!==c.placeholder&&(k=' data-placeholder="'+c.placeholder+'" placeholder="'+c.placeholder+'" ');var l="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(l='data-enable-params="'+c.toggle_enable_params+'"');var p="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(p='data-enable-params-reverse="1"');
var q="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(q='data-enabled-by="'+c.toggle_enabled_by+'"');var r=' data-responsive="" ',u=tdcSidebarPanel._getParameterCurrentValue(c,b);try{var x=JSON.parse(window.atob(u));r=' data-responsive="'+u+'" ';u="undefined"===typeof x[tdcSidebar.currentViewportSettings.name]?"":x[tdcSidebar.currentViewportSettings.name]}catch(t){}d='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+l+" "+p+" "+q+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+
e+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="range" data-value="'+u+'" data-min="'+g+'" data-max="'+h+'" data-step="'+m+'" min="'+g+'" max="'+h+'" step="'+m+'" value="'+u+'" '+r+" />");d=d+('<input type="text" class="tdc_range_value" data-default_value="'+f+'" '+k+' value="'+u+'"/></div><span class="tdc-param-name">')+(c.param_name+"</span>");return d+="</div>"},addRangeMultiple:function(c,
b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':e=' title="'+c.description+'" ');var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(h='data-enable-params="'+c.toggle_enable_params+'"');var g="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');var m="";_.has(c,"toggle_enabled_by")&&
""!==c.toggle_enabled_by&&(m='data-enabled-by="'+c.toggle_enabled_by+'"');var f=c.tdc_values,k=tdcSidebarPanel._getParameterCurrentValue(c,b),l="",p="",q=[],r="",u="",x="",t="",v="",B="",z="",w;for(w in f)f.hasOwnProperty(w)&&(q.push(f[w].unit),""===u||""===r)&&(t=f[w].unit,u=' data-range_unit="'+t+'" ',x=f[w].value,r=' data-range_value="'+x+'" ',v=f[w].range_min,B=f[w].range_max,z=f[w].range_step);if(""!==k){for(var y=[],A=0;A<q.length&&!(y=k.split(q[A]),1<y.length);A++);y.length&&(t=q[A],u=' data-range_unit="'+
t+'" ',x=y[0],r=' data-range_value="'+x+'" ')}for(w in f)f.hasOwnProperty(w)&&(k=_.uniqueId(),l+=" data-value_"+w+'="'+f[w].value+'" ',l+=" data-min_"+w+'="'+f[w].range_min+'" ',l+=" data-max_"+w+'="'+f[w].range_max+'" ',l+=" data-step_"+w+'="'+f[w].range_step+'" ',q=f[w].value,y="",f[w].unit===t&&(q=x,v=f[w].range_min,B=f[w].range_max,z=f[w].range_step,y="checked"),p+='<input name="'+tdcSidebarPanel._getParameterDomName(c)+'_unit" data-unit="'+w+'" data-unit_value="'+f[w].unit+'" type="radio" id="'+
k+'" '+y+' data-default_value="'+f[w].value+'" data-last_value="'+q+'"/>',p+='<label for="'+k+'">'+f[w].unit+"</label>");d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+h+" "+g+" "+m+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><input class="tdc-multiple-range" '+(tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="range" '+r+" "+u+" "+
l+' min="'+v+'" max="'+B+'" step="'+z+'" value="'+x+'"/>');d=d+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+p+'</div><input type="text" class="tdc_range_value" value="'+(x+'"/>');d+="</div>";d+="</div>";d+='<span class="tdc-param-name">'+c.param_name+"</span>";return d+="</div>"},addRangeMultipleResponsive:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e="";_.has(c,"description")&&""!==c.description&&(""!==
d?a='data-info-descr="'+c.description+'"':e=' title="'+c.description+'" ');var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(h='data-enable-params="'+c.toggle_enable_params+'"');var g="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');var m="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(m='data-enabled-by="'+c.toggle_enabled_by+'"');var f=c.tdc_values,k=tdcSidebarPanel._getParameterCurrentValue(c,
b),l="",p="",q=[],r=' data-responsive="" ',u="",x="",t="",v="",B="",z="",w="",y;for(y in f)f.hasOwnProperty(y)&&(q.push(f[y].unit),""===x||""===u)&&(v=f[y].unit,x=' data-range_unit="'+v+'" ',t=f[y].value,u=' data-range_value="'+t+'" ',B=f[y].range_min,z=f[y].range_max,w=f[y].range_step);if(""!==k){var A=k;try{var C=JSON.parse(window.atob(k));r=' data-responsive="'+k+'" ';A="undefined"===typeof C[tdcSidebar.currentViewportSettings.name]?"":C[tdcSidebar.currentViewportSettings.name]}catch(E){}if(""!==
A){k=[];for(C=0;C<q.length&&!(k=A.split(q[C]),1<k.length);C++);k.length&&(v=q[C],x=' data-range_unit="'+v+'" ',t=k[0],u=' data-range_value="'+t+'" ')}}for(y in f)f.hasOwnProperty(y)&&(q=_.uniqueId(),l+=" data-value_"+y+'="'+f[y].value+'" ',l+=" data-min_"+y+'="'+f[y].range_min+'" ',l+=" data-max_"+y+'="'+f[y].range_max+'" ',l+=" data-step_"+y+'="'+f[y].range_step+'" ',A=f[y].value,k="",f[y].unit===v&&(A=t,B=f[y].range_min,z=f[y].range_max,w=f[y].range_step,k="checked"),p+='<input name="'+tdcSidebarPanel._getParameterDomName(c)+
'_unit" data-unit="'+y+'" data-unit_value="'+f[y].unit+'" type="radio" id="'+q+'" '+k+' data-default_value="'+f[y].value+'" data-last_value="'+A+'"/>',p+='<label for="'+q+'">'+f[y].unit+"</label>");d='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+h+" "+g+" "+m+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><input class="tdc-multiple-range" '+(tdcSidebarPanel._getParamterDataAtts(c,
b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="range" '+u+" "+x+" "+l+" "+r+' min="'+B+'" max="'+z+'" step="'+w+'" value="'+t+'"/>');d=d+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+p+'</div><input type="text" class="tdc_range_value" value="'+(t+'"/>');d+="</div>";d+="</div>";d+='<span class="tdc-param-name">'+c.param_name+"</span>";return d+="</div>"},addIconSelector:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+
c.info_img+'"');var e="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':e=' title="'+c.description+'" ');var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(h='data-enable-params="'+c.toggle_enable_params+'"');var g="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');var f="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(f='data-enabled-by="'+c.toggle_enabled_by+
'"');d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+h+" "+g+" "+f+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><div class="tdc-icon-wrap tdc-no-icon-selected" '+(tdcSidebarPanel._getParamterDataAtts(c,b)+' data-selected_icon="'+tdcSidebarPanel._getParameterCurrentValue(c,b)+'">');d=d+'</div><a class="tdc-icon-remove tdc-hidden-button" href="#" >Remove</a></div><span class="tdc-param-name">'+
(c.param_name+"</span>");d+="</div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-icon-wrap").each(function(a,d){a=jQuery(d);c.param_name===a.data("param_name")&&(d=jQuery("#tdc-icon-selector"),d.length||(d=tdcSidebar.buildIconSelector()),d=d.find('.tdc-icon-selector-content > span[data-font_class="'+tdcSidebarPanel._getParameterCurrentValue(c,b)+'"]'),""!==tdcSidebarPanel._getParameterCurrentValue(c,b)&&(a.html(d.html()),a.closest(".tdc-property").find(".tdc-icon-remove").removeClass("tdc-hidden-button")))})});
return d},addUploadImage:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':e=' title="'+c.description+'" ');var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(h='data-enable-params="'+c.toggle_enable_params+'"');var g="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');
var f="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(f='data-enabled-by="'+c.toggle_enabled_by+'"');d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+h+" "+g+" "+f+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><div class="tdc-image-wrap tdc-no-image-selected" '+(tdcSidebarPanel._getParamterDataAtts(c,b)+" style=\"background-image: url('"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png')\">");
d=d+'</div><a class="tdc-image-remove tdc-hidden-button" href="#" >Remove</a></div><span class="tdc-param-name">'+(c.param_name+"</span>");d+="</div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-image-wrap").each(function(a,d){var e=jQuery(d);if(!e.parent().parent(".tdc-bg-upload").length&&c.param_name===e.data("param_name")){var h=tdcSidebarPanel._getParameterCurrentValue(c,b);""!==h&&jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_url",
"uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_id:h,action:"tdc_ajax_get_image_url"}}).done(function(a,b,c){"success"===b&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(e.attr("style","background-image: url('"+a.image_url+"')").removeClass("tdc-no-image-selected"),e.data("image_link",a.image_url),e.data("image_id",h),e.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button")))}).fail(function(a,
b,c){})}})});return d},addTextField:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e="",h="";if(_.has(c,"description")&&""!==c.description)if(""!==d)a='data-info-descr="'+c.description+'"';else{var g=jQuery("<div>"+c.description+"</div>");c.description===g.text()?e=' title="'+c.description+'" ':h='<div class="tdc-description">'+c.description+"</div>"}g="";_.has(c,"placeholder")&&""!==c.placeholder&&(g=' data-placeholder="'+c.placeholder+
'" placeholder="'+c.placeholder+'" ');var f=tdcSidebarPanel._getParameterCurrentValue(c,b);if(""===f){var n=Math.floor(65536*(1+Math.random())).toString(16).substring(1);"modal_id"===c.param_name?(f="td_m_"+n,tdcSidebarController.onUpdate(b,"modal_id","",f)):"tc_id"===c.param_name&&(f="td_tc_"+n,tdcSidebarController.onUpdate(b,"tc_id","",f))}"undefined"!==typeof f&&null!==f&&0===f.toString().indexOf("td_encval")&&(f=f.replace("td_encval",""),f=window.atob(f));n="";_.has(c,"toggle_enable_params")&&
""!==c.toggle_enable_params&&(n='data-enable-params="'+c.toggle_enable_params+'"');var k="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(k='data-enable-params-reverse="1"');var l="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(l='data-enabled-by="'+c.toggle_enabled_by+'"');d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+n+" "+k+" "+l+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+c.heading+"</span>";
e="";a="#";"tdm_block_popup"===b.get("tag")&&"page_id"===c.param_name&&(e="tdc-edit-page_id",n='style="margin-left: 10px"',_.has(b.get("attrs"),"page_id")?""===b.get("attrs").page_id.trim()?n='style="margin-left: 10px; visibility: hidden"':"undefined"!==typeof window.tdData&&(a=tdData.adminUrl+"post.php?post="+b.get("attrs").page_id.trim()+"&action=edit"):n='style="margin-left: 10px; visibility: hidden"',d+='<a href="'+a+'" class="'+e+'" target="_blank" '+n+">Edit</a>");d=d+'</div><div class="tdc-property"><input '+
(tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="text" '+g+' value="'+f+'" class="'+e+'" />');d=d+h+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");return d+="</div>"},addDoShortcode:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e=_.uniqueId("tdc_textarea_"),h="";_.has(c,"description")&&""!==c.description&&(""!==d?a='data-info-descr="'+c.description+'"':h=' title="'+c.description+
'" ');d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+">";d+='<div class="tdc-property-title"><span'+h+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><textarea id="'+(e+'" class="tdc-textarea tdc-textarea-visible" '+tdcSidebarPanel._getParamterDataAtts(c,b)+">"+decodeURIComponent(atob(tdcSidebarPanel._getParameterCurrentValue(c,b)))+"</textarea>");d=d+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");d+="</div>";c=jQuery("body");c.on("change","#woo_shortcode",
function(a){jQuery(a.change);a=atob(a.target.value);jQuery("#"+e).val(a).trigger("focusin")});c.on("keyup focusin","#"+e,function(a){var b=jQuery(a.target),c=tdcIFrameData.getModel(b.data("model_id")),d=window.btoa(encodeURIComponent(b.val())),e=window.btoa(encodeURIComponent(a.target.oldValue));setTimeout(function(){tdcSidebarController.onUpdate(c,b.data("param_name"),e,d)},500)});return d},addTextFieldResponsive:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+
c.info_img+'"');var e="",h="";if(_.has(c,"description")&&""!==c.description)if(""!==d)a='data-info-descr="'+c.description+'"';else{var g=jQuery("<div>"+c.description+"</div>");c.description===g.text()?e=' title="'+c.description+'" ':h='<div class="tdc-description">'+c.description+"</div>"}g="";_.has(c,"placeholder")&&""!==c.placeholder&&(g=' data-placeholder="'+c.placeholder+'" placeholder="'+c.placeholder+'" ');var f="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(f='data-enable-params="'+
c.toggle_enable_params+'"');var n="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(n='data-enable-params-reverse="1"');var k="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(k='data-enabled-by="'+c.toggle_enabled_by+'"');var l=' data-responsive="" ',p=tdcSidebarPanel._getParameterCurrentValue(c,b);try{var q=JSON.parse(window.atob(p));l=' data-responsive="'+p+'" ';p="undefined"===typeof q[tdcSidebar.currentViewportSettings.name]?"":q[tdcSidebar.currentViewportSettings.name]}catch(r){}d=
'<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+f+" "+n+" "+k+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+e+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><input '+(tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" type="text" value="'+p+'" '+g+l+e+"/>");d=d+h+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");return d+="</div>"},addTextArea:function(c,
b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e=_.uniqueId("tdc_textarea_"),h="",g="";if(_.has(c,"description")&&""!==c.description)if(""!==d)a='data-info-descr="'+c.description+'"';else{var f=jQuery("<div>"+c.description+"</div>");c.description===f.text()?h=' title="'+c.description+'" ':g='<div class="tdc-description">'+c.description+"</div>"}f="";_.has(c,"placeholder")&&""!==c.placeholder&&(f=' data-placeholder="'+c.placeholder+'" placeholder="'+
c.placeholder+'" ');var n="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(n='data-enable-params="'+c.toggle_enable_params+'"');var k="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(k='data-enable-params-reverse="1"');var l="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(l='data-enabled-by="'+c.toggle_enabled_by+'"');d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+n+" "+k+" "+l+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+
h+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><textarea id="'+(e+'" class="tdc-textarea tdc-textarea-visible" '+tdcSidebarPanel._getParamterDataAtts(c,b)+' name="'+tdcSidebarPanel._getParameterDomName(c)+'" '+f+'">'+tdcSidebarPanel._getParameterCurrentValue(c,b)+"</textarea>");d=d+g+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");d+="</div>";jQuery("body").on("keyup focusin","#"+e,function(a){var b=jQuery(a.target),c=tdcIFrameData.getModel(b.data("model_id"));if("focusin"!==
a.type&&a.target.oldValue!==a.target.value){var d=b.val(),e=a.target.oldValue;tdcSidebarController.onUpdate(c,b.data("param_name"),e,d)}a.target.oldValue=a.target.value});return d},addTextAreaHtml:function(c,b){_.has(c,"description");return'<a href="#" class="tdc-open-wpeditor" data-model_id="'+b.cid+'" data-mapped_parameter_name="'+c.param_name+'">Edit Content</a>'},addTextAreaRawHtml:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e=_.uniqueId("tdc_textarea_"),
h="",g="";if(_.has(c,"description")&&""!==c.description)if(""!==d)a='data-info-descr="'+c.description+'"';else{var f=jQuery("<div>"+c.description+"</div>");c.description===f.text()?h=' title="'+c.description+'" ':g='<div class="tdc-description">'+c.description+"</div>"}f="";_.has(c,"placeholder")&&""!==c.placeholder&&(f=' data-placeholder="'+c.placeholder+'" placeholder="'+c.placeholder+'" ');var n="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(n='data-enable-params="'+c.toggle_enable_params+
'"');var k="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(k='data-enable-params-reverse="1"');var l="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(l='data-enabled-by="'+c.toggle_enabled_by+'"');d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+n+" "+k+" "+l+">";d+='<div class="tdc-property-title"><span class="tdc-search-data"'+h+">"+c.heading+"</span></div>";d=d+'<div class="tdc-property"><textarea id="'+(e+'" class="tdc-textarea" '+
tdcSidebarPanel._getParamterDataAtts(c,b)+" "+f+">"+tdcSidebarPanel._getParameterCurrentValue(c,b)+"</textarea>");d=d+g+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");d+="</div>";jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,action:"tdc_ajax_decode_html_content",
content:tdcSidebarPanel._getParameterCurrentValue(c,b)}}).done(function(a,b,c){"success"===b&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):jQuery("#"+e).html(a.parsed_content).addClass("tdc-textarea-visible"))}).fail(function(a,b,c){});jQuery("body").on("keyup focusin","#"+e,function(a){var b=jQuery(a.target),c=tdcIFrameData.getModel(b.data("model_id"));if("focusin"!==a.type&&a.target.oldValue!==a.target.value){var d=window.btoa(encodeURIComponent(b.val())),e=window.btoa(encodeURIComponent(a.target.oldValue));
tdcSidebarController.onUpdate(c,b.data("param_name"),e,d)}a.target.oldValue=a.target.value});return d},addTextAreaRawHtmlAce:function(c,b){var d="",a="";_.has(c,"info_img")&&""!==c.info_img&&(d='data-info-img="'+c.info_img+'"');var e=_.uniqueId("tdc_textarea_");_.has(c,"description")&&""!==c.description&&""!==d&&(a='data-info-descr="'+c.description+'"');var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(h='data-enable-params="'+c.toggle_enable_params+'"');var g="";_.has(c,"toggle_enable_params_reverse")&&
!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');var f="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(f='data-enabled-by="'+c.toggle_enabled_by+'"');d='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+h+" "+g+" "+f+">";d=d+'<div class="tdc-property-editor_expand"><span></span><div class="tdc-editor-toggle tdc-html-ace-editor-expand-collapse"></div></div><div class="tdc-property tdc-raw-html-ace"><textarea id="'+(e+'" class="tdc-textarea" '+
tdcSidebarPanel._getParamterDataAtts(c,b)+">"+tdcSidebarPanel._getParameterCurrentValue(c,b)+"</textarea>");d=d+('<div id="'+e+'_ace_html" class="tdc-raw-html-ace-editor"></div></div><span class="tdc-param-name">')+(c.param_name+"</span>");d+="</div>";jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,
action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(c,b)}}).done(function(a,b,c){if("success"===b)if(_.isObject(a)&&_.has(a,"errors"))new tdcNotice.notice(a.errors,!0,!1);else{var d=jQuery("#"+e);d.html(a.parsed_content);var h=ace.edit(e+"_ace_html");h.$blockScrolling=Infinity;h.getSession().setValue(d.val());h.getSession().on("change",function(){var a=h.getSession().getValue(),b=tdcIFrameData.getModel(d.data("model_id")),c=d.data("param_name");d.val(a);a=window.btoa(encodeURIComponent(a));
tdcSidebarController.onUpdate(b,c,"",a)});h.setTheme("ace/theme/textmate");h.getSession().setMode("ace/mode/html");h.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,wrap:!0,indentedSoftWrap:!1,fontSize:11});var g=jQuery("#tdc-ace-editor"),f=jQuery(".tdc-property-textarea_raw_html_ace .tdc-raw-html-ace"),k=g.children(".content");jQuery("body").on("click",".tdc-html-ace-editor-expand-collapse",function(){jQuery(".tdc-property-textarea_raw_html_ace .tdc-property-editor_expand").addClass("disabled");
g.find("header .title").text("HTML Code Editor");g.addClass("tdc-html-ace-editor-expand");k.empty();k.append(jQuery("#"+e+"_ace_html"));g.show();tdcWindowFrame.setWindowFrame(g);h.resize();setTimeout(function(){h.focus()},100)}).on("click",".tdc-html-ace-editor-expand .close",function(){g.removeClass("tdc-html-ace-editor-expand");g.hide();f.append(jQuery("#"+e+"_ace_html"));jQuery(".tdc-property-textarea_raw_html_ace .tdc-property-editor_expand").removeClass("disabled");tdcWindowFrame.unsetWindowFrame(g);
h.resize()}).on("tdcWindowFrameResize",function(){h.resize(!0)})}}).fail(function(a,b,c){});return d},addEditorCss:function(c,b){var d=_.uniqueId("tdc_textarea_"),a="";_.has(c,"description")&&""!==c.description&&(a=' title="'+c.description+'" ');var e='<div class="'+tdcSidebarPanel._getParameterClasses(c)+'">';e+='<div class="tdc-property-title" data-status="loading" data-clean-title="'+c.heading+'"><span class="tdc-search-data tdc-open-csseditor"'+a+">"+c.heading+" (Loading ...)</span></div>";e=
e+'<div class="tdc-property"><textarea id="'+(d+'" class="tdc-textarea tdc-editor-css" '+tdcSidebarPanel._getParamterDataAtts(c,b)+' style="display: none">'+tdcSidebarPanel._getParameterCurrentValue(c,b)+"</textarea>");e=e+'</div><span class="tdc-param-name">'+(c.param_name+"</span>");e+="</div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackEditorCss)||tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackEditorCss);jQuery.ajax({timeout:1E4,type:"POST",
url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce);a=jQuery("#"+d).parent().siblings(".tdc-property-title");a.length&&a.data("status","loading")},dataType:"json",data:{post_id:window.tdcPostSettings.postId,action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(c,b)}}).done(function(b,c,e){"success"===c&&(_.isObject(b)&&_.has(b,
"errors")?new tdcNotice.notice(b.errors,!0,!1):(c=jQuery("#"+d),e=c.parent().siblings(".tdc-property-title"),c.html(b.parsed_content).addClass("tdc-textarea-visible"),e.length&&(e.data("status","ready"),e.html('<span class="tdc-search-data tdc-open-csseditor"'+a+">"+e.data("clean-title")+" (Ready)</span>"),"undefined"!==typeof e.data("open")&&(e.removeData("open"),e.trigger("click")))))}).fail(function(a,b,c){});var h=jQuery("#tdc-ace-editor"),g=h.children(".content");jQuery("body").on("click",".tdc-css-ace-editor-expand-collapse",
function(){jQuery(".tdc-property-editor_css .tdc-property-title").addClass("disabled");jQuery(".tdc-property-editor_css-title").addClass("disabled");h.find("header .title").text("CSS Code Editor");h.addClass("tdc-css-ace-editor-expand");g.empty();g.append(tdcSidebar.$_editorCss);h.show();tdcWindowFrame.setWindowFrame(h);tdcSidebar.editorCss.resize();setTimeout(function(){tdcSidebar.editorCss.focus()},100)}).on("click",".tdc-css-ace-editor-expand .close",function(){h.removeClass("tdc-css-ace-editor-expand");
h.hide();jQuery(".tdc-property-editor_css-title").after(tdcSidebar.$_editorCss);jQuery(".tdc-property-editor_css-title, .tdc-property-editor_css .tdc-property-title").removeClass("disabled");tdcWindowFrame.unsetWindowFrame(h);tdcSidebar.editorCss.resize()}).on("tdcWindowFrameResize",function(){tdcSidebar.editorCss.resize(!0)});return e},addSeparatorHorizontal:function(c,b){return'<div class="tdc-sidebar-horizontal-separator '+tdcSidebarPanel._getParameterClasses(c)+'"></div>'},addTextSeparatorHorizontal:function(c,
b){var d=b="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(d='data-enable-params="'+c.toggle_enable_params+'"');var a="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(a='data-enable-params-reverse="1"');var e="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(e='data-enabled-by="'+c.toggle_enabled_by+'"');return b+='<div class="tdc-sidebar-text-separator tdc-property-title '+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+e+'><span class="tdc-search-data">'+
c.heading+"</span></div>"},addFontHeader:function(c,b){var d=b="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(d='data-enable-params="'+c.toggle_enable_params+'"');var a="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(a='data-enable-params-reverse="1"');var e="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(e='data-enabled-by="'+c.toggle_enabled_by+'"');return b+='<div class="tdc-sidebar-font-header '+tdcSidebarPanel._getParameterClasses(c)+
'" '+d+" "+a+" "+e+'><span class="tdc-font-ico1" title="Font size"></span><span class="tdc-font-ico2" title="Line height (Use with px or a number that will be multiplied with the current font-size)"></span><span class="tdc-font-ico3" title="Font style"></span><span class="tdc-font-ico4" title="Font weight"></span><span class="tdc-font-ico5" title="Text transform"></span><span class="tdc-font-ico6" title="Letter spacing"></span></div>'},addFontTitle:function(c,b){var d="",a="",e="";_.has(c,"info_img")&&
""!==c.info_img&&(a='data-info-img="'+c.info_img+'"',_.has(c,"description")&&""!==c.description&&(e='data-info-descr="'+c.description+'"'));var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(h='data-enable-params="'+c.toggle_enable_params+'"');var g="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');var f="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(f='data-enabled-by="'+c.toggle_enabled_by+'"');
return d+='<div class="tdc-sidebar-font-title '+tdcSidebarPanel._getParameterClasses(c)+'" '+a+" "+e+" "+h+" "+g+" "+f+'><span class="tdc-search-data tdc-search-notice-font">'+tdcSidebarPanel._getParameterCurrentValue(c,b)+"</span></div>"},addFontSettings:function(c,b){var d="",a="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(a='data-enable-params="'+c.toggle_enable_params+'"');var e="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(e='data-enable-params-reverse="1"');
var h="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(h='data-enabled-by="'+c.toggle_enabled_by+'"');d+='<div class="tdc-font-manager-wrap '+tdcSidebarPanel._getParameterClasses(c)+'" '+a+" "+e+" "+h+">";d=d+'<div class="tdc-font-manager"><div title="Clear font settings" class="tdc-sidebar-font-reset" data-model_id="'+(b.cid+'" data-param_name="'+c.param_name+'">Reset font settings</div>');d+='<div title="Save font settings" class="tdc-sidebar-font-save" data-model_id="'+b.cid+'" data-param_name="'+
c.param_name+'">Save font settings</div>';d+='<div title="Load font settings" class="tdc-sidebar-font-load" data-model_id="'+b.cid+'" data-param_name="'+c.param_name+'">Load font settings</div>';return d+"</div></div>"},addShadowHeader:function(c,b){var d=b="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(d='data-enable-params="'+c.toggle_enable_params+'"');var a="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(a='data-enable-params-reverse="1"');
var e="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(e='data-enabled-by="'+c.toggle_enabled_by+'"');return b+='<div class="tdc-sidebar-shadow-header '+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+e+'><span class="tdc-shadow-ico1" title="Shadow size"></span><span class="tdc-shadow-ico2" title="Horizontal offset"></span><span class="tdc-shadow-ico3" title="Vertical offset"></span><span class="tdc-shadow-ico4" title="Shadow spread"></span><span class="tdc-shadow-ico5" title="Shadow color"></span></div>'},
addShadowTitle:function(c,b){var d="",a="",e="";_.has(c,"info_img")&&""!==c.info_img&&(a='data-info-img="'+c.info_img+'"',_.has(c,"description")&&""!==c.description&&(e='data-info-descr="'+c.description+'"'));var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(h='data-enable-params="'+c.toggle_enable_params+'"');var g="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');var f="";_.has(c,"toggle_enabled_by")&&""!==
c.toggle_enabled_by&&(f='data-enabled-by="'+c.toggle_enabled_by+'"');return d+='<div class="tdc-sidebar-shadow-title '+tdcSidebarPanel._getParameterClasses(c)+'" '+a+" "+e+" "+h+" "+g+" "+f+'><span class="tdc-search-data">'+tdcSidebarPanel._getParameterCurrentValue(c,b)+"</span></div>"},addSpotHeader:function(c,b){b='<div class="tdc-spot-header '+tdcSidebarPanel._getParameterClasses(c)+'">';b="undefined"!==typeof c.inline_spot&&!0===c.inline_spot?b+'<span class="tdc-inline-spot-header-title">Title</span><span class="tdc-inline-spot-header-paragraph">Par.</span><span class="tdc-inline-spot-header-color">Color</span><span class="tdc-inline-spot-header-align">Align</span>':
"undefined"!==typeof c.loop_spot&&!0===c.loop_spot?b+'<span class="tdc-loop-spot-header-title">Title</span><span class="tdc-loop-spot-header-paragraph">Repeat</span><span class="tdc-loop-spot-header-color">Color</span><span class="tdc-loop-spot-header-full">Full</span>':b+'<span class="tdc-spot-header-title">Title</span><span class="tdc-spot-header-color">Color</span>';return b+"</div>"},addFilterHeader:function(c,b){b='<div class="tdc-filter-header '+tdcSidebarPanel._getParameterClasses(c)+'">';
b="undefined"!==typeof c.tdb_filters&&!0===c.tdb_filters?b+'<span class="tdc-filter-header-slug">Slug</span>':b+'<span class="tdc-filter-header-name">Name</span>';return b+'<span class="tdc-filter-header-type" title="Select type">Type</span><span class="tdc-filter-header-multiple" title="Allow multiple selection">Multi</span></div>'},addPagesHeader:function(c,b){var d="undefined"!==typeof c.id_heading_txt?c.id_heading_txt:"URL";b='<div class="tdc-pages-header '+tdcSidebarPanel._getParameterClasses(c)+
'">';b=-1===tdcSidebarPanel._getParameterClasses(c).indexOf("tdc-pages-header-url")?b+('<span class="tdc-pages-header-id">'+d+"</span>"):b+('<span class="tdc-pages-header-url">'+d+"</span>");b+='<span class="tdc-pages-header-title">Title</span>';-1===tdcSidebarPanel._getParameterClasses(c).indexOf("no-icon")&&(b+='<span class="tdc-pages-header-icon">Icon</span>');return b+"</div>"},addPlansLimitHeader:function(c,b){var d=b="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&(d='data-enable-params="'+
c.toggle_enable_params+'"');var a="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(a='data-enable-params-reverse="1"');var e="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(e='data-enabled-by="'+c.toggle_enabled_by+'"');b+='<div class="tdc-plans-limit-header '+tdcSidebarPanel._getParameterClasses(c)+'" '+d+" "+a+" "+e+">";return b+'<span class="tdc-plans-limit-header-id">Plan IDs</span><span class="tdc-plans-limit-header-limit">Limit</span></div>'},addFilterTypeHeader:function(c,
b){b='<div class="tdc-filter-header '+tdcSidebarPanel._getParameterClasses(c)+'">';b+='<span class="tdc-filter-header-name">'+c.heading+"</span>";return b+'<span class="tdc-filter-header-type" title="Select filter type">Type</span></div>'},addFilterTitle:function(c,b){var d="",a="",e="";_.has(c,"info_img")&&""!==c.info_img&&(a='data-info-img="'+c.info_img+'"',_.has(c,"description")&&""!==c.description&&(e='data-info-descr="'+c.description+'"'));var h="";_.has(c,"toggle_enable_params")&&""!==c.toggle_enable_params&&
(h='data-enable-params="'+c.toggle_enable_params+'"');var g="";_.has(c,"toggle_enable_params_reverse")&&!0===c.toggle_enable_params_reverse&&(g='data-enable-params-reverse="1"');var f="";_.has(c,"toggle_enabled_by")&&""!==c.toggle_enabled_by&&(f='data-enabled-by="'+c.toggle_enabled_by+'"');return d+='<div class="tdc-sidebar-filter-title '+tdcSidebarPanel._getParameterClasses(c)+'" '+a+" "+e+" "+h+" "+g+" "+f+'><span class="tdc-search-data">'+tdcSidebarPanel._getParameterCurrentValue(c,b)+"</span></div>"},
addSearchSectionHeader:function(c,b){b='<div class="tdc-search-section-header '+tdcSidebarPanel._getParameterClasses(c)+'">';b+='<span class="tdc-search-section-header-title">Section title</span><span class="tdc-search-section-header-tax">Taxonomy</span>';-1===tdcSidebarPanel._getParameterClasses(c).indexOf("no-level")&&(b+='<span class="tdc-search-section-header-level">Level</span>');return b+"</div>"},addClearfix:function(c,b){return'<div class="clearfix"></div>'},updateTextfieldResponsiveValues:function(c,
b,d){"undefined"===typeof window.tdcResponsiveValues[c]?""!==b&&(window.tdcResponsiveValues[c]={},window.tdcResponsiveValues[c][d]={viewportName:b}):""===b?delete window.tdcResponsiveValues[c][d]:window.tdcResponsiveValues[c][d]=b;b=_.allKeys(window.tdcResponsiveValues[c]);return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[c].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[c])):""},updateDropdownResponsiveValues:function(c,b,d){"undefined"===
typeof window.tdcResponsiveValues[c]?(window.tdcResponsiveValues[c]={},window.tdcResponsiveValues[c][d]={},window.tdcResponsiveValues[c][d][d]=b):window.tdcResponsiveValues[c][d]=b;b=_.allKeys(window.tdcResponsiveValues[c]);return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[c].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[c])):""},updateCheckboxResponsiveValues:function(c,b,d){"undefined"===typeof window.tdcResponsiveValues[c]?(window.tdcResponsiveValues[c]=
{},window.tdcResponsiveValues[c][d]={viewportName:b}):window.tdcResponsiveValues[c][d]=b;b=_.allKeys(window.tdcResponsiveValues[c]);return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[c].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[c])):""},deleteResponsiveValue:function(c,b){"undefined"!==typeof window.tdcResponsiveValues[c]&&delete window.tdcResponsiveValues[c][b];b=_.allKeys(window.tdcResponsiveValues[c]);return 1===b.length&&"all"===
b[0]?window.tdcResponsiveValues[c].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[c])):""},deleteResponsiveValues:function(c){"undefined"!==typeof window.tdcResponsiveValues[c]&&(window.tdcResponsiveValues[c]={})},getCurrentResponsiveValue:function(c,b){if("undefined"!==typeof window.tdcResponsiveValues[c])return window.tdcResponsiveValues[c][b]},setViewportCurrentResponsiveValue:function(c){var b=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),
tdcSidebar.currentViewportSettings.name),d=c.closest(".tdc-property-responsive");if(d.hasClass("tdc-property-textfield-responsive")){var a="";_.isUndefined(c.data("placeholder"))||(a=c.data("placeholder"));c.attr("placeholder",a);_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),"all"),_.isUndefined(b)?c.val(""):(c.val(b),c.attr("placeholder",b),d.addClass("tdc-css-inherited"))):(c.val(b),d.removeClass("tdc-css-inherited"))}else if(d.hasClass("tdc-property-checkbox-responsive"))a=
d.find(".tdc-inherit-checkbox"),_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),"all"),_.isUndefined(b)?c.prop("checked",!1):(""===b?c.prop("checked",!1):c.prop("checked","checked"),d.addClass("tdc-css-inherited")),a.hide()):(""===b?c.prop("checked",!1):c.prop("checked","checked"),d.removeClass("tdc-css-inherited"),"all"===tdcSidebar.currentViewportSettings.name?a.hide():a.show());else if(d.hasClass("tdc-property-dropdown-responsive")){a=d.find(".tdc-inherit-select");
var e=c.attr("type");_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),"all"),_.isUndefined(b)?"undefined"!==typeof e&&"radio"===e?c.each(function(a){var b=jQuery(this);"radio"===b.attr("type")&&(0===a?b.prop("checked",!0):b.prop("checked",!1))}):c.find("option:selected").removeAttr("selected").find("option:first").attr("selected","selected"):("undefined"!==typeof e&&"radio"===e?c.each(function(a){a=jQuery(this);"radio"===a.attr("type")&&(a.val()===b?a.prop("checked",!0):
a.prop("checked",!1))}):c.val(b),d.addClass("tdc-css-inherited")),a.hide()):("undefined"!==typeof e&&"radio"===e?c.each(function(a){a=jQuery(this);"radio"===a.attr("type")&&(a.val()===b?a.prop("checked",!0):a.prop("checked",!1))}):c.val(b),d.removeClass("tdc-css-inherited"),"all"===tdcSidebar.currentViewportSettings.name?a.hide():a.show())}else if(d.hasClass("tdc-property-range-responsive"))a="",_.isUndefined(c.data("placeholder"))||(a=c.data("placeholder")),e=c.next('input[type="text"]'),e.attr("placeholder",
a),_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),"all"),_.isUndefined(b)?(c.val(""),e.val("")):(c.val(b),e.val(b),e.attr("placeholder",b),d.addClass("tdc-css-inherited"))):(c.val(b),e.val(b),d.removeClass("tdc-css-inherited"));else if(d.hasClass("tdc-property-range_multiple-responsive")){a=tdcIFrameData.getModel(c.data("model_id"));var h=c.data("param_name"),g=window.tdcAdminSettings.mappedShortcodes[a.attributes.tag];a=[];for(var f=e="",n=0;n<g.params.length;n++)if(h===
g.params[n].param_name){h=g.params[n].tdc_values;for(var k in h)h.hasOwnProperty(k)&&(a.push(h[k].unit),""===e||""===f)&&(e=h[k].value,f=h[k].unit);break}_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),"all"),_.isUndefined(b)&&(c.data("range_value",e),c.data("range_unit",f),c.val(e),k=d.find('input[type="radio"][data-unit_value="'+f+'"]'),n=k.data("unit"),h=c.data("min_"+n),f=c.data("max_"+n),n=c.data("step_"+n),g=c.get(0),k.prop("checked",!0),g.min=h,g.max=f,g.step=n,
g.value=e,k.data("last_value",e),d.find('input[type="text"]').val(e)),"all"===tdcSidebar.currentViewportSettings.name?d.removeClass("tdc-css-inherited"):d.addClass("tdc-css-inherited")):d.removeClass("tdc-css-inherited");if(!_.isUndefined(b)){e=[];for(n=0;n<a.length&&!(e=b.split(a[n]),1<e.length);n++);e.length&&(e=e[0],f=a[n],c.data("range_value",e),c.data("range_unit",f),c.val(e),k=d.find('input[type="radio"][data-unit_value="'+f+'"]'),n=k.data("unit"),h=c.data("min_"+n),f=c.data("max_"+n),n=c.data("step_"+
n),g=c.get(0),k.prop("checked",!0),g.min=h,g.max=f,g.step=n,g.value=e,k.data("last_value",e),d.find('input[type="text"]').val(e))}}},showShortcodeFromPath:function(c){if(!_.isUndefined(c)){c=c.toString().split("_");var b;c.forEach(function(a,c){""!==a&&(_.isUndefined(b)?b=tdcIFrameData.tdcTopCollection.at(a):(c=b.get("childCollection"),!_.isUndefined(c)&&c.length>a&&(b=c.at(a))))});if(!_.isUndefined(b)){var d=b.get("blockUid");if(!_.isUndefined(d)){var a=tdcAdminIFrameUI.getLiveIframe();c=a.contents().find("#"+
d);c.length||(c=a.contents().find('[data-td-block-uid="'+d+'"]'));c.length&&(a.contents().scrollTop(c.offset().top-100),d={},tdcOperationUI.inZone(c)?tdcOperationUI.inRow(c)?tdcOperationUI.inColumn(c)?tdcOperationUI.inInnerRow(c)?tdcOperationUI.inInnerColumn(c)?(d.$currentZone=tdcOperationUI.inZone(c),d.$currentRow=tdcOperationUI.inRow(c),d.$currentColumn=tdcOperationUI.inColumn(c),d.$currentInnerRow=tdcOperationUI.inInnerRow(c),d.$currentInnerColumn=tdcOperationUI.inInnerColumn(c),d.$currentElement=
c):(d.$currentZone=tdcOperationUI.inZone(c),d.$currentRow=tdcOperationUI.inRow(c),d.$currentColumn=tdcOperationUI.inColumn(c),d.$currentInnerRow=tdcOperationUI.inInnerRow(c),d.$currentInnerColumn=c):(d.$currentZone=tdcOperationUI.inZone(c),d.$currentRow=tdcOperationUI.inRow(c),d.$currentColumn=tdcOperationUI.inColumn(c),d.$currentInnerRow=c):(d.$currentZone=tdcOperationUI.inZone(c),d.$currentRow=tdcOperationUI.inRow(c),d.$currentColumn=c):(d.$currentZone=tdcOperationUI.inZone(c),d.$currentRow=c):
d.$currentZone=c,tdcSidebar._currentModel=b,c.data("model_id",b.cid),tdcSidebar.setSettings(d,!0,b))}}}}}})();var tdcSidebar;
(function(f,c,b){tdcSidebar={$_sidebar:b,$_editRow:b,$_editColumn:b,$_editInnerRow:b,$_editInnerColumn:b,_currentTabId:b,_currentModel:b,_$currentElement:b,_$currentZone:b,_$currentRow:b,_$currentColumn:b,_$currentInnerRow:b,_$currentInnerColumn:b,$_currentElementHead:b,$_currentElementSiblings:b,$_inspector:b,$_sidebarInfo:b,$_sidebarClosePage:b,$_sidebarBullet:b,$_sidebarClose:b,$_sidebarOpen:b,$_sidebarSearch:b,$_liveIframeWrapper:b,$_iconSelector:b,$_gradient:b,$_gradientLoader:b,$_palette:b,
$_paletteLoader:b,$_fontList:b,editorCss:b,$editorTextarea:b,$_editorCss:b,$_buttonZone:b,_iconSelectorOuterHTML:b,_gradientOuterHTML:b,_paletteOuterHTML:b,_fontListOuterHTML:b,_editorCssOuterHTML:b,_forcedHeaderZone:b,mouseOverSidebar:!1,currentViewportSettings:{name:"all",settings:b},init:function(){function d(b){console.log(b.input.val()+" : "+b.initialTitle);b.input.val()===b.initialTitle?a({templateEl:b.templateEl,templateTitle:b.templateTitle,initialTitle:b.initialTitle}):(b.input.attr("disabled",
"disabled"),b.templateTitle.find(".tdc-template-el-title-submit").remove(),b.templateEl.addClass("tdc-template-el-renaming-saving"),f.ajax({type:"POST",url:td_ajax_url,data:{action:"tdb_change_template_name",template_id:b.templateId,template_title:b.input.val(),_nonce:window.tdb_globals.wpRestNonce},success:function(a,c,d){a=f.parseJSON(a);"undefined"!==typeof a.template_id&&(b.templateEl.removeClass("tdc-template-el-renaming-saving"),b.templateTitle.html(a.template_title),b.templateTitle.removeData("title"),
b.templateEl.removeClass("tdc-template-el-renaming"))},error:function(a,b,c){}}))}function a(a){a.templateTitle.html(a.initialTitle);a.templateTitle.removeData("title");a.templateEl.removeClass("tdc-template-el-renaming")}tdcSidebar.$_sidebar=f("#tdc-sidebar");tdcSidebar.$_liveIframeWrapper=f("#tdc-live-iframe-wrapper");tdcSidebar.$_editZone=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-zone");tdcSidebar.$_editZone.data("name","Zone");tdcSidebar.$_editRow=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-row");
tdcSidebar.$_editRow.data("name","Row");tdcSidebar.$_editColumn=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-column");tdcSidebar.$_editColumn.data("name","Column");tdcSidebar.$_editInnerRow=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-inner-row");tdcSidebar.$_editInnerRow.data("name","Inner Row");tdcSidebar.$_editInnerColumn=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-inner-column");tdcSidebar.$_editInnerColumn.data("name","Inner Column");tdcSidebar.$_currentElementHead=tdcSidebar.$_sidebar.find(".tdc-current-element-head:first");
tdcSidebar.$_currentElementSiblings=tdcSidebar.$_sidebar.find(".tdc-current-element-siblings:first");tdcSidebar.$_inspector=tdcSidebar.$_sidebar.find(".tdc-inspector:first");tdcSidebar.$_sidebarInfo=tdcSidebar.$_sidebar.find(".tdc-sidebar-info:first");tdcSidebar.$_sidebarClosePage=tdcSidebar.$_sidebar.find(".tdc-close-page:first");tdcSidebar.$_sidebarBullet=tdcSidebar.$_sidebar.find(".tdc-bullet:first");tdcSidebar.$_sidebarClose=tdcSidebar.$_sidebar.find(".tdc-sidebar-close:first");tdcSidebar.$_sidebarOpen=
tdcSidebar.$_sidebar.siblings(".tdc-sidebar-open:first");tdcSidebar.$_sidebarSearch=tdcSidebar.$_sidebar.find(".tdc-sidebar-modal-search:first > input");tdcSidebar.$_iconSelector=tdcSidebar.$_sidebar.find("#tdc-icon-selector");tdcSidebar._iconSelectorOuterHTML=tdcSidebar.$_iconSelector.get(0).outerHTML;tdcSidebar.$_gradient=tdcSidebar.$_sidebar.find("#tdc-gradient");tdcSidebar._gradientOuterHTML=tdcSidebar.$_gradient.get(0).outerHTML;tdcSidebar.$_palette=tdcSidebar.$_sidebar.find("#tdc-palette");
tdcSidebar._paletteOuterHTML=tdcSidebar.$_palette.get(0).outerHTML;tdcSidebar._fontListOuterHTML=tdcSidebar.$_sidebar.find("#tdc-font-list").get(0).outerHTML;tdcSidebar.$_editorCss=tdcSidebar.$_sidebar.find("#tdc-editor-css");tdcSidebar._editorCssOuterHTML=tdcSidebar.$_editorCss.get(0).outerHTML;tdcSidebar.$_buttonZone=tdcSidebar.$_sidebar.find(".tdc-zone-button");tdcSidebar.$_tdcZone=f("#tdc-zone");tdcSidebar.$_headerTemplateZones=tdcSidebar.$_tdcZone.find(".tdc-header-template-zones");tdcSidebar.$_headerTemplateList=
tdcSidebar.$_tdcZone.find(".tdc-header-template-list");tdcSidebar.$_footerTemplateList=tdcSidebar.$_tdcZone.find(".tdc-footer-template-list");tdcSidebar.$_headerDesktopTemplateList=tdcSidebar.$_tdcZone.find(".tdc-templates-header-desktop-list");tdcSidebar.$_footerDesktopTemplateList=tdcSidebar.$_tdcZone.find(".tdc-templates-footer-desktop-list");tdcSidebar.$_headerTemplateCurrent=tdcSidebar.$_tdcZone.find(".tdc-header-template-current");tdcSidebar.$_footerTemplateCurrent=tdcSidebar.$_tdcZone.find(".tdc-footer-template-current");
tdcState.isMobileComposer()&&(tdcSidebar.currentViewportSettings={name:"phone",settings:b});window.tdcAdminSettings.tdbHeaderTemplates.forEach(function(a){var b=a.val.replace("tdb_template_","");tdcSidebar.$_headerTemplateList.append('<div class="tdc-template-el '+(b==window.tdcPostSettings.headerTemplateId?"tdb-current":"")+'" data-value="'+a.val+'"><div class="tdc-template-el-title tdc-template-header-name">'+a.text+'</div><div class="tdc-template-el-wrap"><div class="tdc-template-el-icon"><div class="tdc-template-el-options"><div title="Rename template" class="tdc-template-el-edit">Rename</div><div title="Duplicate template" class="tdc-template-el-duplicate">Duplicate</div><div title="Delete template" class="tdc-template-el-delete">Delete</div></div></div></div><div class="tdc-template-el-global" title="Set as'+
(tdcState.isMobileComposer()?" mobile ":" ")+'Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-header-global"><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>')});tdcSidebar.$_headerTemplateList.find(".tdc-template-el").each(function(){var a=f(this),b=a.data("value");b===window.tdcAdminSettings.options.global_header_template||"no_header"===b&&""===window.tdcAdminSettings.options.global_header_template?
a.find(".tdc-template-header-global:first").attr("checked","checked"):(b===window.tdcAdminSettings.options.global_header_template_mobile||"no_header"===b&&""===window.tdcAdminSettings.options.global_header_template_mobile)&&a.find(".tdc-template-header-global:first").attr("checked","checked")});window.tdcAdminSettings.tdbHeaderDesktopTemplates.forEach(function(a){tdcSidebar.$_headerDesktopTemplateList.append('<div class="tdc-template-desktop-el" data-template-id="'+a.val.replace("tdb_template_","")+
'" data-template-type="header"><div class="tdc-template-el-title tdc-template-header-name">'+a.text+"</div></div>")});window.tdcAdminSettings.tdbFooterTemplates.forEach(function(a){var b=a.val.replace("tdb_template_","");tdcSidebar.$_footerTemplateList.append('<div class="tdc-template-el '+(b==window.tdcPostSettings.footerTemplateId?"tdb-current":"")+'" data-value="'+a.val+'"><div class="tdc-template-el-title tdc-template-footer-name">'+a.text+'</div><div class="tdc-template-el-wrap"><div class="tdc-template-el-icon"><div class="tdc-template-el-options"><div title="Rename template" class="tdc-template-el-edit">Rename</div><div title="Duplicate template" class="tdc-template-el-duplicate">Duplicate</div><div title="Delete template" class="tdc-template-el-delete">Delete</div></div></div></div><div class="tdc-template-el-global" title="Set as'+
(tdcState.isMobileComposer()?" mobile ":" ")+'Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-footer-global"><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>')});tdcSidebar.$_footerTemplateList.find(".tdc-template-el").each(function(){var a=f(this),b=a.data("value");b===window.tdcAdminSettings.options.global_footer_template||"no_footer"===b&&""===window.tdcAdminSettings.options.global_footer_template?
a.find(".tdc-template-footer-global:first").attr("checked","checked"):(b===window.tdcAdminSettings.options.global_footer_template_mobile||"no_footer"===b&&""===window.tdcAdminSettings.options.global_footer_template_mobile)&&a.find(".tdc-template-footer-global:first").attr("checked","checked")});window.tdcAdminSettings.tdbFooterDesktopTemplates.forEach(function(a){tdcSidebar.$_footerDesktopTemplateList.append('<div class="tdc-template-desktop-el" data-template-id="'+a.val.replace("tdb_template_","")+
'" data-template-type="footer"><div class="tdc-template-el-title tdc-template-footer-name">'+a.text+"</div></div>")});tdcState.isGlobalHeaderTemplate()?tdcSidebar.$_headerTemplateList.find(".tdc-template-el:first").addClass("tdb-current"):tdcState.isNoHeader()?tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value="no_header"]').addClass("tdb-current"):tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value="tdb_template_'+tdcState.getHeaderTemplateId()+'"]').addClass("tdb-current");
tdcSidebar.setCurrentHeaderTemplate();tdcState.isGlobalFooterTemplate()?tdcSidebar.$_footerTemplateList.find(".tdc-template-el:first").addClass("tdb-current"):tdcState.isNoFooter()?tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value="no_footer"]').addClass("tdb-current"):tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value="tdb_template_'+tdcState.getFooterTemplateId()+'"]').addClass("tdb-current");tdcSidebar.setCurrentFooterTemplate();tdcSidebar.$_buttonZone.click(function(){tdcMain.getContentModified()?
tdConfirm.showModal("TagDiv Composer detected unsaved changes?",tdcSidebar,function(){tb_remove();window.tdbVueManager.router.push({name:"loadManager"})},b,"Do you want to continue? You can loose that unsaved work. Better save it."):window.tdbVueManager.router.push({name:"loadManager",params:{templateId:window.tdcPostSettings.postId,templateType:window.tdcPostSettings.tdbTemplateType}})});f("body").on("click",".tdc-zone-icon",function(a){a=f(this).parent();var c=a.data("type");tdcSidebar.$_tdcZone.find(".tdc-zone").removeClass("tdc-zone-active");
a.addClass("tdc-zone-active");"tdc_header_desktop_sticky"===c||"tdc_header_mobile_sticky"===c?(tdcIFrameData.activateZone(c,!0,!0),a.addClass("tdc-zone-sticky-active"),a.removeClass("tdc-zone-sticky-inactive"),"tdc_header_desktop_sticky"===c?a.hasClass("tdc-zone-sticky-active")?tdcState.setHeaderSticky():tdcState.unsetHeaderSticky():a.hasClass("tdc-zone-sticky-active")?tdcState.setMobileHeaderSticky():tdcState.unsetMobileHeaderSticky()):tdcIFrameData.activateZone(c,b,!0)}).on("click",".tdc-zone-sticky-info",
function(a){a=f(this).parent();var c=a.data("type");tdcSidebar.$_tdcZone.find(".tdc-zone").removeClass("tdc-zone-active");a.addClass("tdc-zone-active");"tdc_header_desktop_sticky"===c||"tdc_header_mobile_sticky"===c?(a.hasClass("tdc-zone-sticky-inactive")?tdcIFrameData.activateZone(c,!0,!0):tdcIFrameData.activateZone(c,!1),a.toggleClass("tdc-zone-sticky-active"),a.toggleClass("tdc-zone-sticky-inactive"),"tdc_header_desktop_sticky"===c?a.hasClass("tdc-zone-sticky-active")?tdcState.setHeaderSticky():
tdcState.unsetHeaderSticky():a.hasClass("tdc-zone-sticky-active")?tdcState.setMobileHeaderSticky():tdcState.unsetMobileHeaderSticky()):tdcIFrameData.activateZone(c,b,!0)}).find(".tdc-zone").each(function(){var a=f(this),b=a.data("type");if(!c.isUndefined(b))switch(b){case "tdc_header_desktop_sticky":tdcState.isHeaderSticky()?a.addClass("tdc-zone-sticky-active").removeClass("tdc-zone-sticky-inactive"):a.addClass("tdc-zone-sticky-inactive").removeClass("tdc-zone-sticky-active");break;case "tdc_header_mobile_sticky":tdcState.isMobileHeaderSticky()?
a.addClass("tdc-zone-sticky-active").removeClass("tdc-zone-sticky-inactive"):a.addClass("tdc-zone-sticky-inactive").removeClass("tdc-zone-sticky-active")}});f("body").on("click",".tdc-header-template-list .tdc-template-el",function(a){var d=f(this),e=f(a.target);if(e.hasClass("tdc-template-header-name"))tdcSidebar.$_headerTemplateCurrent.html(d.find(".tdc-template-header-name").html()),tdcSidebar.$_headerTemplateList.toggle(),a=d.data("value").replace("tdb_template_",""),tdcSidebar.getHeaderTemplate(a,
{keepGlobalTemplateState:!1,saveHeaderTemplate:!0});else if(e.hasClass("tdc-template-el-global-label"))e.parents(".tdc-template-el-global").addClass("tdc-template-header-global-current"),d.closest(".tdc-header-template-list").find(".tdc-template-el-global").each(function(){f(this).hasClass("tdc-template-header-global-current")||f(this).find(".tdc-template-header-global").removeAttr("checked")}),e.parents(".tdc-template-el-global").removeClass("tdc-template-header-global-current"),e.siblings(".tdc-template-header-global").attr("checked",
"checked"),a={},tdcState.isMobileComposer()?a.global_header_template_mobile="no_header"===d.data("value")?"":d.data("value"):a.global_header_template="no_header"===d.data("value")?"":d.data("value"),""!==tdcState.getLang()&&(a.lang=tdcState.getLang()),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/update_options","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:{options:a}}).done(function(a,
b,c){tdcState.isGlobalHeaderTemplate()&&tdcSidebar.getHeaderTemplate(d.data("value").replace("tdb_template_",""),{keepGlobalTemplateState:!0})}).fail(function(a,b,c){});else if(e.hasClass("tdb-load-mobile-template")){var h=e.data("template-id");c.isUndefined(h)||window.tdbVue.router.push({name:"loadRoute",params:{wp_type:"header",templateType:"Header",assign_mobile_to_template:h.toString(),force_parent_template_type:"header",force_parent_template_name:"header"}})}else e.hasClass("tdb-create-mobile-template")&&
(h=e.data("template-id"),tdConfirm.modal({caption:"Create Mobile Template",objectContext:window,callbackYes:function(){var a=f("#tdb-new-template-name"),d=f("#tdb-copy-content");f.ajax({type:"POST",url:td_ajax_url,data:{action:"tdb_create_mobile_template",template_id:h,template_title:a.val(),template_type:"header",copyContent:d.is(":checked")?"1":"0",_nonce:window.tdb_globals.wpRestNonce},success:function(a,d,g){a=f.parseJSON(a);if("undefined"!==typeof a.mobile_template_id&&(tdConfirm.close(),d=e.closest(".tdb-template-el-mobile-wrap"),
d.length&&(g=d.find(".tdb-template-el-mobile:first"),d.find(".tdb-template-el-mobile-btns:first").data("mobile-template-id",a.mobile_template_id),g.html('<span class="tdb-template-el-mobile-active">Yes</span>')),!c.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject.tdbGetMobileTemplates))){var k;f("#tdb-mobile-templates").length&&(k=document);tdcAdminIFrameUI._liveIframeWindowObject.tdbGetMobileTemplates("header",h,b,b,b,k,a.mobile_template_id)}},error:function(a,b,c){}})},htmlInfoContent:'Enter the mobile template name: <input id="tdb-new-template-name" type="text" value=""onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em><div class="tdb-form-check"><input type="checkbox" class="form-check-input" id="tdb-copy-content"><label class="form-check-label" for="tdb-copy-content"><span class="tdb-check"></span><span class="tdb-check-title">Copy content</span></label></div>',
textYes:"Create",textNo:"Cancel"}))}).on("click",".tdc-template-el-delete",function(a){var b=f(this).closest(".tdc-template-el");a=b.data("value").replace("tdb_template_","");f.ajax({type:"POST",url:td_ajax_url,data:{action:"tdb_delete_template",template_id:a,_nonce:window.tdb_globals.wpRestNonce},success:function(a,c,d){a=f.parseJSON(a);"undefined"!==typeof a.template_id?(a=b.closest(".tdc-template-list"),b.hasClass("tdb-current")&&a.length&&(a.hasClass("tdc-header-template-list")||a.hasClass("tdc-footer-template-list"))&&
a.find("> .tdc-template-el:first-child > .tdc-template-el-title").click(),b.remove()):console.log("tdb_delete_template ( delete template ) - INVALID RESPONSE",a)},error:function(a){console.log("tdb_delete_template ( delete template ) - ERROR",a)}})}).on("click",".tdc-template-el-edit",function(a){a.preventDefault();var b=f(this);a=b.closest(".tdc-template-list");b=b.closest(".tdc-template-el");var c=b.find(".tdc-template-el-title:first");"undefined"===typeof c.data("title")&&(a.find(".tdc-template-el-title").each(function(a,
b){a=f(b);b=a.data("title");"undefined"!==typeof b&&(a.html(b),a.removeData("title"))}),b.addClass("tdc-template-el-renaming"),c.data("title",c.html()),c.html('<input class="tdc-template-el-title-input" type="text" value="'+c.html()+'"><div class="tdc-template-el-title-btns"><i class="tdc-template-el-title-save td-icon-check" title="Save"></i><i class="tdc-template-el-title-cancel td-icon-modal-close" title="Cancel"></i></div>'),c.find("input").focus().select())}).on("keyup",".tdc-template-el-title-input",
function(b){var c=f(this),e=c.closest(".tdc-template-el"),h=e.find(".tdc-template-el-title:first"),k=e.data("value").replace("tdb_template_",""),l=h.data("title");27===b.which?a({templateEl:e,templateTitle:h,initialTitle:l}):13===b.which&&d({input:c,templateEl:e,templateTitle:h,templateId:k,initialTitle:l})}).on("click",".tdc-template-el-title-save",function(a){a.preventDefault();a=f(this).closest(".tdc-template-el");var b=a.find(".tdc-template-el-title:first"),c=b.find(".tdc-template-el-title-input"),
e=a.data("value").replace("tdb_template_",""),h=b.data("title");d({input:c,templateEl:a,templateTitle:b,templateId:e,initialTitle:h})}).on("click",".tdc-template-el-title-cancel",function(b){b.preventDefault();b=f(this).closest(".tdc-template-el");var c=b.find(".tdc-template-el-title:first"),d=c.data("title");a({templateEl:b,templateTitle:c,initialTitle:d})}).on("click",".tdc-template-el-duplicate",function(a){a.preventDefault();var b=f(this);a=b.closest(".tdc-template-list");var c=b.closest(".tdc-template-el");
b=c.find(".tdc-template-el-title:first");var d=a.hasClass("tdc-header-template-list")?"header":"footer";a=c.data("value").replace("tdb_template_","");tdbApi.run({wpNonce:window.tdb_globals.wpRestNonce,cloudEndPoint:"td-cloud-library/new_template",post:{postId:a,templateType:d,templateName:b.html(),duplicateTemplate:!0},done:function(a){"header"===d&&tdcSidebar.updateHeaderTemplates();"footer"===d&&tdcSidebar.updateFooterTemplates()},error:function(a){console.log("td-cloud-library/new_template ( duplicate template ) - ERROR",
a)}});f(".tdb-template-el-title-input").trigger("change")}).on("click",".tdc-templates-header-desktop-list .tdc-template-desktop-el",function(a){var c=f(this);tdConfirm.modal({caption:"Create Mobile Header Template",objectContext:tdcSidebar,callbackYes:function(){var a=f("#tdb-new-template-name"),d=c.data("template-id");f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/create_mobile_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},cache:!1,dataType:"json",statusCode:{404:function(){console.log("ERROR: 404 not found")},500:function(){console.log("ERROR: 500 server error")}},data:{newTemplateName:a.val(),templateID:d,templateType:"header",copyContent:"1"}}).done(function(c,d,e){console.group("API: td-composer/create_mobile_template");console.log("Status: ",d);console.log("Reply: ",c);console.groupEnd();null===c?(c={type:"AJAX ERROR",message:"Empty response received from server.",debug_data:{endpoint:"td-composer/create_mobile_template",
request:e}},console.log("td-composer/create_mobile_template - ERROR",c),a.siblings("#tdb-modal-notice").text(c.type+": "+c.message).fadeIn(50)):c.error!==b?(console.log("td-composer/create_mobile_template - ERROR",c.error),a.siblings("#tdb-modal-notice").text(c.error).fadeIn(50)):(tb_remove(),window.tdcPostSettings.headerTemplateId=c.mobile_template_id,window.tdcAdminSettings.tdbHeaderTemplates.push({text:c.template_title,val:"tdb_template_"+c.mobile_template_id}),d=tdcSidebar.$_headerTemplateList.find(".tdc-templates-header"),
d.length||(d=tdcSidebar.$_headerTemplateList.find(".tdc-templates-header-desktop")),d.length&&(f('<div class="tdc-template-el" data-value="tdb_template_'+c.mobile_template_id+'"><div class="tdc-template-el-title tdc-template-header-name">'+c.template_title+'</div><div class="tdc-template-el-global" title="Set as mobile Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-header-global"><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>').insertAfter(d),
tdcSidebar.getHeaderTemplate(c.mobile_template_id,{keepGlobalTemplateState:!1,saveHeaderTemplate:!0})))}).fail(function(a,c,d){console.log("td-composer/create_mobile_template - ERROR",{type:"AJAX ERROR",message:"Invalid reply from server endpoint.",debug_data:{endpoint:"td-composer/create_mobile_template",request:a}});a.responseText!==b?console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a.responseText):
console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a,c,d)})},htmlInfoContent:'Enter the template name: <input id="tdb-new-template-name" type="text" value="" onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em><div class="tdb-form-check"><input type="checkbox" class="form-check-input" id="tdb-copy-content" checked disabled><label class="form-check-label" for="tdb-copy-content"><span class="tdb-check"></span><span class="tdb-check-title">Copy content</span></label></div>',
textYes:"Create",textNo:"Cancel"})}).on("click",".tdc-templates-footer-desktop-list .tdc-template-desktop-el",function(a){var c=f(this);tdConfirm.modal({caption:"Create Mobile Footer Template",objectContext:tdcSidebar,callbackYes:function(){var a=f("#tdb-new-template-name"),d=c.data("template-id");f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/create_mobile_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
cache:!1,dataType:"json",statusCode:{404:function(){console.log("ERROR: 404 not found")},500:function(){console.log("ERROR: 500 server error")}},data:{newTemplateName:a.val(),templateID:d,templateType:"footer",copyContent:"1"}}).done(function(c,d,e){console.group("API: td-composer/create_mobile_template");console.log("Status: ",d);console.log("Reply: ",c);console.groupEnd();null===c?(c={type:"AJAX ERROR",message:"Empty response received from server.",debug_data:{endpoint:"td-composer/create_mobile_template",
request:e}},console.log("td-composer/create_mobile_template - ERROR",c),a.siblings("#tdb-modal-notice").text(c.type+": "+c.message).fadeIn(50)):c.error!==b?(console.log("td-composer/create_mobile_template - ERROR",c.error),a.siblings("#tdb-modal-notice").text(c.error).fadeIn(50)):(tb_remove(),window.tdcPostSettings.footerTemplateId=c.mobile_template_id,window.tdcAdminSettings.tdbFooterTemplates.push({text:c.template_title,val:"tdb_template_"+c.mobile_template_id}),d=tdcSidebar.$_footerTemplateList.find(".tdc-templates-header"),
d.length||(d=tdcSidebar.$_footerTemplateList.find(".tdc-templates-header-desktop")),d.length&&f('<div class="tdc-template-el" data-value="tdb_template_'+c.mobile_template_id+'"><div class="tdc-template-el-title tdc-template-footer-name">'+c.template_title+'</div><div class="tdc-template-el-wrap"><div class="tdc-template-el-icon"><div class="tdc-template-el-options"><div title="Rename template" class="tdc-template-el-edit">Rename</div><div title="Duplicate template" class="tdc-template-el-duplicate">Duplicate</div><div title="Delete template" class="tdc-template-el-delete">Delete</div></div></div></div><div class="tdc-template-el-global" title="Set as mobile Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-footer-global"><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>').insertAfter(d),
tdcSidebar.getFooterTemplate(c.mobile_template_id,{keepGlobalTemplateState:!1,saveFooterTemplate:!0}))}).fail(function(a,c,d){console.log("td-composer/create_mobile_template - ERROR",{type:"AJAX ERROR",message:"Invalid reply from server endpoint.",debug_data:{endpoint:"td-composer/create_mobile_template",request:a}});a.responseText!==b?console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a.responseText):
console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a,c,d)})},htmlInfoContent:'Enter the template name: <input id="tdb-new-template-name" type="text" value="" onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em><div class="tdb-form-check"><input type="checkbox" class="form-check-input" id="tdb-copy-content" checked disabled><label class="form-check-label" for="tdb-copy-content"><span class="tdb-check"></span><span class="tdb-check-title">Copy content</span></label></div>',
textYes:"Create",textNo:"Cancel"})}).on("click",".tdc-header-template-current",function(a){tdcSidebar.$_headerTemplateList.toggle()}).on("click","#tdb-mobile-templates .tdb-template-el-mobile-list-el",function(a){a=f(this);var b=f("#tdb-mobile-templates"),d=a.data("template-id"),e=a.data("mobile-template-id"),h=b.closest(".tdb-template-el-mobile-btns"),l=a.closest(".tdb-template-el-mobile-wrap");f.ajax({type:"POST",url:td_ajax_url,data:{action:"tdb_set_mobile_template",template_id:d,mobile_template_id:e,
_nonce:window.tdb_globals.wpRestNonce},success:function(a,d,g){a=f.parseJSON(a);c.isObject(a)&&!c.isUndefined(a.result)&&1===a.result&&(h.data("mobile-template-id",e),b.find(".tdb-template-el-mobile-list-el").removeClass("tdb-current"),b.find('.tdb-template-el-mobile-list-el[data-mobile-template-id="'+e+'"]').addClass("tdb-current"),l.length&&(a=l.find(".tdb-template-el-mobile:first"),""===e?a.html("-"):a.html('<span class="tdb-template-el-mobile-active">Yes</span>')))}})}).on("mouseenter",".tdb-template-el-mobile-btns",
function(a){var b=f(this),c=b.data("mobile-template-id"),d=b.data("template-id");a=f("#tdb-mobile-templates");a.length?(a.find(".tdb-template-el-mobile-list-el").removeClass("tdb-current"),a.find(".tdb-template-el-mobile-list-el").data("template-id",d),a.find('.tdb-template-el-mobile-list-el[data-mobile-template-id="'+c+'"]').addClass("tdb-current"),a.appendTo(b).show()):(window.tdcIntervalCheckMobileTemplates=setInterval(function(){var a=f("#tdb-mobile-templates");a.length&&(a.find(".tdb-template-el-mobile-list-el").removeClass("tdb-current"),
a.find(".tdb-template-el-mobile-list-el").data("template-id",d),a.find('.tdb-template-el-mobile-list-el[data-mobile-template-id="'+c+'"]').addClass("tdb-current"),a.appendTo(b).show(),clearTimeout(window.tdcTimeoutCheckMobileTemplates),clearInterval(window.tdcIntervalCheckMobileTemplates))},100),window.tdcTimeoutCheckMobileTemplates=setTimeout(function(){clearInterval(window.tdcIntervalCheckMobileTemplates)},3E3))}).on("mouseleave",".tdb-template-el-mobile-btns",function(a){a=f(".tdb-templates");
var b=f("#tdb-mobile-templates");b.length&&(b.hide(),b.find(".tdb-template-el-mobile-list-el").removeClass("tdb-current"),b.insertBefore(a));clearTimeout(window.tdcTimeoutCheckMobileTemplates);clearInterval(window.tdcIntervalCheckMobileTemplates)}).on("click",".tdc-footer-template-list .tdc-template-el",function(a){var b=f(this);a=f(a.target);a.hasClass("tdc-template-footer-name")?(tdcSidebar.$_footerTemplateCurrent.html(b.find(".tdc-template-footer-name").html()),tdcSidebar.$_footerTemplateList.toggle(),
a=b.data("value").replace("tdb_template_",""),tdcSidebar.getFooterTemplate(a,{keepGlobalTemplateState:!1,saveFooterTemplate:!0})):a.hasClass("tdc-template-el-global-label")&&(a.parents(".tdc-template-el-global").addClass("tdc-template-footer-global-current"),b.closest(".tdc-footer-template-list").find(".tdc-template-el-global").each(function(){f(this).hasClass("tdc-template-footer-global-current")||f(this).find(".tdc-template-footer-global").removeAttr("checked")}),a.parents(".tdc-template-el-global").removeClass("tdc-template-footer-global-current"),
a.siblings(".tdc-template-footer-global").attr("checked","checked"),a={},tdcState.isMobileComposer()?a.global_footer_template_mobile="no_footer"===b.data("value")?"":b.data("value"):a.global_footer_template="no_footer"===b.data("value")?"":b.data("value"),""!==tdcState.getLang()&&(a.lang=tdcState.getLang()),f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/update_options","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
data:{options:a}}).done(function(a,c,d){tdcState.isGlobalHeaderTemplate()&&tdcSidebar.getFooterTemplate(b.data("value").replace("tdb_template_",""),{keepGlobalTemplateState:!0})}).fail(function(a,b,c){}))}).on("click",".tdc-footer-template-current",function(a){tdcSidebar.$_footerTemplateList.toggle()}).on("click","#tdb-template-mobile",function(a){a.preventDefault();var d=f(this);a=d.data("mobile-template-id");var e=d.data("mobile-template-url"),h=f("#tdb-template-name");c.isUndefined(a)||c.isUndefined(e)?
tdConfirm.modal({caption:"Create Mobile "+("page"===window.tdcPostSettings.tdbTemplateType?"Page":"Template"),objectContext:tdcSidebar,callbackYes:function(){var a=f("#tdb-new-template-name"),e=f("#tdc_post_id").val(),g=window.tdcPostSettings.tdbTemplateType,h=f("#tdb-copy-content");f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/create_mobile_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
cache:!1,dataType:"json",statusCode:{404:function(){console.log("ERROR: 404 not found")},500:function(){console.log("ERROR: 500 server error")}},data:{newTemplateName:a.val(),templateID:e,templateType:g,copyContent:h.is(":checked")?"1":"0"}}).done(function(e,g,h){console.group("API: td-composer/create_mobile_template");console.log("Status: ",g);console.log("Reply: ",e);console.groupEnd();null===e?(e={type:"AJAX ERROR",message:"Empty response received from server.",debug_data:{endpoint:"td-composer/create_mobile_template",
request:h}},console.log("td-composer/create_mobile_template - ERROR",e),a.siblings("#tdb-modal-notice").text(e.type+": "+e.message).fadeIn(50)):e.error!==b?(console.log("td-composer/create_mobile_template - ERROR",e.error),a.siblings("#tdb-modal-notice").text(e.error).fadeIn(50)):(tb_remove(),c.isUndefined(e.mobile_template_url)||(window.open(e.mobile_template_url,"_blank"),d.html("Edit mobile template")),c.isUndefined(e.mobile_template_id)||c.isUndefined(e.mobile_template_url)||(d.html("Edit mobile template"),
d.data("mobile-template-id",e.mobile_template_id),d.data("mobile-template-url",e.mobile_template_url)))}).fail(function(a,c,d){console.log("td-composer/create_mobile_template - ERROR",{type:"AJAX ERROR",message:"Invalid reply from server endpoint.",debug_data:{endpoint:"td-composer/create_mobile_template",request:a}});a.responseText!==b?console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a.responseText):
console.log("%cAPI ERROR td-composer/create_mobile_template","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a,c,d)})},htmlInfoContent:"Enter the mobile "+("page"===window.tdcPostSettings.tdbTemplateType?"page":"template")+' name: <input id="tdb-new-template-name" type="text" value="'+h.text()+' - mobile " onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em><div class="tdb-form-check"><input type="checkbox" class="form-check-input" id="tdb-copy-content"><label class="form-check-label" for="tdb-copy-content"><span class="tdb-check"></span><span class="tdb-check-title">Copy content</span></label></div>',
textYes:"Create",textNo:"Cancel"}):tdConfirm.modal({caption:"Edit Mobile Template",objectContext:tdcSidebar,callbackYes:function(){tb_remove();window.open(e,"_blank")},callbackNo:function(){tb_remove()},htmlInfoContent:"Do you want to edit mobile template?",textYes:"Yes",textNo:"No"})});tdcSidebar.$_editZone.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone()})}).mouseenter(function(a){c.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),
tdcMaskUI.$wrapper.hide());c.isUndefined(tdcSidebar._$currentZone)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentZone)}).mouseleave(function(a){tdcMaskUI.hide()});tdcSidebar.$_editRow.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow()})}).mouseenter(function(a){c.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());c.isUndefined(tdcSidebar._$currentRow)||
tdcMaskUI.setCurrentContainer(tdcSidebar._$currentRow)}).mouseleave(function(a){tdcMaskUI.hide()});tdcSidebar.$_editColumn.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn()})}).mouseenter(function(a){c.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());c.isUndefined(tdcSidebar._$currentColumn)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentColumn)}).mouseleave(function(a){tdcMaskUI.hide()});
tdcSidebar.$_editInnerRow.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow()})}).mouseenter(function(a){c.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());c.isUndefined(tdcSidebar._$currentInnerRow)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentInnerRow)}).mouseleave(function(a){tdcMaskUI.hide()});
tdcSidebar.$_editInnerColumn.click(function(){tdcSidebar.setSettings({$currentZone:tdcSidebar.getCurrentZone(),$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn()})}).mouseenter(function(a){c.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());c.isUndefined(tdcSidebar._$currentInnerColumn)||
tdcMaskUI.setCurrentContainer(tdcSidebar._$currentInnerColumn)}).mouseleave(function(a){tdcMaskUI.hide()});f(".tdc-sidebar-element").each(function(a,b){tdcSidebar._bindElement(f(b))});tdcSidebar.$_sidebarClosePage.click(function(a){var c=window.tdcAdminSettings.previousUrl.split("#");!tdcSidebar.$_sidebarClosePage.hasClass("tdb-close-page")&&tdcMain.getContentModified()?tdConfirm.showModal("Close tagDiv Composer?",tdcSidebar,function(){window.onbeforeunload=null;window.location=c[0];tb_remove()},
b,"Unsaved content. Still want to close tagDiv Composer?"):(window.onbeforeunload=null,window.location=c[0])});"1"===window.localStorage.getItem("tdc_live_iframe_wrapper_inline")&&(tdcMain.setSidebarInline(),tdcSidebar.$_sidebar.addClass("tdc-sidebar-inline"),tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-inline").removeClass("tdc-live-iframe-wrapper-full"));tdcSidebar.$_sidebarBullet.click(function(a){tdcSidebar.$_sidebar.toggleClass("tdc-sidebar-inline");tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");
tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")?(tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"),tdcMain.setSidebarInline(),window.localStorage.setItem("tdc_live_iframe_wrapper_inline",1)):(tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full"),tdcMain.resetSidebarInline(),window.localStorage.setItem("tdc_live_iframe_wrapper_inline",0))});tdcSidebar.$_sidebarClose.click(function(a){tdcSidebar.$_sidebar.addClass("tdc-sidebar-hidden");
tdcSidebar.$_sidebarOpen.addClass("tdc-sidebar-reopen");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-inline")&&tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-hidden")?tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"):tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")||tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full");tdcMain.setSidebarHidden()});tdcSidebar.$_sidebarOpen.click(function(a){tdcSidebar.$_sidebar.removeClass("tdc-sidebar-hidden");
tdcSidebar.$_sidebarOpen.removeClass("tdc-sidebar-reopen");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-inline")&&tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-hidden")?tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"):tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")||tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full");tdcMain.resetSidebarHidden()});tdcSidebar.$_sidebarSearch.keyup(function(a){var b=
f(this);f(".tdc-sidebar-element").each(function(a,c){a=f(c);-1===a.find(".tdc-element-id").html().toLowerCase().indexOf(b.val().trim().toLowerCase())?a.hide():a.show()});f(".tdc-sidebar-separator").each(function(a,b){a=f(b);a.nextUntil(".tdc-sidebar-separator").is(":visible")?a.show():a.hide()})});tdcSidebar.$_sidebar.on("mouseenter",function(){tdcSidebar.mouseOverSidebar=!0}).on("mouseleave",function(){tdcSidebar.mouseOverSidebar=!1});f("body").css("overflow","hidden");tdcSidebar._sidebarModal();
tdcSidebar._liveInspectorTabs();tdcSidebar.updateSavedShortcodes();tdcSidebar.editTemplateName();if(tdcState.isMobileComposer()){var e=f("#tdc-live-iframe");e.length&&(e.removeClass("tdc-responsive-all").addClass("tdc-responsive-phone").css({width:392}),tdcSidebar.currentViewportSettings={name:"phone",settings:{limitTop:767,limitBottom:b}},tdcSidebar.setIframeClass("tdc-responsive-phone"))}tdcSidebarPanel.init()},setCurrentHeaderTemplate:function(){tdcState.isMobileComposer();tdcState.isGlobalHeaderTemplate()?
tdcSidebar.$_headerTemplateCurrent.html(tdcSidebar.$_headerTemplateList.find('div[data-value=""] .tdc-template-header-name').html()):tdcState.isNoHeader()?tdcSidebar.$_headerTemplateCurrent.html(tdcSidebar.$_headerTemplateList.find('div[data-value="no_header"] .tdc-template-header-name').html()):tdcSidebar.$_headerTemplateCurrent.html(tdcSidebar.$_headerTemplateList.find('div[data-value="tdb_template_'+tdcState.getHeaderTemplateId()+'"] .tdc-template-header-name').html())},setCurrentFooterTemplate:function(){tdcState.isGlobalFooterTemplate()?
tdcSidebar.$_footerTemplateCurrent.html(tdcSidebar.$_footerTemplateList.find('div[data-value=""] .tdc-template-footer-name').html()):tdcState.isNoFooter()?tdcSidebar.$_footerTemplateCurrent.html(tdcSidebar.$_footerTemplateList.find('div[data-value="no_footer"] .tdc-template-footer-name').html()):tdcSidebar.$_footerTemplateCurrent.html(tdcSidebar.$_footerTemplateList.find('div[data-value="tdb_template_'+tdcState.getFooterTemplateId()+'"] .tdc-template-footer-name').html())},hideWpeditor:function(){f("#tdc-wpeditor").hide()},
setForcedHeaderZone:function(b){tdcSidebar._forcedHeaderZone=b},getForcedHeaderZone:function(){return tdcSidebar._forcedHeaderZone},changeZoneName:function(b){var a="CUSTOM";switch(b){case "tdc_content":a="CONTENT";break;case "tdc_header_desktop":a="HEADER MENU";break;case "tdc_header_desktop_sticky":a="HEADER MENU STICKY";break;case "tdc_header_mobile":a="MOBILE MENU";break;case "tdc_header_mobile_sticky":a="MOBILE MENU STICKY";break;case "tdc_footer":a="FOOTER"}tdcSidebar.$_editZone.find("a").html(a)},
_activeBreadcrumbItem:function(){var b=tdcSidebar.getCurrentModel(),a=b.get("tag"),e=tdcIFrameData.getZoneParent(b).get("type_zone"),h="<span>"+window.tdcPostSettings.shortcodes[b.get("tag")]+"</span>",g="";tdcSidebar.changeZoneName(e);for(var m in window.tdcAdminSettings.mappedShortcodes)"undefined"===typeof window.tdcAdminSettings.mappedShortcodes[m].tdc_category||"Blocks"!==window.tdcAdminSettings.mappedShortcodes[m].tdc_category&&"Big Grids"!==window.tdcAdminSettings.mappedShortcodes[m].tdc_category||
window.tdcAdminSettings.mappedShortcodes[m].tdc_category!==window.tdcAdminSettings.mappedShortcodes[a].tdc_category||(e="",m===a&&(e="tdc-selected-option"),g+='<li class="'+e+'" data-block_type="'+window.tdcAdminSettings.mappedShortcodes[m].base+'"><div class="tdc-element-ico tdc-ico-'+window.tdcAdminSettings.mappedShortcodes[m].base+'"></div><div class="tdc-element-id">'+window.tdcAdminSettings.mappedShortcodes[m].name+"</div></li>");""!==g?(g="<ul>"+g+"</ul>",tdcSidebar.$_currentElementHead.addClass("tdc-block-selection")):
tdcSidebar.$_currentElementHead.removeClass("tdc-block-selection");switch(a){case "tdc_zone":tdcSidebar.$_editZone.show();tdcSidebar.$_editRow.hide();tdcSidebar.$_editColumn.hide();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();var n=tdcSidebar.$_editZone;break;case "vc_row":tdcSidebar.$_editZone.show();tdcSidebar.$_editRow.hide();tdcSidebar.$_editColumn.hide();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();n=tdcSidebar.$_editRow;break;case "vc_column":tdcSidebar.$_editZone.show();
tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.hide();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();n=tdcSidebar.$_editColumn;break;case "vc_row_inner":tdcSidebar.$_editZone.show();tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.show();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();n=tdcSidebar.$_editInnerRow;break;case "vc_column_inner":tdcSidebar.$_editZone.show();tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.show();tdcSidebar.$_editInnerRow.show();
tdcSidebar.$_editInnerColumn.hide();n=tdcSidebar.$_editInnerColumn;break;default:tdcSidebar.$_editZone.show(),tdcSidebar.$_editRow.show(),tdcSidebar.$_editColumn.show(),n=tdcSidebar.getCurrentElement(),"vc_column_inner"===b.get("parentModel").get("tag")?(tdcSidebar.$_editInnerRow.show(),tdcSidebar.$_editInnerColumn.show()):(tdcSidebar.$_editInnerRow.hide(),tdcSidebar.$_editInnerColumn.hide())}tdcSidebar.$_currentElementHead.html(h);tdcSidebar.$_currentElementSiblings.html(g);tdcSidebar.$_sidebar.find(".tdc-responsiveness").addClass(a);
tdcSidebar.$_currentElementHead.off().mouseenter(function(a){a.preventDefault();n.trigger(a)}).mouseleave(function(a){a.preventDefault();n.trigger(a)}).mousedown(function(a){""!==g&&(tdcSidebar.$_currentElementSiblings.toggleClass("tdc-current-element-siblings-visible"),a=f(this),tdcSidebar.$_currentElementSiblings.hasClass("tdc-current-element-siblings-visible")?a.addClass("tdc-current-element-siblings-button-on"):a.removeClass("tdc-current-element-siblings-button-on"))});tdcSidebar.$_currentElementSiblings.find("li").off().click(function(a){a=
f(this);var d=a.data("block_type"),e=a.children(".tdc-element-id").html();a.siblings(".tdc-selected-option").removeClass("tdc-selected-option");a.addClass("tdc-selected-option");tdcSidebar.$_currentElementHead.html("<span>"+e+"</span>");c.isUndefined(d)||(b.set("tag",d),b.set("rebindToPanel",!0),tdcSidebarController.onUpdate(b));tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible")});tdcSidebar.$_currentElementSiblings.mouseleave(function(a){tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible")});
tdcSidebar.$_inspector.show()},closeModals:function(){f(".tdc-sidebar-modal").each(function(b,a){b=f(a);a=b.data("button_class");b.removeClass("tdc-modal-open");"undefined"!==typeof a&&""!==a&&(b=f("."+a),b.length&&b.removeClass("tdc-window-open"))})},_sidebarModal:function(){f(".tdc-add-element").click(function(){f(this).toggleClass("tdc-window-open");f(".tdc-sidebar-modal").each(function(b,a){b=f(a);a=b.data("button_class");b.hasClass("tdc-sidebar-modal-elements")?(b.toggleClass("tdc-modal-open"),
setTimeout(function(){var a=f(".tdc-sidebar-modal-search > input");a.focus();a.val("");f(".tdc-sidebar-element").each(function(a,b){f(b).show()})},100)):(b.removeClass("tdc-modal-open"),"undefined"!==typeof a&&""!==a&&(b=f("."+a),b.length&&b.removeClass("tdc-window-open")))})})},_bindElement:function(b){b.click(function(a){a.preventDefault()}).mousedown(function(a){if(1===a.which){if("td_block_homepage_full_1"===b.data("shortcode-name")){var d=tdcIFrameData.getFirstModelByTag("td_block_homepage_full_1");
if(!c.isUndefined(d)){new tdcNotice.notice("td_block_homepage_full_1 este deja in pagina",!1,!0);return}}a.preventDefault();tdcOperationUI.activeDraggedElement(b);tdcOperationUI.showHelper(a)}}).mouseup(function(a){tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper())})},_liveInspectorTabs:function(){f("body").on("click",".tdc-tabs a",function(){var b=f(this);tdcSidebar._setCurrentTabId(b.data("tab-id"));b.hasClass("tdc-tab-active")||
(f(".tdc-tabs a").removeClass("tdc-tab-active"),b.addClass("tdc-tab-active"),f(".tdc-tab-content-wrap .tdc-tab-content").removeClass("tdc-tab-content-visible"),b=b.data("tab-id"),f("#"+b).addClass("tdc-tab-content-visible"))});f("body").on("click",".tdc-responsive-buttons > div",function(d){d=f(this);d.addClass("selected");d.siblings().removeClass("selected");var a="undefined"===typeof window.td_viewport_interval_list?tdcAdminIFrameUI._liveIframeWindowObject.td_viewport_interval_list:window.td_viewport_interval_list;
var e=tdcAdminIFrameUI.getLiveIframe();if(!c.isUndefined(e))var h=e.contents().find(".tdc-element-selected").offset().top-e.contents().scrollTop();c.isUndefined(tdcCssEditor.timeoutContentWidth)||clearTimeout(tdcCssEditor.timeoutContentWidth);var g="",m=0;d.hasClass("tdc-responsive-all")?(tdcSidebar.currentViewportSettings={name:"all",settings:b},tdcState.isMobileComposer()?c.isUndefined(e)||(g=768,tdcSidebar.setIframeClass("tdc-responsive-tablet-portrait")):c.isUndefined(e)||(e.css("width","100%"),
tdcSidebar.setIframeClass("tdc-responsive-all"))):d.hasClass("tdc-responsive-tablet-landscape")?(tdcSidebar.currentViewportSettings={name:"landscape",settings:{limitTop:a[2].limitBottom,limitBottom:parseInt(a[1].limitBottom)+1}},c.isUndefined(e)||(g=1024,tdcSidebar.setIframeClass("tdc-responsive-tablet-landscape"))):d.hasClass("tdc-responsive-tablet-portrait")?(tdcSidebar.currentViewportSettings={name:"portrait",settings:{limitTop:a[1].limitBottom,limitBottom:parseInt(a[0].limitBottom)+1}},c.isUndefined(e)||
(g=768,tdcSidebar.setIframeClass("tdc-responsive-tablet-portrait"))):d.hasClass("tdc-responsive-phone")&&(tdcSidebar.currentViewportSettings={name:"phone",settings:{limitTop:a[0].limitBottom,limitBottom:b}},c.isUndefined(e)||(g=375,tdcSidebar.setIframeClass("tdc-responsive-phone")));""!==g&&(e.css("width",g),tdcCssEditor.timeoutContentWidth=setTimeout(function(){var a=e.contents().width();a!==g&&a<g&&(m=g-a,e.css("width",g+m))},100));"dev"===window.tdcAdminSettings.deployMode&&"module"!==window.tdcPostSettings.tdbTemplateType&&
tdcCssEditor.setMediaInterval(g,m);f(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent());tdcSidebarPanel._hook.doAction("panel_css");if(!c.isUndefined(e)){d=e.contents().find(".tdc-element-selected");if(!d.length)return;d=d.offset().top;d=0<h?window.innerHeight>h?d-h:d-100:d-100;e.contents().scrollTop(d)}"all"===tdcSidebar.currentViewportSettings.name?f(".tdc-tab-content-wrap").removeClass("tdc-viewport-responsive"):f(".tdc-tab-content-wrap").addClass("tdc-viewport-responsive");
f(".tdc-tab-content-wrap .tdc-property-responsive").each(function(){var a=f(this).find("[data-responsive]");tdcSidebarPanel.setViewportCurrentResponsiveValue(a)});if("undefined"!==typeof tdcTemplateSettingsPanel.$panel&&"module"===window.tdcPostSettings.tdbTemplateType){h=tdcSidebar.currentViewportSettings.name;d="";a=tdcTemplateSettingsPanel.$panel.find(".tdc-tsc-viewport-width");var n=a.find('[data-viewport="'+h+'"]'),k="";switch(h){case "all":d="Desktop";break;case "landscape":d="Landscape tablet";
break;case "portrait":d="Portrait tablet";break;case "phone":d="Phone"}a.find(".tdc-tsc-label span").text("("+d+")");a.find('[id*="tdc-tsc-viewport"]').hide();n.show();"all"===h?k=""!==n.val()?n.val():"100%":""!==n.val()?k=n.val():(h=a.find('[data-viewport="all"]'),k=""!==h.val()?h.val():"100%");e.contents().find("body").css("width",k)}setTimeout(function(){tdcIFrameData.addDummyContent();var a=e.contents().find(".td_block_wrap");window.checkTdBlockWrap(a)},100)});f("body").on("change, keyup",'.tdc-search input[type="text"]',
function(b){b=f(this);var a=f(".tdc-inspector"),d=a.find(".tdc-tab-content-wrap");a.find(".tdc-search-notice").remove();a.find(".tdc-tab-search-notice").hide();var h=b.val().trim().toLowerCase();2<h.length&&d.find(".tdc-search-data").each(function(b,d){b=f(d);d=b.text();!c.isUndefined(d)&&0<=d.toLowerCase().indexOf(h)&&(d="tdc-search-notice",b.hasClass("tdc-search-notice-font")&&(d+=" tdc-search-notice-font"),f('<div class="'+d+'"></div>').insertBefore(b.closest(".tdc-property-wrap")),b=b.closest(".tdc-tab-content").attr("id"),
a.find('.tdc-tabs a[data-tab-id="'+b+'"] .tdc-tab-search-notice').show())})})},setIframeClass:function(b){var a=["tdc-responsive-all","tdc-responsive-tablet-landscape","tdc-responsive-tablet-portrait","tdc-responsive-phone"];if(-1!==a.indexOf(b)){var c=tdcAdminIFrameUI.getLiveIframe();c.addClass(b);a.forEach(function(a){a!==b&&c.removeClass(a)})}},_setCurrentTabId:function(b){tdcSidebar._currentTabId=b},getCurrentTabId:function(){return tdcSidebar._currentTabId},_setCurrentElement:function(b){tdcSidebar._$currentElement=
b},getCurrentElement:function(){return tdcSidebar._$currentElement},_setCurrentZone:function(b){tdcSidebar._$currentZone=b},getCurrentZone:function(){return tdcSidebar._$currentZone},_setCurrentRow:function(b){tdcSidebar._$currentRow=b},getCurrentRow:function(){return tdcSidebar._$currentRow},_setCurrentColumn:function(b){tdcSidebar._$currentColumn=b},getCurrentColumn:function(){return tdcSidebar._$currentColumn},_setCurrentInnerRow:function(b){tdcSidebar._$currentInnerRow=b},getCurrentInnerRow:function(){return tdcSidebar._$currentInnerRow},
_setCurrentInnerColumn:function(b){tdcSidebar._$currentInnerColumn=b},getCurrentInnerColumn:function(){return tdcSidebar._$currentInnerColumn},setSidebarInfo:function(b){tdcSidebar.$_sidebarInfo.html(b)},getCurrentModel:function(){return tdcSidebar._currentModel},setSettings:function(d,a,e,h){if(c.isUndefined(tdcSidebar._currentModel)||c.isUndefined(e)||tdcSidebar._currentModel===e)c.isUndefined(tdcSidebar._currentModel)||tdcSidebar._currentModel.set("current",!1),c.isUndefined(d)?(tdcSidebar._setCurrentZone(b),
tdcSidebar._setCurrentRow(b),tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=b):c.has(d,"$currentZone")&&!c.isUndefined(d.$currentZone)?(tdcSidebar._setCurrentZone(d.$currentZone),c.has(d,"$currentRow")&&!c.isUndefined(d.$currentRow)?(tdcSidebar._setCurrentRow(d.$currentRow),c.has(d,"$currentColumn")&&!c.isUndefined(d.$currentColumn)?(tdcSidebar._setCurrentColumn(d.$currentColumn),c.has(d,
"$currentInnerRow")&&!c.isUndefined(d.$currentInnerRow)?(tdcSidebar._setCurrentInnerRow(d.$currentInnerRow),c.has(d,"$currentInnerColumn")&&!c.isUndefined(d.$currentInnerColumn)?(tdcSidebar._setCurrentInnerColumn(d.$currentInnerColumn),c.has(d,"$currentElement")&&!c.isUndefined(d.$currentElement)?(tdcSidebar._setCurrentElement(d.$currentElement),tdcSidebar._currentModel=tdcIFrameData.getModel(d.$currentElement.data("model_id"))):(tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(d.$currentInnerColumn.data("model_id")))):
(tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(d.$currentInnerRow.data("model_id")))):(tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),c.has(d,"$currentElement")&&!c.isUndefined(d.$currentElement)?(tdcSidebar._setCurrentElement(d.$currentElement),tdcSidebar._currentModel=tdcIFrameData.getModel(d.$currentElement.data("model_id"))):(tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(d.$currentColumn.data("model_id"))))):
(tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(d.$currentRow.data("model_id")))):(tdcSidebar._setCurrentRow(b),tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(d.$currentZone.data("model_id")))):(tdcSidebar._setCurrentZone(b),tdcSidebar._setCurrentRow(b),
tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=b),c.isUndefined(tdcSidebar._currentModel)?tdcSidebarPanel.clearPanel():(tdcSidebar._currentModel.set("current",!0),tdcSidebarPanel.bindPanelToModel(tdcSidebar._currentModel,a),tdcSidebar._activeBreadcrumbItem(),tdcSidebar.closeModals(),c.isUndefined(h)||c.isUndefined(h.callback)||(c.isUndefined(h.callbackContext)?h.callback.call(this):h.callback.call(h.callbackContext)))},
buildGradient:function(){tdcSidebar.$_gradient=f(tdcSidebar._gradientOuterHTML).appendTo(tdcSidebar.$_sidebar);tdcSidebar.$_gradient.find("#tdc-gradient-color-picker").tdGradient();console.log("gradient");return tdcSidebar.$_gradient},buildPalette:function(){tdcSidebar.$_palette=f(tdcSidebar._paletteOuterHTML).appendTo(tdcSidebar.$_sidebar);tdcSidebar.$_palette.find("#tdc-palette-color-picker").tdPalette();return tdcSidebar.$_palette},buildFontList:function(){tdcSidebar.$_fontList=f(tdcSidebar._fontListOuterHTML).appendTo(tdcSidebar.$_sidebar);
tdcSidebar.$_fontList.html("");"undefined"!==typeof modelId&&"undefined"!==typeof mappedParameter&&""!==window.tdcAdminSettings.tdcSavings&&"undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts&&c.map(window.tdcAdminSettings.tdcSavings.fonts,function(b){f('<div class="tdc-font-settings" data-value="'+b.value+'" data-model_id="'+modelId+'" data-param_name="'+mappedParameter+'">'+b.name+'<span class="tdc-font-delete">X</span></div>').appendTo(tdcSidebar.$_fontList)});return tdcSidebar.$_fontList},
buildEditorCss:function(){tdcSidebar.$_sidebar.find("#tdc-editor-css").length||(tdcSidebar.$_editorCss=f(tdcSidebar._editorCssOuterHTML).appendTo(tdcSidebar.$_sidebar),tdcSidebar.editorCss=b);"undefined"===typeof tdcSidebar.cssEditor&&(tdcSidebar.editorCss=ace.edit("tdc-editor-css"),tdcSidebar.editorCss.$blockScrolling=Infinity,tdcSidebar.editorCss.getSession().on("change",function(){var b=tdcSidebar.editorCss.getSession().getValue();less.render(b,function(a,b){"undefined"===typeof b?tdcSidebar.$editorTextarea.val(tdcSidebar.editorCss.getSession().getValue()):
(tdcSidebar.$editorTextarea.val(b.css),tdcSidebarController.onUpdate(tdcIFrameData.getModel(tdcSidebar.$editorTextarea.data("model_id")),tdcSidebar.$editorTextarea.data("param_name"),"",window.btoa(encodeURIComponent(b.css))))})}),tdcSidebar.editorCss.setTheme("ace/theme/textmate"),tdcSidebar.editorCss.setShowPrintMargin(!1),tdcSidebar.editorCss.getSession().setMode("ace/mode/less"),tdcSidebar.editorCss.getSession().setUseWrapMode(!0),tdcSidebar.editorCss.setOptions({enableBasicAutocompletion:!0,
enableSnippets:!0,enableLiveAutocompletion:!1}));return tdcSidebar.$_editorCss},buildIconSelector:function(){tdcSidebar.$_iconSelector=f(tdcSidebar._iconSelectorOuterHTML).appendTo(tdcSidebar.$_sidebar);return tdcSidebar.$_iconSelector},updateSavedShortcodes:function(){var b=f(".tdc-sidebar-saved-shortcodes");b.nextAll().remove();if("undefined"!==typeof window.tdcAdminSettings.tdcSavings&&""!==window.tdcAdminSettings.tdcSavings&&c.intersection(c.keys(window.tdcAdminSettings.tdcSavings),c.keys(window.tdcAdminSettings.mappedShortcodes)).length){b.show();
var a="";c.each(tdcAdminSettings.tdcSavings,function(b,d,e){if(b.length&&"gradients"!==d&&"fonts"!==d){var g="",h="",f=!1,m=!1;"vc_row"===d||"tdc_zone"===d?(g="tdc-row-temp",f=!0):"vc_row_inner"===d?(g="tdc-element-inner-row-temp",f=!0):(g="tdc-element",m=!0);h=' data-shortcode-name="'+d+'" ';c.isUndefined(window.tdcAdminSettings.mappedShortcodes[d])||(a+='<div class="tdc-sidebar-separator tdc-sidebar-text-separator"><span>'+window.tdcAdminSettings.mappedShortcodes[d].name+"</span></div>",c.each(b,
function(b,e,k){k=e="";f&&(k=b.shortcode,k=window.atob(k),k=' data-template-content="'+window.btoa(k)+'" ');m&&(tdcIFrameData._getPostOriginalContentJSON(),e=tdcIFrameData._getContentJSON(5,window.atob(b.shortcode)),c.isUndefined(e[0].shortcode.content)||(e[0].shortcode.attrs.named.content=e[0].shortcode.content),e=' data-start-values="'+window.btoa(JSON.stringify([e[0].shortcode.attrs.named]))+'" ');a+='<div class="tdc-sidebar-element '+g+'" '+h+" "+k+" "+e+'><div class="tdc-element-ico tdc-ico-template"></div><div class="tdc-element-id">'+
b.name+' - template</div><div class="tdc-element-delete" data-type="'+d+'" data-name="'+b.name+'" title="Delete"></div></div>'}))}});if(""!==a){var e=f(a);e.insertAfter(b);e.find(".tdc-element-delete").on("mousedown",function(a){a.preventDefault();a.stopImmediatePropagation()}).on("mouseup",function(a){if(1===a.which){var b=f(this);a=b.data("type");b=b.data("name");if("undefined"!==typeof window.tdcAdminSettings.tdcSavings[a])for(var c=window.tdcAdminSettings.tdcSavings[a],d=0;d<c.length;d++)if(c[d].name===
b.toString()){c.splice(d,1);c.length||delete window.tdcAdminSettings.tdcSavings[a];tdcUtil.updateTdcSavings();break}return!1}});b.nextAll(".tdc-sidebar-element").each(function(a,b){tdcSidebar._bindElement(f(b))})}}else b.hide()},editTemplateName:function(){f("#tdb-template-name-edit").click(function(c){c.preventDefault();var a=f("#tdb-template-name");tdConfirm.modal({caption:"Change Template Name",objectContext:tdcSidebar,callbackYes:function(){var c=f("#tdb-new-template-name"),d=f("#tdc_post_id").val(),
g=window.tdcPostSettings.tdbTemplateType;a.text()!==c.val()?f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/change_template_name","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},cache:!1,dataType:"json",statusCode:{404:function(){console.log("ERROR: 404 not found")},500:function(){console.log("ERROR: 500 server error")}},data:{newTemplateName:c.val(),templateID:d,templateType:g}}).done(function(d,
e,g){console.group("API: td-composer/change_template_name");console.log("Status: ",e);console.log("Reply: ",d);console.groupEnd();null===d?(d={type:"AJAX ERROR",message:"Empty response received from server.",debug_data:{endpoint:"td-composer/change_template_name",request:g}},console.log("td-composer/change_template_name - ERROR",d),c.siblings("#tdb-modal-notice").text(d.type+": "+d.message).fadeIn(50)):d.error!==b?(console.log("td-composer/change_template_name - ERROR",d.error),c.siblings("#tdb-modal-notice").text(d.error).fadeIn(50)):
(tb_remove(),a.text(d.template_title))}).fail(function(a,d,e){var g={type:"AJAX ERROR",message:"Invalid reply from server endpoint.",debug_data:{endpoint:"td-composer/change_template_name",request:a}};console.log("td-composer/change_template_name - ERROR",g);c.siblings("#tdb-modal-notice").text(g.type+": "+g.message).fadeIn(50);a.responseText!==b?console.log("%cAPI ERROR td-composer/change_template_name","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a.responseText):
console.log("%cAPI ERROR td-composer/change_template_name","background: #ffaa00; color: #ffffff; padding:3px 6px","Error - check for php warnings:",a,d,e)}):tb_remove()},htmlInfoContent:'Enter the template name: <input id="tdb-new-template-name" type="text" value="'+a.text()+'" onfocus="(function(e){ jQuery( e.target ).siblings(\'#tdb-modal-notice\').fadeOut(50); })(event)"/><em id="tdb-modal-notice"></em>',textYes:"Save",textNo:"Cancel"})})},updateHeaderTemplates:function(){tdcSidebar.$_headerTemplateList.find(".tdc-template-el").each(function(b){b=
f(this);var a=b.data("value");""!==a&&"no_header"!==a&&b.remove()});f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_header_templates","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:{mobile_templates:tdcState.isMobileComposer()?"1":"",lang:tdcState.getLang()}}).done(function(b,a,e){f(".tdc-save-page").removeClass("tdc-saving-loader");"success"===a&&c.isObject(b)&&(c.has(b,"errors")?
new tdcNotice.notice(b.errors,!0,!1):c.has(b,"tdb_header_templates")&&(b.tdb_header_templates.forEach(function(a){tdcSidebar.$_headerTemplateList.find('div[data-value="tdb_template_'+a.id+'"]').length||tdcSidebar.$_headerTemplateList.append('<div class="tdc-template-el" data-value="tdb_template_'+a.id+'"><div class="tdc-template-el-title tdc-template-header-name">'+a.title+'</div><div class="tdc-template-el-wrap"><div class="tdc-template-el-icon"><div class="tdc-template-el-options"><div title="Rename template" class="tdc-template-el-edit">Rename</div><div title="Duplicate template" class="tdc-template-el-duplicate">Duplicate</div><div title="Delete template" class="tdc-template-el-delete">Delete</div></div></div></div><div class="tdc-template-el-global" title="Set as'+
(tdcState.isMobileComposer()?" mobile ":" ")+'Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-header-global" '+("1"===a.is_global_template?'checked="checked"':"")+' ><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>')}),tdcSidebar.setCurrentHeaderTemplate(),tdcSidebar.$_headerTemplateList.find(".tdc-template-el").removeClass("tdb-current"),""===tdcState.getHeaderTemplateId()?tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value=""]').addClass("tdb-current"):
"no_header"===tdcState.getHeaderTemplateId()?tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value="no_header"]').addClass("tdb-current"):tdcSidebar.$_headerTemplateList.find('.tdc-template-el[data-value="tdb_template_'+tdcState.getHeaderTemplateId()+'"]').addClass("tdb-current")))}).fail(function(b,a,c){})},getHeaderTemplate:function(d,a){f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_header_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},data:{td_magic_token:tdcLivePanel.$token.val(),tdc_action:"get_header_template",tdc_header_template_id:d,mobile_template:tdcState.isMobileComposer()?"1":""}}).done(function(e,h,g){if("success"===h&&c.isObject(e))if(c.has(e,"errors"))new tdcNotice.notice(e.errors,!0,!1);else{if(c.isUndefined(a)||c.isUndefined(a.keepGlobalTemplateState)||!1===a.keepGlobalTemplateState)e.global_template?tdcState.setGlobalHeaderTemplate():tdcState.unsetGlobalHeaderTemplate();e.no_header?
(tdcState.setNoHeader(),tdcState.setHeaderTemplateId("no_header"),tdcState.setHeaderTemplateContent("")):(tdcState.unsetNoHeader(),tdcState.setHeaderTemplateId(e.template_id),tdcState.setHeaderTemplateContent(e.template_content));c.isUndefined(a)||c.isUndefined(a.saveHeaderTemplate)||!0!==a.saveHeaderTemplate?tdcIFrameData.setHeaderTemplate(e.template_content):tdcIFrameData.setHeaderTemplate(e.template_content,b,{saveHeaderTemplate:a.saveHeaderTemplate,headerTemplateId:d})}}).fail(function(a,b,c){})},
updateFooterTemplates:function(){tdcSidebar.$_footerTemplateList.find("option").each(function(b){b=f(this);""!==b.val()&&"no_footer"!==b.val()&&b.remove()});f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_footer_templates","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:{mobile_templates:tdcState.isMobileComposer()?"1":""}}).done(function(b,a,e){f(".tdc-save-page").removeClass("tdc-saving-loader");
"success"===a&&c.isObject(b)&&(c.has(b,"errors")?new tdcNotice.notice(b.errors,!0,!1):c.has(b,"tdb_footer_templates")&&(b.tdb_footer_templates.forEach(function(a){tdcSidebar.$_footerTemplateList.find('div[data-value="tdb_template_'+a.id+'"]').length||tdcSidebar.$_footerTemplateList.append('<div class="tdc-template-el" data-value="tdb_template_'+a.id+'"><div class="tdc-template-el-title tdc-template-footer-name">'+a.title+'</div><div class="tdc-template-el-wrap"><div class="tdc-template-el-icon"><div class="tdc-template-el-options"><div title="Rename template" class="tdc-template-el-edit">Rename</div><div title="Duplicate template" class="tdc-template-el-duplicate">Duplicate</div><div title="Delete template" class="tdc-template-el-delete">Delete</div></div></div></div><div class="tdc-template-el-global" title="Set as'+
(tdcState.isMobileComposer()?" mobile ":" ")+'Global Template"><input type="checkbox" class="tdc-template-el-global-input tdc-template-footer-global" '+("1"===a.is_global_template?'checked="checked"':"")+' ><label class="tdc-template-el-global-label"></label><span class="tdc-template-el-global-checked">Global</span></div></div>')}),tdcSidebar.setCurrentFooterTemplate(),tdcSidebar.$_footerTemplateList.find(".tdc-template-el").removeClass("tdb-current"),""===tdcState.getFooterTemplateId()?tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value=""]').addClass("tdb-current"):
"no_footer"===tdcState.getFooterTemplateId()?tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value="no_footer"]').addClass("tdb-current"):tdcSidebar.$_footerTemplateList.find('.tdc-template-el[data-value="tdb_template_'+tdcState.getFooterTemplateId()+'"]').addClass("tdb-current")))}).fail(function(b,a,c){})},getFooterTemplate:function(d,a){f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_footer_template","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},data:{td_magic_token:tdcLivePanel.$token.val(),tdc_action:"get_footer_template",tdc_footer_template_id:d,mobile_template:tdcState.isMobileComposer()?"1":""}}).done(function(e,h,g){if("success"===h&&c.isObject(e))if(c.has(e,"errors"))new tdcNotice.notice(e.errors,!0,!1);else{if(c.isUndefined(a)||c.isUndefined(a.keepGlobalTemplateState)||!1===a.keepGlobalTemplateState)e.global_template?tdcState.setGlobalFooterTemplate():tdcState.unsetGlobalFooterTemplate();e.no_footer?
(tdcState.setNoFooter(),tdcState.setFooterTemplateId("no_footer"),tdcState.setFooterTemplateContent("")):(tdcState.unsetNoFooter(),tdcState.setFooterTemplateId(e.template_id),tdcState.setFooterTemplateContent(e.template_content));c.isUndefined(a)||c.isUndefined(a.saveFooterTemplate)||!0!==a.saveFooterTemplate?tdcIFrameData.setFooterTemplate(e.template_content):tdcIFrameData.setFooterTemplate(e.template_content,b,{saveFooterTemplate:a.saveFooterTemplate,footerTemplateId:d})}}).fail(function(a,b,c){})}};
tdcSidebar.init()})(jQuery,_);var tdcSidebarController={};
(function(f){tdcSidebarController={updateJobBuffer:{},updateJobTimer:"",_updateJob:function(){this.value=this.oldValue=this.paramName=this.model=""},_getParamMap:function(c,b,d){for(var a=window.tdcAdminSettings.mappedShortcodes[c],e=0;e<a.params.length;e++)if(a.params[e].param_name===b)return a.params[e];a=window.tdcAdminSettings.mappedBlockTemplates[window.tdcAdminSettings.globalBlockTemplate];_.isEmpty(d.block_template_id)||(a=window.tdcAdminSettings.mappedBlockTemplates[d.block_template_id]);for(e=
0;e<a.params.length;e++)if(a.params[e].param_name===b)return a.params[e];if(0===b.indexOf("tds_")){e=b.split("-");var h=d=f;a=f;2>e.length?new tdcNotice.notice('Param "'+b+'" must have up at least one "-" separator',!0,!1):2===e.length?d=e[0]:3===e.length?(d=e[0],a=e[2]):3<e.length&&new tdcNotice.notice('Param "'+b+'" must have up to at most two "-" separator',!0,!1);if(_.isUndefined(h))for(var g in window.tdcAdminSettings.settingsStyle){if(!_.isUndefined(h))break;for(var m in window.tdcAdminSettings.settingsStyle[g])if(m===
d){h=g;break}}_.isUndefined(d)&&(d=window.tdcAdminSettings.globalStyle[h]);g=window.tdcAdminSettings.settingsStyle[h][d];for(e=0;e<g.params.length;e++)if(m=d+"-"+g.params[e].param_name,_.isUndefined(a)||(m+="-"+a),m===b)return c=JSON.parse(JSON.stringify(g.params[e])),c.param_name=d+"-"+c.param_name,_.isUndefined(a)||(c.param_name+="-"+a),c}new tdcNotice.notice("Map value not found for "+c+" "+b,!0,!1);return f},onUpdate:function(c,b,d,a){var e=new tdcSidebarController._updateJob;e.model=c;e.paramName=
b;e.oldValue=d;e.value=a;tdcSidebarController._addToBuffer(e)},_parseCss:function(c,b){var d=c.model.get("attrs"),a=c.model.get("tag"),e=c.paramName,h=c.value,g="",f=[],n={};[].concat($jscomp.arrayFromIterable(b.matchAll(/\/\*\s*@(\S*)\s*\*\//gmi))).forEach(function(a){"undefined"!==typeof a[1]&&f.push(a[1])});var k=[];f.forEach(function(a,c,g){c<g.length-1&&(k=[].concat($jscomp.arrayFromIterable(b.matchAll(new RegExp("\\/\\*\\s*\\@"+a+"\\s*\\*\\/(.*)\\/\\*\\s*\\@"+g[c+1]+"\\s*\\*\\/","gmis")))),
k.forEach(function(b){if("undefined"!==typeof b[1])try{var c=e===a?JSON.parse(tdcUtil.b64DecodeUnicode(h)):JSON.parse(tdcUtil.b64DecodeUnicode(d[a]));c.hasOwnProperty("all")&&(n[a]=c)}catch(t){c=e===a?h:d[a],n[a]=c}}))});c=tdcSidebarController.getMediaValues(n);var l=tdcSidebarController.getContext(a,c,"all");f.forEach(function(a,c,d){c<d.length-1&&(k=[].concat($jscomp.arrayFromIterable(b.matchAll(new RegExp("\\/\\*\\s*\\@"+a+"\\s*\\*\\/(.*)\\/\\*\\s*\\@"+d[c+1]+"\\s*\\*\\/","gmis")))),k.forEach(function(b){if("undefined"!==
typeof b[1]){var c=new RegExp("@"+a,"ig");b[1]=b[1].replace(/\/\*/i,"");b[1]=b[1].replace(/\*\//i,"");var d=l.getSettingRaw(a);"undefined"!==typeof d&&""!==d&&(b[1]=b[1].replaceAll(c,d),g+=b[1])}}))});c=JSON.parse(JSON.stringify(tdcAdminIFrameUI._liveIframeWindowObject.td_viewport_interval_list));c.forEach(function(a,b,c){switch(b){case 0:a.name="phone";a.mediaValues=tdcSidebarController.getMediaValues(n,"phone");break;case 1:a.name="portrait";a.mediaValues=tdcSidebarController.getMediaValues(n,"portrait");
break;case 2:a.name="landscape",a.mediaValues=tdcSidebarController.getMediaValues(n,"landscape")}});c.reverse().forEach(function(c,d,e){var h=tdcSidebarController.generateCss(a,f,c.mediaValues,b);""!==h&&(g+="/* "+c.name+" */\n",g=d<e.length-1?g+("@media (min-width: "+(e[d+1].limitBottom+1)+"px) and (max-width: "+c.limitBottom+"px) {\n"):g+("@media (max-width: "+c.limitBottom+"px) {\n"),g+=h,g+="}\n")});return g},getContext:function(c,b,d){var a={_settings:{},_media:"",_atts:{},_isInitialized:!1,
init:function(b,c,d){a._isInitialized||(a._setAtts(c),a._setMedia(d),a._isInitialized=!0)},reset:function(){a._settings({});a._setAtts({});a._setMedia("");a._isInitialized=!1},_setSettings:function(b){a._settings=b},getSettings:function(){if(a._isInitialized)return a._settings},_setMedia:function(b){a._media=b;a._settings[this._media]={}},getMedia:function(){if(a._isInitialized)return a._media},_setAtts:function(b){a._atts=b},getAtts:function(){if(a._isInitialized)return a._atts},getAtt:function(b){if(a._isInitialized)return"undefined"!==
typeof a._atts[b]?a._atts[b]:""},loadSettingsRaw:function(b,c){a._isInitialized&&(a._settings[a._media][b]=c)},getSettingRaw:function(b){if(a._isInitialized)return a._settings[a._media][b]},getShortcodeAtt:function(b){if(a._isInitialized)return a.getAtt(b)},isNumeric:function(a){return!isNaN(a)}};a.init(c,b,d);b=jQuery("#tdc-live-iframe");if(b.length&&(c="td_live_"+c,"undefined"!==typeof b.contents()[0].defaultView[c]))b.contents()[0].defaultView[c](a);return a},getMediaValues:function(c,b){b=b===
f?"all":b;var d={},a;for(a in c)c.hasOwnProperty(a)&&(d[a]="undefined"===typeof c[a]?"":"undefined"===typeof c[a][b]?"all"===b?"":"undefined"!==typeof c[a].all?c[a].all:"":c[a][b]);return d},generateCss:function(c,b,d,a){var e="",f=tdcSidebarController.getContext(c,d,"all");b.forEach(function(b,c,d){c<d.length-1&&[].concat($jscomp.arrayFromIterable(a.matchAll(new RegExp("\\/\\*\\s*\\@"+b+"\\s*\\*\\/(.*)\\/\\*\\s*\\@"+d[c+1]+"\\s*\\*\\/","gmis")))).forEach(function(a){if("undefined"!==typeof a[1]){var c=
new RegExp("@"+b,"ig");a[1]=a[1].replace(/\/\*/i,"");a[1]=a[1].replace(/\*\//i,"");var d=f.getSettingRaw(b);"undefined"!==typeof d&&""!==d&&(a[1]=a[1].replaceAll(c,d),e+=a[1])}})});return e},_addToBuffer:function(c){var b=!1,d=c.model.get("attrs");if(!_.isUndefined(c.paramName)){var a=tdcSidebarController._getParamMap(c.model.attributes.tag,c.paramName,d);if(!_.isUndefined(a.live)&&1==a.live){var e=c.model.get("blockUid");"undefined"!==typeof e&&(e=tdcAdminIFrameUI.getLiveIframe().contents().find('[data-td-block-uid="'+
e+'"]'),e.length&&(a=e.find('[data-ui-param="'+c.paramName+'"]'),a.length?(a.html(c.value),b=!0):(a=e.find("style.tdc-pattern"),e=e.find("style.tdc-inline"),a.length&&(b=tdcSidebarController._parseCss(c,a.html()),e.length?e.html(b):a.after('<style class="tdc-inline">/* custom css - generated by TagDiv Composer */'+b+"</style>"),b=!0))))}}e=c.model.get("blockUid");if(!_.isUndefined(tdcSidebarController.updateJobBuffer[e])&&!_.isUndefined(c.paramName)||b){var f=_.clone(d);a=tdcSidebarController._getParamMap(c.model.attributes.tag,
c.paramName,d);a.value===c.value?delete f[a.param_name]:f[a.param_name]=c.value;c.model.set("attrs",f,{silent:!0})}b||(tdcSidebarController.updateJobBuffer[e]=c,""!==tdcSidebarController.updateJobTimer&&clearTimeout(tdcSidebarController.updateJobTimer),tdcSidebarController.updateJobTimer=setTimeout(function(){1<tdcSidebarController.updateJobBuffer.length&&(console.log("Multiple jobs detected - see below"),console.log(tdcSidebarController.updateJobBuffer));for(var a in tdcSidebarController.updateJobBuffer)tdcSidebarController._doUpdateJob(tdcSidebarController.updateJobBuffer[a]);
tdcSidebarController.updateJobBuffer={};tdcSidebarController.updateJobTimer=""},500))},_doUpdateJob:function(c){if(!_.isUndefined(c.paramName)){var b=c.model.get("attrs"),d=_.clone(b);b=tdcSidebarController._getParamMap(c.model.attributes.tag,c.paramName,b);b.value===c.value?delete d[b.param_name]:d[b.param_name]=c.value;c.model.set("attrs",d)}d={error:f,getShortcode:""};tdcIFrameData._checkModelData(c.model,d);if(!_.isUndefined(d.getShortcode)){var a=c.model.get("blockUid"),e=new tdcJobManager.job;
e.shortcode=d.getShortcode;e.columns=tdcIFrameData.getColumnNumber(c.model);e.blockUid=a;parseInt(c.model.get("level"),10);c.model.set("bindNewContent",!0);e.success_callback=function(b){var d=tdcAdminIFrameUI.getIframeWindow();tdcIFrameData.deleteCallback(c.model);c.model.set("blockUid",b.blockUid);_.has(b,"replyHtml")&&(c.model.set("shortcode",e.shortcode),c.model.set("html",b.replyHtml));_.has(b,"replyJsForEval")&&(d.tdcEvalGlobal={oldBlockUid:a},tdcAdminIFrameUI.evalInIframe(b.replyJsForEval));
_.isUndefined(window.eventHub)||(window.eventHub.$emit("refresh-fonts"),window.eventHub.$emit("refresh-colors"))};e.error_callback=function(a,b){tdcDebug.log(b);tdcDebug.log(a)};d=tdcSidebar.getCurrentElement();_.isUndefined(d)&&(d=tdcSidebar.getCurrentInnerColumn(),_.isUndefined(d)&&(d=tdcSidebar.getCurrentInnerRow(),_.isUndefined(d)&&(d=tdcSidebar.getCurrentColumn(),_.isUndefined(d)&&(d=tdcSidebar.getCurrentRow()))));_.isUndefined(d)||d.addClass("tdc-changed");tdcJobManager.addJob(e)}}}})();
var tdcCssEditor={};
(function(f,c,b){tdcCssEditor={_mappedParameter:b,_model:b,_currentCssSettings:b,_INHERITED_CSS_CLASS:"tdc-css-inherited",_isInitialized:!1,init:function(){tdcCssEditor._isInitialized||(tdcCssEditor._bindEvents(),tdcCssEditor._isInitialized=!0)},tdcCssImageWrapHandler:function(b){var a=f(b.currentTarget),d=a.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(a);f(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");f(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");
f(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(b){if(-1!==b.indexOf("[caption")){var e=/\[caption(.*)\](.*)\[\/caption\]/g.exec(b);3===e.length&&(b=e[2])}var h=f("img",b).attr("src");e="";"undefined"===typeof h?(b=f(b),h=b.attr("src"),e=b.attr("class")):e=f("img",b).attr("class");f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:e,action:"tdc_ajax_get_image_id"}}).done(function(b,e,g){if("success"===e)if(c.isObject(b)&&c.has(b,"errors"))new tdcNotice.notice(b.errors,!0,!1);else{a.trigger("td_woo_update_term_img",[a,b]);e=a.closest(".tdc-property-wrap");g=e.find(".tdc-css-image-remove");var f=e.find(".tdc-inherit-image");g.removeClass("tdc-hidden-button");"all"===tdcSidebar.currentViewportSettings.name?f.hide():f.show();a.attr("style","background-image: url( '"+
h+"') ");a.data("image_link",h);a.data("image_id",b.image_id);window.send_to_editor=window.original_send_to_editor;window.tb_remove();e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"undefined"===typeof a.data("model_id")?tdcCssEditor.saveWidgetForm(a):(b=tdcCssEditor._generateCssAttValue(d),e=tdcIFrameData.getModel(a.data("model_id")),tdcSidebarController.onUpdate(e,a.data("param_name"),"",b))}}).fail(function(a,b,c){})};return!1},tdcCssImageRemoveHandler:function(b){var a=f(b.currentTarget),d=
a.closest(".tdc-property-wrap");b=d.find(".tdc-css-image-wrap");var h=d.find(".tdc-inherit-image");a.addClass("tdc-hidden-button");"all"!==tdcSidebar.currentViewportSettings.name&&h.show();d.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);b.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");a.trigger("td_woo_update_term_img",[b,{image_id:""}]);"all"===tdcSidebar.currentViewportSettings.name?b.data("image_link",""):b.data("image_link","no_value");
h=b.data("model_id");c.isUndefined(h)?tdcCssEditor.saveWidgetForm(a):(a=d.closest(".tdc-tab-content"),a=tdcCssEditor._generateCssAttValue(a),h=tdcIFrameData.getModel(h),tdcSidebarController.onUpdate(h,b.data("param_name"),"",a))},_updateColorField:function(b){var a=b.closest(".tdc-property-wrap"),d=a.data("tdc-for"),f=a.find(".tdc-inherit-color"),g=a.find(".tdc-colorpicker-wrap"),m=b.data("no_value"),n=b.data("default_value");c.isUndefined(m)||1!==m?("all"!==tdcSidebar.currentViewportSettings.name&&
f.show(),tdcCssEditor._updateData(b),f={isInherited:!1},d=tdcCssEditor._getSettingsProperty(d,"",f),f.isInherited?(b.attr("placeholder",d),b.val(""),a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),g.attr("style","background-color: "+tdcCssEditor._getRgba(d))):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),tdcCssEditor._checkDefaultColor(b))):(b.val("no_value"),tdcCssEditor._updateData(b),b.val(""),c.isUndefined(n)||g.attr("style","background-color: "+tdcCssEditor._getRgba(n)),tdcCssEditor._checkDefaultColor(b))},
_clearColorPicker:function(b){b=f(b.currentTarget).closest(".tdc-property-wrap");var a=b.closest(".tdc-tab-content"),c=b.find("input"),d=b.find(".tdc-inherit-color");b.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"all"!==tdcSidebar.currentViewportSettings.name&&(c.data("no_value",1),c.attr("placeholder",""),d.show());tdcCssEditor._checkDefaultColor(c);a.hasClass("tdc-tab-widget")&&(c.val(""),c.trigger("keyup"))},_showColorPicker:function(b){b=f(b.currentTarget).closest(".tdc-property-wrap").find("input.wp-color-picker");
"no_value"===b.val()&&b.val("")},_changeColor:function(b){var a=f(b.currentTarget).closest(".tdc-property-wrap").find("input");""!==a.val()&&a.data("no_value",0);"keyup"===b.type?setTimeout(function(){tdcCssEditor._updateColorField(a)},100):tdcCssEditor._updateColorField(a)},_inheritSelect:function(d){d=f(d.currentTarget);var a=d.closest(".tdc-property-wrap"),e=a.data("tdc-for");c.isUndefined(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][e])||delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][e];
var h={isInherited:!1};e=tdcCssEditor._getSettingsProperty(e,b,h);var g=a.find("select:first");h.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),d.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),d.show());c.isUndefined(e)?(g.val(g.find("option:first").val()),d.hide()):g.val(e);tdcCssEditor._updateData(g)},_inheritColor:function(d){d=f(d.currentTarget);var a=d.closest(".tdc-property-wrap"),e=a.find("input"),h=a.find(".tdc-colorpicker-wrap"),g=a.data("tdc-for");c.isUndefined(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][g])||
delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][g];e.data("no_value",0);var m={isInherited:!1};g=tdcCssEditor._getSettingsProperty(g,b,m);m.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),d.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),d.show());c.isUndefined(g)?(e.val(""),d.hide(),tdcCssEditor._updateData(e),tdcCssEditor._checkDefaultColor(e)):(e.val(""),e.attr("placeholder",g),h.attr("style","background-color: "+tdcCssEditor._getRgba(g)),tdcCssEditor._updateData(e))},
_inheritImage:function(d){var a=f(d.currentTarget);d=a.closest(".tdc-property-wrap");var e=d.find(".tdc-css-image-wrap"),h=d.find(".tdc-css-image-remove");d.find(".tdc-inherit-image").hide();h.addClass("tdc-hidden-button");e.data("image_link","");h=e.data("model_id");c.isUndefined(h)?tdcCssEditor.saveWidgetForm(a):(a=d.closest(".tdc-tab-content"),a=tdcCssEditor._generateCssAttValue(a),h=tdcIFrameData.getModel(h),tdcSidebarController.onUpdate(h,e.data("param_name"),"",a));h={isInherited:!1};a=tdcCssEditor._getSettingsProperty("background-image",
b,h);h.isInherited?(d.addClass(tdcCssEditor._INHERITED_CSS_CLASS),e.attr("style","background-image: url('"+a+"'")):e.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'")},_clearCssProperties:function(c){c=f(c.currentTarget);var a=c.data("model_id");tdConfirm.showModal("Clear CSS settings",tdcCssEditor,function(a,c){tdcCssEditor._currentCssSettings=b;"undefined"===typeof c?(f(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent()),
tdcCssEditor.doActionPanelRender(),tdcCssEditor.saveWidgetForm(f("."+a.get(0).className))):(c=tdcIFrameData.getModel(c),tdcSidebarController.onUpdate(c,a.data("param_name"),"",""),f(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent()),tdcCssEditor.doActionPanelRender());tb_remove()},[c,a],"Are you sure you want to clear all the CSS settings of the selected component?")},_changeTextInput:function(b){var a=f(b.currentTarget),d=a.parent(),h=a;d.hasClass("tdc-box-margin")||
d.hasClass("tdc-box-border")||d.hasClass("tdc-box-padding")||(h=a.closest(".tdc-property-wrap"));d=a.val();var g=1;a.hasClass("tdc-css-opacity")&&(g=.01);var m=NaN;switch(b.type){case "keyup":switch(b.keyCode){case 38:f.isNumeric(d)&&(m=parseFloat(d)+g);break;case 40:f.isNumeric(d)&&(m=parseFloat(d)-g)}break;case "mousewheel":b.preventDefault(),b.stopImmediatePropagation(),f.isNumeric(d)&&(m=0<b.originalEvent.deltaY?parseFloat(d)-g:parseFloat(d)+g)}c.isNaN(m)||(1>g&&(m=m.toFixed(2)),a.val(m));tdcCssEditor._updateData(a);
d=h.data("tdc-for");b={isInherited:!1};d=tdcCssEditor._getSettingsProperty(d,"",b);b.isInherited?(a.attr("placeholder",d),a.val(""),h.addClass(tdcCssEditor._INHERITED_CSS_CLASS)):h.removeClass(tdcCssEditor._INHERITED_CSS_CLASS)},_keydownTextInput:function(b){if(38===b.keyCode||40===b.keyCode)return!1},_focusTextInput:function(b){b=f(b.currentTarget);for(var a=b.closest(".tdc-property-wrap"),c=a[0].classList,d=0;d<c.length;d++)0===c[d].indexOf("tdc-el-")&&a.removeClass(c[d]);a.addClass("tdc-el-"+b.data("tdc-for"))},
_changeDropDown:function(b){b=f(b.currentTarget);var a=b.closest(".tdc-property-wrap"),d=a.find(".tdc-inherit-select");a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);tdcCssEditor._updateData(b);var h=a.data("tdc-for"),g={isInherited:!1};tdcCssEditor._getSettingsProperty(h,"",g);g.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),d.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),"all"===tdcSidebar.currentViewportSettings.name?d.hide():0===b[0].selectedIndex?c.isUndefined(tdcCssEditor._currentCssSettings.all)||
c.isUndefined(tdcCssEditor._currentCssSettings.all[h])?d.hide():d.show():d.show())},doActionPanelRender:function(){tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css")},_bindEvents:function(){var b=f("body");b.on("keydown",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._changeTextInput);b.on("focus",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._focusTextInput);
b.on("change keyup",".tdc-tab-design .tdc-css-bg-color",tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design .tdc-css-border-color",tdcCssEditor._changeColor);b.on("change",".tdc-tab-design .tdc-css-border-style",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-width",
tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-width",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-height",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-height",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._changeTextInput);b.on("change keyup",
".tdc-tab-design .tdc-css-shadow-color",tdcCssEditor._changeColor);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-bg-style",
tdcCssEditor._changeDropDown);b.on("change",".tdc-tab-design .tdc-css-bg-position",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._changeTextInput);b.on("change keyup",".tdc-tab-design input.tdc-css-color-1-overlay",tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design input.tdc-css-color-2-overlay",tdcCssEditor._changeColor);b.on("keydown",".tdc-tab-design input.tdc-css-gradient-direction",
tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-content-h-align",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-order",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-order",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",
".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-display",tdcCssEditor._changeDropDown);b.on("mousedown",".tdc-tab-design .wp-picker-clear",tdcCssEditor._clearColorPicker);b.on("click",".tdc-tab-design .tdc-inherit-select",tdcCssEditor._inheritSelect);b.on("click",".tdc-tab-design .tdc-inherit-color",tdcCssEditor._inheritColor);b.on("click",".tdc-tab-design .tdc-css-image-wrap",tdcCssEditor.tdcCssImageWrapHandler);b.on("click",".tdc-tab-design .tdc-css-image-remove",
tdcCssEditor.tdcCssImageRemoveHandler);b.on("click",".tdc-tab-design .tdc-inherit-image",tdcCssEditor._inheritImage);b.on("click",".tdc-clear-css-properties",tdcCssEditor._clearCssProperties)},setMediaInterval:function(b,a){var d=f(".tdc-media-interval");d.length||(d=f('<div class="tdc-media-interval"><div class="tdc-media-interval-head"><label></label> - <output></output></div><input type="range" name="mediaIntervalInput" min="20" max="50" step="1" value="30" data-scroll-bar-width="'+a+'"></div>'),
f("body").append(d),d.find("input").on("input",function(a){var b=f(this),e=tdcAdminIFrameUI.getLiveIframe(),h=b.data("scroll-bar-width");d.find("output").html(b.val());tdcCssEditor.timeoutMediaInterval=setTimeout(function(){c.isUndefined(tdcCssEditor.timeoutMediaInterval)||clearTimeout(tdcCssEditor.timeoutMediaInterval);e.css("width",parseInt(b.val())+parseInt(h))},200)}));""===b?d.hide():(d.show(),tdcCssEditor.timeoutIframeHtml=setTimeout(function(){c.isUndefined(tdcCssEditor.timeoutIframeHtml)||
clearTimeout(tdcCssEditor.timeoutIframeHtml);if(!c.isUndefined(tdcSidebar.currentViewportSettings.settings)){var a=d.find("label"),e=d.find("input"),f=d.find("output");a.html(tdcSidebar.currentViewportSettings.name);c.isUndefined(tdcSidebar.currentViewportSettings.settings.limitBottom)?e.attr("min",200):e.attr("min",tdcSidebar.currentViewportSettings.settings.limitBottom);e.attr("max",tdcSidebar.currentViewportSettings.settings.limitTop);e.attr("value",b);f.html(b+"px")}},100))},_updateData:function(b){var a=
b.data("model_id"),c=b.data("param_name"),d=b.closest(".tdc-tab-content");"undefined"===typeof a?tdcCssEditor.saveWidgetForm(b):(b=tdcIFrameData.getModel(a),d=tdcCssEditor._generateCssAttValue(d),tdcSidebarController.onUpdate(b,c,"",d))},saveWidgetForm:function(b){var a=b.closest("form");b=b.closest(".tdc-tab-content");if(a.length){var c=a.find('input[name="id_base"]').val(),d=a.find('input[name="widget-id"]').val().replace(c+"-","");c="'widget-"+c+"["+d+"][tdc_css]'";d=a.find("input[name="+c+"]");
var f=tdcCssEditor._generateCssAttValue(b);b.data("tdc_css",f);d.length?d.val(f):a.append('<input type="hidden" name='+c+' value="'+f+'">')}},addWidgetCssEditor:function(b,a){tdcCssEditor._mappedParameter=b;return tdcCssEditor._generateEditorContent(a)},addComposerCssEditor:function(b,a){tdcCssEditor._mappedParameter=b;tdcCssEditor._model=a;b=a.get("attrs")[b.param_name];return tdcCssEditor._generateEditorContent(b)},_checkDefaultColor:function(b){var a=b.closest(".tdc-property-wrap").find(".tdc-colorpicker-wrap");
""===b.val()&&(b=b.data("default_value"),c.isUndefined(b)?a.attr("style",""):a.attr("style","background-color: "+tdcCssEditor._getRgba(b)))},_generateEditorContent:function(d){if(c.isEmpty(d))tdcCssEditor._currentCssSettings=b;else try{var a=JSON.parse(window.atob(d));tdcDebug.log(a);c.isObject(a)?tdcCssEditor._currentCssSettings=a:tdcCssEditor._currentCssSettings=b}catch(e){tdcCssEditor._currentCssSettings=b,new tdcNotice.notice(e.message,!1,!1)}tdcSidebarPanel._hook.addAction("panel_rendered",function(){f(".tdc-css-image-wrap").each(function(a,
d){a=f(d);d=a.closest(".tdc-property-wrap");var e=d.find(".tdc-css-image-remove"),h=d.find(".tdc-inherit-image"),n={isInherited:!1},k=tdcCssEditor._getSettingsProperty("background-image",b,n);n.isInherited?d.addClass(tdcCssEditor._INHERITED_CSS_CLASS):d.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);c.isUndefined(k)?(e.addClass("tdc-hidden-button"),h.hide()):("no_value"===k?e.addClass("tdc-hidden-button"):(e.removeClass("tdc-hidden-button"),a.attr("style",'background-image: url("'+k+'")')),"all"!==
tdcSidebar.currentViewportSettings.name&&h.show());a.data("image_link",k)});f(".tdc-inherit").each(function(a,d){a=f(d);d=a.closest(".tdc-property-wrap");if("all"===tdcSidebar.currentViewportSettings.name||d.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))a.hide();else{var e=d.data("tdc-for");d={isInherited:!1};e=tdcCssEditor._getSettingsProperty(e,b,d);d.isInherited?a.hide():c.isUndefined(e)||a.show()}})});return tdcCssEditor.generateEditorResponsiveContent()},_cleanCss:function(d,a){if("undefined"===
typeof a)return b;if("no_value"===a)return a;if("background-image"===d)return d=/(url\s*\(\s*['"]?)(.*?)\s*(['"]?\s*\))/ig.exec(a),c.isEmpty(d)?"":d[2];a=a.toLowerCase();a=a.replace(/!important/g,"");return a.trim()},_getDataNoValue:function(b){var a="";"no_value"===b&&(a=' data-no_value="1" ');return a},callbackColorPicker:function(){f(".tdc-tab-design .tdc-property-colorpicker").each(function(){f("#tdc-palette-color-picker").tdPalette();var b=f(this),a=b.find("input"),e=b.closest(".tdc-property-wrap");
b=b.find(".tdc-colorpicker-wrap");c.isUndefined(a.val())||""===a.val()||b.attr("style","background: "+a.val());e.hasClass(tdcCssEditor._INHERITED_CSS_CLASS)?""!==a.attr("placeholder")&&b.attr("style","background-color: "+tdcCssEditor._getRgba(a.attr("placeholder"))):("no_value"===a.val()&&a.val(""),tdcCssEditor._checkDefaultColor(a))})},generateEditorResponsiveContent:function(){function d(){return n={isInherited:!1}}function a(a){return"all"!==tdcSidebar.currentViewportSettings.name?'placeholder="'+
a+'"':""}function e(){return n.isInherited?" "+tdcCssEditor._INHERITED_CSS_CLASS:""}function h(a,b){b=tdcCssEditor._getSettingsProperty(a,b,d());var c="-";n.isInherited&&(c=b,b="");return'<input data-tdc-for="'+a+'" name="" type="text" value="'+b+'" class="tdc-css-box-input tdc-css-box-input-'+a+e()+'" title="Css '+a+'" placeholder="'+c+'" '+tdcSidebarPanel._getParamterDataAtts(g,m)+"/>"}tdcSidebarPanel._hook.removeAction("panel_css");var g=tdcCssEditor._mappedParameter,m=tdcCssEditor._model,n={isInherited:!1};
var k='<div class="tdc-responsiveness"><div class="'+(tdcSidebarPanel._getParameterClasses(g)+'">');k=k+'<div class="tdc-box-margin"><div class="tdc-margin-label">Margin</div>'+h("margin-top","");k+=h("margin-right","");k+=h("margin-bottom","");k+=h("margin-left","");k=k+'<div class="tdc-box-border"><div class="tdc-border-label">Border</div>'+h("border-top-width","");k+=h("border-right-width","");k+=h("border-bottom-width","");k+=h("border-left-width","");k=k+'<div class="tdc-box-padding"><div class="tdc-padding-label">Padding</div>'+
h("padding-top","");k+=h("padding-right","");k+=h("padding-bottom","");k+=h("padding-left","");k+="</div></div></div></div>";var l=tdcCssEditor._getSettingsProperty("border-style",b,d());k+='<div class="tdc-property-wrap tdc-border-style tdc-dropdown-big'+e()+'" data-tdc-for="border-style">';k=k+'<div class="tdc-property-title"><span title="Css border-style" class="tdc-search-data">Border style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property"><select class="tdc-css-border-style" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"solid",display:"Solid"},{value:"dotted",display:"Dotted"},{value:"dashed",display:"Dashed"},{value:"none",display:"None"},{value:"hidden",display:"Hidden"},{value:"double",display:"Double"},{value:"groove",display:"Groove"},{value:"ridge",display:"Ridge"},{value:"inset",display:"Inset"},{value:"outset",display:"Outset"},{value:"initial",display:"Initial"},{value:"inherit",display:"Inherit"}],
l);k+="</select></div></div>";l=c.uniqueId();var p=tdcCssEditor._getSettingsProperty("border-color","",d()),q="";n.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-border-color'+e()+'" data-tdc-for="border-color">';k=k+'<div class="tdc-property-title"><span title="Css border-color" class="tdc-search-data">Border color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-border-color" '+tdcSidebarPanel._getParamterDataAtts(g,m)+tdcCssEditor._getDataNoValue(p)+' data-default_value="#888888" id="'+l+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("border-radius","",d());p="";n.isInherited&&(p=l,l="");k+='<div class="tdc-property-wrap tdc-border-radius tdc-textfield-small'+e()+'" data-tdc-for="border-radius">';k=k+'<div class="tdc-property-title"><span title="Css border-radius" class="tdc-search-data">Border radius</span></div><div class="tdc-property"><input class="tdc-css-border-radius" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+a(p)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small "></div>';l=tdcCssEditor._getSettingsProperty("width","",d());p="";n.isInherited&&(p=l,l="");k+='<div class="tdc-property-wrap tdc-width tdc-textfield-big'+e()+'" data-tdc-for="width">';k=k+'<div class="tdc-property-title"><span title="Css width" class="tdc-search-data">Width</span></div><div class="tdc-property"><input class="tdc-css-width" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+a(p)+' value="'+l+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("height","",d());p="";n.isInherited&&(p=l,l="");k+='<div class="tdc-property-wrap tdc-height tdc-textfield-big'+e()+'" data-tdc-for="height">';k=k+'<div class="tdc-property-title"><span title="CSS height" class="tdc-search-data">Height</span></div><div class="tdc-property"><input class="tdc-css-height" '+(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+
a(p)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small "></div>';l=tdcCssEditor._getSettingsProperty("shadow-size","",d());p="";n.isInherited&&(p=l,l="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+e()+'" data-tdc-for="shadow-size">';k=k+'<div class="tdc-property-title"><span title="Css shadow-size" class="tdc-search-data">Shadow size</span></div><div class="tdc-property"><input class="tdc-css-shadow-size" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+a(p)+' value="'+l+'"/>');k+="</div></div>";l=c.uniqueId();p=tdcCssEditor._getSettingsProperty("shadow-color","",d());q="";n.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-shadow-color'+e()+'" data-tdc-for="shadow-color">';k=k+'<div class="tdc-property-title"><span title="Css shadow-color" class="tdc-search-data">Shadow color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-shadow-color" '+tdcSidebarPanel._getParamterDataAtts(g,m)+tdcCssEditor._getDataNoValue(p)+' data-default_value="#888888" id="'+l+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("shadow-offset-h","",d());p="";n.isInherited&&(p=l,l="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+e()+'" data-tdc-for="shadow-offset-h">';k=k+'<div class="tdc-property-title"><span title="Css shadow-offset-h" class="tdc-search-data">Shadow offset H</span></div><div class="tdc-property"><input class="tdc-css-shadow-offset-h" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+a(p)+' value="'+l+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("shadow-offset-v","",d());p="";n.isInherited&&(p=l,l="");k+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+e()+'" data-tdc-for="shadow-offset-v">';k=k+'<div class="tdc-property-title"><span title="Css shadow-offset-v" class="tdc-search-data">Shadow offset V</span></div><div class="tdc-property"><input class="tdc-css-shadow-offset-v" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+a(p)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';l=c.uniqueId();p=tdcCssEditor._getSettingsProperty("background-color","",d());q="";n.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-bg-color'+e()+'" data-tdc-for="background-color">';k=k+'<div class="tdc-property-title"><span title="Css background-color" class="tdc-search-data">Background color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-bg-color" '+tdcSidebarPanel._getParamterDataAtts(g,m)+tdcCssEditor._getDataNoValue(p)+' id="'+l+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";tdcCssEditor._getSettingsProperty("background-image",b,d());k+='<div class="tdc-property-wrap tdc-property-attach_image'+e()+'">';k=k+'<div class="tdc-property-title"><span title="Css background-image" class="tdc-search-data">Background image<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-image"></div></span></div><div class="tdc-property"><div class="tdc-css-bg-image tdc-css-image-wrap " '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+" style=\"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png' )\"></div>");k+='<a class="tdc-css-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';l=tdcCssEditor._getSettingsProperty("background-style",b,d());k+='<div class="tdc-property-wrap tdc-bg-style tdc-dropdown-big'+e()+'" data-tdc-for="background-style">';k=k+'<div class="tdc-property-title"><span title="Css background-size & background-repeat" class="tdc-search-data">Background style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property"><select class="tdc-css-bg-style" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"cover",display:"Cover"},{value:"contain",display:"Contain"},{value:"no-repeat",display:"No repeat"},{value:"repeat",display:"Repeat"}],l);k+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("background-position",b,d());k+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+e()+'" data-tdc-for="background-position">';k=k+'<div class="tdc-property-title"><span title="Css background-position" class="tdc-search-data">Background position<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property"><select class="tdc-css-bg-position" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"center top",display:"Center Top"},{value:"center center",display:"Center Center"},{value:"center bottom",display:"Center Bottom"},{value:"left top",display:"Left Top"},{value:"left center",display:"Left Center"},{value:"left bottom",display:"Left Bottom"},{value:"right top",display:"Right Top"},{value:"right center",display:"Right Center"},{value:"right bottom",display:"Right Bottom"}],l);k+=
"</select></div></div>";l=tdcCssEditor._getSettingsProperty("opacity","",d());p="";n.isInherited&&(p=l,l="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+e()+'" data-tdc-for="opacity">';k=k+'<div class="tdc-property-title"><span title="Css background-image opacity" class="tdc-search-data">Background opacity</span></div><div class="tdc-property"><input class="tdc-css-opacity" '+(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+a(p)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';
l=c.uniqueId();p=tdcCssEditor._getSettingsProperty("color-1-overlay","",d());q="";n.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-1-overlay'+e()+'" data-tdc-for="color-1-overlay">';k=k+'<div class="tdc-property-title"><span title="Css gradient color From" class="tdc-search-data">Color 1 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-color-1-overlay" '+tdcSidebarPanel._getParamterDataAtts(g,m)+tdcCssEditor._getDataNoValue(p)+' id="'+l+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";l=c.uniqueId();p=tdcCssEditor._getSettingsProperty("color-2-overlay","",d());q="";n.isInherited&&(q=p,p="");k+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-2-overlay'+e()+'" data-tdc-for="color-2-overlay">';k=k+'<div class="tdc-property-title"><span  title="Css gradient color To" class="tdc-search-data">Color 2 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-color-2-overlay" '+tdcSidebarPanel._getParamterDataAtts(g,m)+tdcCssEditor._getDataNoValue(p)+' id="'+l+'" name="" type="text" '+a(q)+' value="'+p+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsProperty("gradient-direction","",d());p="";n.isInherited&&(p=l,l="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+e()+'" data-tdc-for="gradient-direction">';k=k+'<div class="tdc-property-title"><span title="Css gradient direction" class="tdc-search-data">Gradient direction</span></div><div class="tdc-property"><input class="tdc-css-gradient-direction" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+a(p)+' value="'+l+'"/>');k+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';l=tdcCssEditor._getSettingsProperty("content-h-align",b,d());k+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+e()+'" data-tdc-for="content-h-align">';k=k+'<div class="tdc-property-title"><span title="Css content horizontal align" class="tdc-search-data">H. align<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property"><select class="tdc-css-content-h-align" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"",display:"Default"},{value:"content-horiz-left",display:"Left"},{value:"content-horiz-center",display:"Center"},{value:"content-horiz-right",display:"Right"}],l);k+="</select></div></div>";"vc_row"!==m.get("tag")&&"vc_row_inner"!==m.get("tag")&&"vc_column"!==m.get("tag")&&"vc_column_inner"!==m.get("tag")&&(l=tdcCssEditor._getSettingsProperty("order","",d()),p="",n.isInherited&&(p=l,l=""),k+=
'<div class="tdc-property-wrap tdc-order tdc-textfield-small'+e()+'" data-tdc-for="order">',k=k+'<div class="tdc-property-title"><span title="Order" class="tdc-search-data">Order</span></div><div class="tdc-property"><input class="tdc-css-order" '+(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+a(p)+' value="'+l+'"/>'),k+="</div></div>");l=tdcCssEditor._getSettingsProperty("z-index","",d());p="";n.isInherited&&(p=l,l="");k+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+
e()+'" data-tdc-for="z-index">';k=k+'<div class="tdc-property-title"><span title="Z-index" class="tdc-search-data">Z-index</span></div><div class="tdc-property"><input class="tdc-css-z-index" '+(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="" type="text" '+a(p)+' value="'+l+'"/>');k+="</div></div>";l=tdcCssEditor._getSettingsPropertyFromCssSettings("display",b);k+='<div class="tdc-property-wrap tdc-display tdc-dropdown-big'+e()+'" data-tdc-for="display">';k=k+'<div class="tdc-property-title"><span title="Css content horizontal align" class="tdc-search-data">Display</span></div><div class="tdc-property"><select class="tdc-css-display" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' name="">');k+=tdcCssEditor._generateDropdownOptions([{value:"",display:"Show"},{value:"none",display:"Hidden"},{value:"inline",display:"Inline"},{value:"inline-block",display:"Inline-block"},{value:"block",display:"Block"},{value:"table",display:"Table"},{value:"inline-table",display:"Inline-table"}],l);k=k+'</select></div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div><div class="tdc-clear-css-properties" '+
(tdcSidebarPanel._getParamterDataAtts(g,m)+' title="Clear all tab css settings">Clear CSS settings</div>');k+="</div>";tdcSidebarPanel._hook.addAction("panel_css",tdcCssEditor.callbackColorPicker);tdcSidebarPanel._hook.addAction("panel_css",function(){f(".tdc-inherit").each(function(a,d){a=f(d);d=a.closest(".tdc-property-wrap");if("all"===tdcSidebar.currentViewportSettings.name||d.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))a.hide();else{var e=d.data("tdc-for");d={isInherited:!1};e=tdcCssEditor._getSettingsProperty(e,
b,d);d.isInherited?a.hide():c.isUndefined(e)||a.show()}})});return k},_getAvailableViewportSetting:function(b,a,c){if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d;switch(b){case "all":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]&&(d="all");break;case "landscape":case "portrait":case "phone":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]?d=b:"undefined"!==typeof tdcCssEditor._currentCssSettings.all&&(d="all")}if("undefined"!==typeof d){if("undefined"!==typeof tdcCssEditor._currentCssSettings[d][a])return tdcSidebar.currentViewportSettings.name!==
d&&(c.isInherited=!0,tdcDebug.log(a)),tdcCssEditor._cleanCss(a,tdcCssEditor._currentCssSettings[d][a]);if("all"!==d)return tdcCssEditor._getAvailableViewportSetting("all",a,c)}}},_getSettingsPropertyFromCssSettings:function(b,a){var c;if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d=tdcSidebar.currentViewportSettings.name;if("undefined"!==typeof tdcCssEditor._currentCssSettings[d]&&"undefined"!==typeof tdcCssEditor._currentCssSettings[d][b])return tdcSidebar.currentViewportSettings.name!==
d&&tdcDebug.log(b),tdcCssEditor._cleanCss(b,tdcCssEditor._currentCssSettings[d][b])}"undefined"===typeof c&&"undefined"!==typeof a&&(c=a);return c},_getSettingsProperty:function(b,a,c){var d;"undefined"===typeof c&&(c={isInherited:!1});"undefined"!==typeof tdcCssEditor._currentCssSettings&&(d=tdcCssEditor._getAvailableViewportSetting(tdcSidebar.currentViewportSettings.name,b,c));"undefined"===typeof d&&"undefined"!==typeof a&&(d=a);return d},_generateDropdownOptions:function(b,a,e){for(var d=[],f,
m=!1,n=0,k=0;k<b.length;k++)c.isUndefined(e)||e!==b[k].value||(n=k),f="",c.isUndefined(a)||a!==b[k].value||(f='selected="selected"',m=!0),d.push("<option "+f+' value="'+b[k].value+'">'+b[k].display+"</option>");m||(d[n]='<option selected="selected" value="'+b[n].value+'">'+b[n].display+"</option>");return d.join("")},_generateCssAttValue:function(b){var a={},d=b.find(".tdc-css-box-input-margin-top").val().trim(),f=b.find(".tdc-css-box-input-margin-right").val().trim(),g=b.find(".tdc-css-box-input-margin-bottom").val().trim(),
m=b.find(".tdc-css-box-input-margin-left").val().trim(),n=b.find(".tdc-css-box-input-border-top-width").val().trim(),k=b.find(".tdc-css-box-input-border-right-width").val().trim(),l=b.find(".tdc-css-box-input-border-bottom-width").val().trim(),p=b.find(".tdc-css-box-input-border-left-width").val().trim(),q=b.find(".tdc-css-box-input-padding-top").val().trim(),r=b.find(".tdc-css-box-input-padding-right").val().trim(),u=b.find(".tdc-css-box-input-padding-bottom").val().trim(),x=b.find(".tdc-css-box-input-padding-left").val().trim(),
t=b.find(".tdc-css-border-radius").val().trim(),v=b.find(".tdc-css-width").val().trim(),B=b.find(".tdc-css-height").val().trim(),z=b.find(".tdc-css-shadow-size").val().trim(),w=b.find(".tdc-css-shadow-offset-h").val().trim(),y=b.find(".tdc-css-shadow-offset-v").val().trim(),A=b.find(".tdc-css-opacity").val().trim(),C=b.find(".tdc-css-gradient-direction").val().trim(),E=b.find(".tdc-css-z-index").val().trim(),D="";b.find(".tdc-css-order").length&&(D=b.find(".tdc-css-order").val().trim());""!==d&&(a["margin-top"]=
d);""!==f&&(a["margin-right"]=f);""!==g&&(a["margin-bottom"]=g);""!==m&&(a["margin-left"]=m);""!==n&&(a["border-top-width"]=n);""!==k&&(a["border-right-width"]=k);""!==l&&(a["border-bottom-width"]=l);""!==p&&(a["border-left-width"]=p);""!==q&&(a["padding-top"]=q);""!==r&&(a["padding-right"]=r);""!==u&&(a["padding-bottom"]=u);""!==x&&(a["padding-left"]=x);d=b.find(".tdc-css-border-style");f=d.val().trim();""===f||d.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["border-style"]=
f);d=b.find(".tdc-css-border-color");f=d.val().trim();""!==f?a["border-color"]=f:(d=d.data("no_value"),c.isUndefined(d)||1!==d||(a["border-color"]="no_value"));""!==t&&(a["border-radius"]=t);""!==v&&(a.width=v);""!==B&&(a.height=B);""!==z&&(a["shadow-size"]=z);t=b.find(".tdc-css-shadow-color");v=t.val().trim();""!==v?a["shadow-color"]=v:(t=t.data("no_value"),c.isUndefined(t)||1!==t||(a["shadow-color"]="no_value"));""!==w&&(a["shadow-offset-h"]=w);""!==y&&(a["shadow-offset-v"]=y);w=b.find(".tdc-css-bg-color");
y=w.val().trim();""!==y?a["background-color"]=y:(w=w.data("no_value"),c.isUndefined(w)||1!==w||(a["background-color"]="no_value"));w=b.find(".tdc-css-bg-image");w.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(w=w.data("image_link"),c.isUndefined(w)||("no_value"===w?a["background-image"]="no_value":""!==w&&(a["background-image"]='url("'+w+'")')));w=b.find(".tdc-css-bg-style");y=w.val().trim();""===y||w.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||
(a["background-style"]=y);w=b.find(".tdc-css-bg-position");y=w.val().trim();""===y||w.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["background-position"]=y);""!==A&&(a.opacity=A);A=b.find(".tdc-css-color-1-overlay");w=A.val().trim();""!==w?a["color-1-overlay"]=w:(A=A.data("no_value"),c.isUndefined(A)||1!==A||(a["color-1-overlay"]="no_value"));A=b.find(".tdc-css-color-2-overlay");w=A.val().trim();""!==w?a["color-2-overlay"]=w:(A=A.data("no_value"),c.isUndefined(A)||
1!==A||(a["color-2-overlay"]="no_value"));""!==C&&(a["gradient-direction"]=C);""!==D&&(a.order=D);""!==E&&(a["z-index"]=E);C=b.find(".tdc-css-content-h-align");E=C.val().trim();""===E||C.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["content-h-align"]=E);b=b.find(".tdc-css-display");a.display=b.val().trim();c.isUndefined(tdcCssEditor._currentCssSettings)&&(tdcCssEditor._currentCssSettings={});c.isUndefined(a["border-style"])||"solid"!==a["border-style"]||("all"===tdcSidebar.currentViewportSettings.name||
c.isUndefined(tdcCssEditor._currentCssSettings.all)||c.isUndefined(tdcCssEditor._currentCssSettings.all["border-style"]))&&delete a["border-style"];c.isUndefined(a["background-style"])||"cover"!==a["background-style"]||("all"===tdcSidebar.currentViewportSettings.name||c.isUndefined(tdcCssEditor._currentCssSettings.all)||c.isUndefined(tdcCssEditor._currentCssSettings.all["background-style"]))&&delete a["background-style"];c.isUndefined(a["background-position"])||"center top"!==a["background-position"]||
("all"===tdcSidebar.currentViewportSettings.name||c.isUndefined(tdcCssEditor._currentCssSettings.all)||c.isUndefined(tdcCssEditor._currentCssSettings.all["background-position"]))&&delete a["background-position"];tdcDebug.log(a);c.isEmpty(a)?(delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name],delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_max_width"],delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_min_width"]):
(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name]=a,c.isUndefined(tdcSidebar.currentViewportSettings.settings)||(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_max_width"]=tdcSidebar.currentViewportSettings.settings.limitTop,tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_min_width"]=tdcSidebar.currentViewportSettings.settings.limitBottom));tdcDebug.log(tdcCssEditor._currentCssSettings);tdcDebug.log("JSON.stringify");
tdcDebug.log(JSON.stringify(tdcCssEditor._currentCssSettings));return c.isEmpty(tdcCssEditor._currentCssSettings)?"":window.btoa(JSON.stringify(tdcCssEditor._currentCssSettings))},_getRgba:function(b){return-1!==b.indexOf("rgb")?b:(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?"rgb("+parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16)+")":""}}})(jQuery,_);var tdcContextMenu={};
(function(){tdcContextMenu={_type:void 0,_headerTitle:void 0,_model:void 0,$_context:void 0,$_currentType:void 0,$_copyStyle:void 0,$_pasteStyle:void 0,$_saveShortcode:void 0,$_deleteShortcode:void 0,$_cloneShortcode:void 0,$_clearShortcode:void 0,$_currentElementOver:void 0,init:function(){tdcContextMenu.$_context=jQuery("#tdc-context-menu");tdcContextMenu.$_currentType=tdcContextMenu.$_context.find(".tdc-current-type");tdcContextMenu.$_copyShortcode=tdcContextMenu.$_context.find(".tdc-copy-shortcode");
tdcContextMenu.$_cutShortcode=tdcContextMenu.$_context.find(".tdc-cut-shortcode");tdcContextMenu.$_pasteShortcodeBefore=tdcContextMenu.$_context.find(".tdc-paste-shortcode-before");tdcContextMenu.$_pasteShortcodeAfter=tdcContextMenu.$_context.find(".tdc-paste-shortcode-after");tdcContextMenu.$_copyStyle=tdcContextMenu.$_context.find(".tdc-copy-style");tdcContextMenu.$_pasteStyle=tdcContextMenu.$_context.find(".tdc-paste-style");tdcContextMenu.$_resetStyle=tdcContextMenu.$_context.find(".tdc-reset-style");
tdcContextMenu.$_copyAttrs=tdcContextMenu.$_context.find(".tdc-copy-attrs");tdcContextMenu.$_pasteAttrs=tdcContextMenu.$_context.find(".tdc-paste-attrs");tdcContextMenu.$_copyListAttrs=tdcContextMenu.$_context.find(".tdc-copy-list-attrs");tdcContextMenu.$_pasteListAttrs=tdcContextMenu.$_context.find(".tdc-paste-list-attrs");tdcContextMenu.$_saveShortcode=tdcContextMenu.$_context.find(".tdc-save-shortcode");tdcContextMenu.$_deleteShortcode=tdcContextMenu.$_context.find(".tdc-delete-shortcode");tdcContextMenu.$_cloneShortcode=
tdcContextMenu.$_context.find(".tdc-clone-shortcode");tdcContextMenu.$_clearShortcode=tdcContextMenu.$_context.find(".tdc-clear-shortcode");tdcContextMenu.$_context.find("li:not(.active)").on("click",function(f){f.preventDefault();return!1});tdcContextMenu.$_context.bind("contextmenu",function(f){f.preventDefault();var c=jQuery.Event("click");c.pageX=f.pageX;c.pageY=f.pageY;tdcContextMenu.$_context.trigger(c)});tdcContextMenu.$_copyShortcode.on("click",tdcContextMenu.copyShortcodeHandler);tdcContextMenu.$_cutShortcode.on("click",
tdcContextMenu.cutShortcodeHandler);tdcContextMenu.$_pasteShortcodeBefore.on("click",tdcContextMenu.pasteBeforeShortcodeHandler);tdcContextMenu.$_pasteShortcodeAfter.on("click",tdcContextMenu.pasteAfterShortcodeHandler);tdcContextMenu.$_copyStyle.on("click",function(f){f=tdcSidebarPanel.getCurrentStyleSettings(f,tdcContextMenu._model);if(!_.isUndefined(f)){for(var c=tdcContextMenu._model.get("tag"),b=window.tdcAdminSettings.mappedShortcodes[c].tdc_style_params,d=0;d<b.length;d++)delete f[b[d]];tdcUtil.setStorageItem("copyStyleType",
c);tdcUtil.setStorageItem("copyStyleAttrs",f)}tdcContextMenu.hide()});tdcContextMenu.$_pasteStyle.on("click",function(f){f=jQuery(f.target);if(f.hasClass("tdc-paste-style"))jQuery.when(tdcUtil.getStorageItem("copyStyleType"),tdcUtil.getStorageItem("copyStyleAttrs")).then(function(b,c){if("undefined"!==typeof b.readyState&&"done"===b.readyState&&"undefined"!==typeof b.result)var a=b.result.content;if("undefined"!==typeof c.readyState&&"done"===c.readyState&&"undefined"!==typeof c.result)var d=c.result.content;
if(!_.isUndefined(a)&&!_.isUndefined(d)&&!_.isUndefined(tdcContextMenu._model)&&(c=tdcContextMenu._model.get("tag"),c===a)){a=tdcContextMenu._model.get("attrs");b=_.clone(d);for(var f in b)b[f]=d[f];d=window.tdcAdminSettings.mappedShortcodes[c].tdc_style_params;if(!_.isUndefined(d))for(f=0;f<d.length;f++)a.hasOwnProperty(d[f])&&(b[d[f]]=a[d[f]]);tdcContextMenu._model.set("attrs",b);tdcSidebarController.onUpdate(tdcContextMenu._model);tdcSidebarPanel.clearPanel()}}),tdcContextMenu.hide();else if(f.hasClass("tdc-paste-list-style")){var c=
f.data("list-style");jQuery.when(tdcUtil.getStorageItem("copyAttrs-"+c)).then(function(b){if("undefined"!==typeof b.readyState&&"done"===b.readyState&&"undefined"!==typeof b.result)var d=b.result.content;if(!_.isUndefined(d)&&!_.isUndefined(tdcContextMenu._model)){b=tdcContextMenu._model.get("attrs");var a=tdcContextMenu._model.get("tag"),e=_.clone(b);console.log("copyListAttrs");console.log(d);for(var f=0;f<d.length;f++)null!==d[f]&&f<window.tdcAdminSettings.listStyles[c][a].length&&""!==window.tdcAdminSettings.listStyles[c][a][f]&&
(_.isArray(window.tdcAdminSettings.listStyles[c][a][f])?_.map(window.tdcAdminSettings.listStyles[c][a][f],function(a,b){_.isArray(d[f])?_.isUndefined(d[f][b])||(e[a]=d[f][b]):e[a]=d[f]}):_.isArray(d[f])?_.isUndefined(d[f][0])||(e[window.tdcAdminSettings.listStyles[c][a][f]]=d[f][0]):e[window.tdcAdminSettings.listStyles[c][a][f]]=d[f]);console.log("newAttrs");console.log(e);tdcContextMenu._model.set("attrs",e);tdcSidebarController.onUpdate(tdcContextMenu._model);tdcSidebarPanel.clearPanel()}});tdcContextMenu.hide()}});
tdcContextMenu.$_resetStyle.on("click",function(f){if(!_.isUndefined(tdcContextMenu._model)){var c=tdcContextMenu._model.get("tag"),b=tdcContextMenu._model.get("attrs");f=_.clone(b);var d=window.tdcAdminSettings.mappedShortcodes[c].tdc_style_params;if(!_.isUndefined(d)){for(var a in b){b=!1;for(var e=0;e<d.length;e++)if(a===d[e]){b=!0;break}if("tdc_zone"!==c||"type"!==a)b||delete f[a]}if(!_.isUndefined(window.tdcAdminSettings.mappedShortcodes[c].tdc_start_values)){a=JSON.parse(tdcUtil.b64DecodeUnicode(window.tdcAdminSettings.mappedShortcodes[c].tdc_start_values));
Array.isArray(a)&&(a=a[0]);for(var h in a)f.hasOwnProperty(h)||(f[h]=a[h])}}tdcContextMenu._model.set("attrs",f);tdcSidebarController.onUpdate(tdcContextMenu._model)}tdcContextMenu.hide()});tdcContextMenu.$_copyStyle.on("mouseover",function(f){""!==tdcContextMenu.$_copyListAttrs.html()&&tdcContextMenu.$_copyListAttrs.show()});tdcContextMenu.$_copyStyle.on("mouseleave",function(f){tdcContextMenu.$_copyListAttrs.hide()});tdcContextMenu.$_pasteStyle.on("mouseover",function(f){""!==tdcContextMenu.$_pasteListAttrs.html()&&
tdcContextMenu.$_pasteListAttrs.show()});tdcContextMenu.$_pasteStyle.on("mouseleave",function(f){tdcContextMenu.$_pasteListAttrs.hide()});tdcContextMenu.$_context.on("click",".tdc-copy-list-style",function(f){var c=jQuery(this).data("list-style");f=tdcSidebarPanel.getCurrentListAtts(f,tdcContextMenu._model,c);_.isUndefined(f)||(console.log("listAttrs"),console.log(f),tdcUtil.setStorageItem("copyAttrs-"+c,f));tdcContextMenu.hide()});tdcContextMenu.$_saveShortcode.on("click",tdcContextMenu.saveShortcodeHandler);
tdcContextMenu.$_deleteShortcode.on("click",tdcContextMenu.deleteHandler);tdcContextMenu.$_cloneShortcode.on("click",tdcContextMenu.cloneHandler);tdcContextMenu.$_clearShortcode.on("click",function(f){var c={error:void 0,getShortcode:""};if(!_.isUndefined(tdcContextMenu._model)){f=tdcContextMenu._model.get("tag");var b=tdcContextMenu._model.get("childCollection");if(!_.isUndefined(b))if("vc_column"===f||"vc_column_inner"===f)b.reset();else if("vc_row"===f||"vc_row_inner"===f)_.map(b.models,function(a,
b){a=a.get("childCollection");_.isUndefined(a)||a.reset()});else if("tdc_zone"===f){var d;_.map(b.models,function(a,b){_.isUndefined(d)&&(d=a);a=a.get("childCollection");_.map(a.models,function(a,b){a=a.get("childCollection");_.isUndefined(a)||a.reset()})});b=new tdcIFrameData.TdcCollection;b.add(d,{at:0});tdcContextMenu._model.set("childCollection",b)}tdcIFrameData._checkModelData(tdcContextMenu._model,c);if(!_.isUndefined(c.getShortcode)){c=tdcContextMenu._getCurrentElementOver();b="tdc-element-column";
if("vc_column_inner"===f||"vc_row_inner"===f||"vc_row"===f)b="tdc-element-inner-column";c.find(".tdc-elements").html('<div class="tdc-element-empty '+b+'" title="Empty element that should be removed by composer"></div>').addClass("tdc-dropped");tdcSidebarController.onUpdate(tdcContextMenu._model)}}tdcContextMenu.hide()})},copyShortcodeHandler:function(f){f={error:void 0,getShortcode:""};_.isUndefined(tdcContextMenu._model)||tdcIFrameData._checkModelData(tdcContextMenu._model,f);var c=tdcContextMenu._model.get("tag"),
b=tdcContextMenu._model.get("attrs"),d=tdcContextMenu._getCurrentElementOver();tdcUtil.setStorageItem("copyShortcodeType",c);tdcUtil.setStorageItem("copyShortcodeAttrs",tdcUtil.b64EncodeUnicode(JSON.stringify(b)));tdcUtil.setStorageItem("copySourceCol",tdcIFrameData._getSourceCol(d));if("vc_column"===c||"vc_column_inner"===c){var a="";f=tdcContextMenu._model.get("childCollection");_.isUndefined(f)||_.map(f.models,function(b,c){c={error:void 0,getShortcode:""};tdcIFrameData._checkModelData(b,c);_.isUndefined(c.getShortcode)||
(a+=c.getShortcode)});tdcUtil.setStorageItem("copyShortcode",tdcUtil.b64EncodeUnicode(a))}else tdcUtil.setStorageItem("copyShortcode",tdcUtil.b64EncodeUnicode(f.getShortcode));tdcContextMenu.hide()},cutShortcodeHandler:function(f){tdcContextMenu.copyShortcodeHandler(f);tdcContextMenu.deleteHandler(f,!0)},pasteBeforeShortcodeHandler:function(f){var c=tdcContextMenu._getCurrentElementOver(),b=c;jQuery.when(tdcUtil.getStorageItem("copyShortcodeType")).then(function(d){if("undefined"!==typeof d.readyState&&
"done"===d.readyState&&"undefined"!==typeof d.result)var a=d.result.content;if("undefined"!==typeof a)switch(a){case "vc_row":tdcOperationUI.isRow(c)?b.before(tdcAdminWrapperUI.$placeholder):(tdcOperationUI.isZone(c)||tdcOperationUI.isColumn(c)||tdcOperationUI.isInnerRow(c)||tdcOperationUI.isInnerColumn(c)||tdcOperationUI.isElement(c))&&new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});break;case "vc_column":tdcOperationUI.isRow(c)||tdcOperationUI.isInnerRow(c)||tdcOperationUI.isInnerColumn(c)||
tdcOperationUI.isElement(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isColumn(c)&&(b=c.find(".tdc-elements .tdc-element-column:first-child"),b.before(tdcAdminWrapperUI.$placeholder),b.hasClass("tdc-element-empty")&&b.remove());break;case "vc_row_inner":tdcOperationUI.isRow(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isColumn(c)?(b=c.find(".tdc-elements .tdc-element-column:first-child"),b.before(tdcAdminWrapperUI.$placeholder),
b.hasClass("tdc-element-empty")&&b.remove()):tdcOperationUI.isInnerRow(c)?b.before(tdcAdminWrapperUI.$placeholder):tdcOperationUI.isInnerColumn(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isElement(c)&&(c.hasClass("tdc-element-inner-column")?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):b.before(tdcAdminWrapperUI.$placeholder));break;case "vc_column_inner":tdcOperationUI.isRow(c)||tdcOperationUI.isInnerRow(c)||
tdcOperationUI.isColumn(c)||tdcOperationUI.isElement(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isInnerColumn(c)&&(b=c.find(".tdc-elements .tdc-element-inner-column:first-child"),b.before(tdcAdminWrapperUI.$placeholder),b.hasClass("tdc-element-empty")&&b.remove());break;default:""!==a&&(tdcOperationUI.isRow(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isColumn(c)?(b=c.find(".tdc-elements .tdc-element-column:first-child"),
b.before(tdcAdminWrapperUI.$placeholder),b.hasClass("tdc-element-empty")&&b.remove()):tdcOperationUI.isInnerRow(c)||tdcOperationUI.isElement(c)?b.before(tdcAdminWrapperUI.$placeholder):tdcOperationUI.isInnerColumn(c)&&(b=c.find(".tdc-elements .tdc-element-inner-column:first-child"),b.before(tdcAdminWrapperUI.$placeholder),b.hasClass("tdc-element-empty")&&b.remove()))}});tdcContextMenu._copyShortcode()},pasteAfterShortcodeHandler:function(f){var c=tdcContextMenu._getCurrentElementOver(),b=c;jQuery.when(tdcUtil.getStorageItem("copyShortcodeType")).then(function(d){if("undefined"!==
typeof d.readyState&&"done"===d.readyState&&"undefined"!==typeof d.result)var a=d.result.content;if("undefined"!==typeof a)switch(a){case "vc_row":tdcOperationUI.isRow(c)?b.after(tdcAdminWrapperUI.$placeholder):(tdcOperationUI.isZone(c)||tdcOperationUI.isColumn(c)||tdcOperationUI.isInnerRow(c)||tdcOperationUI.isInnerColumn(c)||tdcOperationUI.isElement(c))&&new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"});break;case "vc_column":tdcOperationUI.isRow(c)||tdcOperationUI.isInnerRow(c)||
tdcOperationUI.isInnerColumn(c)||tdcOperationUI.isElement(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isColumn(c)&&(b=c.find(".tdc-elements .tdc-element-column:last-child"),b.after(tdcAdminWrapperUI.$placeholder),b.hasClass("tdc-element-empty")&&b.remove());break;case "vc_row_inner":tdcOperationUI.isRow(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isColumn(c)?(b=c.find(".tdc-elements .tdc-element-column:last-child"),
b.after(tdcAdminWrapperUI.$placeholder),b.hasClass("tdc-element-empty")&&b.remove()):tdcOperationUI.isInnerRow(c)?b.after(tdcAdminWrapperUI.$placeholder):tdcOperationUI.isInnerColumn(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isElement(c)&&(c.hasClass("tdc-element-inner-column")?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):b.after(tdcAdminWrapperUI.$placeholder));break;case "vc_column_inner":tdcOperationUI.isRow(c)||
tdcOperationUI.isInnerRow(c)||tdcOperationUI.isColumn(c)||tdcOperationUI.isElement(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isInnerColumn(c)&&(b=c.find(".tdc-elements .tdc-element-inner-column:last-child"),b.after(tdcAdminWrapperUI.$placeholder),b.hasClass("tdc-element-empty")&&b.remove());break;default:""!==a&&(tdcOperationUI.isRow(c)?new tdcNotice.showNotice("Ooops! The shortcode can't be copied!",{type:"info"}):tdcOperationUI.isColumn(c)?
(b=c.find(".tdc-elements .tdc-element-column:last-child"),b.after(tdcAdminWrapperUI.$placeholder),b.hasClass("tdc-element-empty")&&b.remove()):tdcOperationUI.isInnerRow(c)||tdcOperationUI.isElement(c)?b.after(tdcAdminWrapperUI.$placeholder):tdcOperationUI.isInnerColumn(c)&&(b=c.find(".tdc-elements .tdc-element-inner-column:last-child"),b.after(tdcAdminWrapperUI.$placeholder),b.hasClass("tdc-element-empty")&&b.remove()))}});tdcContextMenu._copyShortcode(!0)},deleteHandler:function(f,c){var b=tdcContextMenu._model.get("tag");
"vc_column"!==b&&"vc_column_inner"!==b&&"tdc_zone"!==b&&("vc_row"===b?tdcRowHandlerUI.deleteHandler(f):"vc_row_inner"===b?tdcInnerRowHandlerUI.deleteHandler(f):_.isUndefined(c)?tdcElementHandlerUI.deleteHandlerConfirm(f):!0===c&&tdcElementHandlerUI.deleteHandler(f));tdcOperationUI.inactiveElementOver();tdcContextMenu.hide()},exitHandler:function(f){tdcContextMenu._model.set("current",!1);tdcSidebarPanel.clearPanel();tdcContextMenu.hide()},cloneHandler:function(f){var c=tdcContextMenu._model.get("tag");
"vc_column"!==c&&"vc_column_inner"!==c&&("vc_row"===c?tdcRowHandlerUI.cloneHandler(f):"vc_row_inner"===c?tdcInnerRowHandlerUI.cloneHandler(f):tdcElementHandlerUI.cloneHandler(f));tdcContextMenu.hide()},saveShortcodeHandler:function(f){var c=tdcContextMenu._model,b=c.get("tag");if(jQuery(f.currentTarget).hasClass("active")){var d={error:void 0,getShortcode:""};_.isUndefined(c)||tdcIFrameData._checkModelData(c,d);_.isUndefined(d.getShortcode)||tdConfirm.modal({caption:"Saving Shortcode",htmlInfoContent:function(){setTimeout(function(){jQuery("#TB_ajaxContent").find("input").focus()},
100);return'<label>Shortcode Name: </label><input type="text" autofocus><div class="info"></div>'},textYes:"Save",textNo:"Cancel",callbackYes:function(){var a=jQuery("#TB_ajaxContent"),e=a.find(".info");a=a.find("input").val().trim();if(""===a)e.html("Please enter a shortcode name");else{if("undefined"===typeof window.tdcAdminSettings.tdcSavings||""===window.tdcAdminSettings.tdcSavings)window.tdcAdminSettings.tdcSavings={};"undefined"===typeof window.tdcAdminSettings.tdcSavings[b]&&(window.tdcAdminSettings.tdcSavings[b]=
[]);for(var f=!1,g=0;g<window.tdcAdminSettings.tdcSavings[b].length;g++)if(window.tdcAdminSettings.tdcSavings[b][g].name===a){f=!0;break}if(f)e.html('Shortcode name already exists for "'+b+'" ! Choose another one');else{e.html("Saving...");if("tdc_zone"===b){e=c.get("childCollection");var m=[];_.map(e.models,function(a,b){m.push(a.attributes.content)});window.tdcAdminSettings.tdcSavings[b].push({name:a,shortcode:tdcUtil.b64EncodeUnicode(JSON.stringify(m))})}else window.tdcAdminSettings.tdcSavings[b].push({name:a,
shortcode:tdcUtil.b64EncodeUnicode(d.getShortcode)});tdcUtil.updateTdcSavings(window,function(){jQuery("#TB_ajaxContent").find(".info").html("Shortcode has been saved!");setTimeout(function(){tb_remove()},500)})}}}});tdcContextMenu.hide()}},setContextMenu:function(f,c){var b="",d=!0,a=!0;if(_.isUndefined(c))return!1;tdcOperationUI.isZone(c)?(b="Zone",d=!1,a=!0):tdcOperationUI.isRow(c)?b="Row":tdcOperationUI.isColumn(c)?(b="Column",d=!1):tdcOperationUI.isInnerRow(c)?b="Inner Row":tdcOperationUI.isInnerColumn(c)?
(b="Inner Column",d=!1):tdcOperationUI.isElement(c)&&(b="Element",a=!1);if(""!==b){var e=c.data("model_id"),h=tdcIFrameData.getModel(e);e=h.get("tag");var g=0;tdcContextMenu._setCurrentElementOver(c);jQuery.when(tdcUtil.getStorageItem("copyShortcodeType"),tdcUtil.getStorageItem("copyShortcode")).then(function(a,b){if("undefined"!==typeof a.readyState&&"done"===a.readyState&&"undefined"!==typeof a.result)var d=a.result.content;if("undefined"!==typeof b.readyState&&"done"===b.readyState&&"undefined"!==
typeof b.result)var e=b.result.content;_.isUndefined(d)||_.isUndefined(e)||""===e?(tdcContextMenu._disable(tdcContextMenu.$_pasteShortcodeBefore),tdcContextMenu._disable(tdcContextMenu.$_pasteShortcodeAfter)):(a="tdc_zone"!==d&&"vc_row"!==d&&"vc_column"!==d&&"vc_row_inner"!==d&&"vc_column_inner"!==d,tdcOperationUI.isRow(c)&&"vc_row"===d||tdcOperationUI.isColumn(c)&&(a||"vc_row_inner"===d||"vc_column"===d)||tdcOperationUI.isInnerRow(c)&&(a||"vc_row_inner"===d)||tdcOperationUI.isInnerColumn(c)&&(a||
"vc_column_inner"===d)||tdcOperationUI.isElement(c)&&a||tdcOperationUI.isElement(c)&&"vc_row_inner"===d&&!c.hasClass("tdc-element-inner-column")?(tdcContextMenu._enable(tdcContextMenu.$_pasteShortcodeBefore),tdcContextMenu._enable(tdcContextMenu.$_pasteShortcodeAfter)):(tdcContextMenu._disable(tdcContextMenu.$_pasteShortcodeBefore),tdcContextMenu._disable(tdcContextMenu.$_pasteShortcodeAfter)))});"Element"===b&&(b=window.tdcAdminSettings.mappedShortcodes[e].name);tdcContextMenu._type=b;tdcContextMenu._model=
h;!0===tdcMain.getSidebarInline()&&!1===tdcMain.getSidebarHidden()&&(g=tdcSidebar.$_sidebar.width());tdcContextMenu.$_currentType.html(b);"contextmousedown"===f.type&&tdcContextMenu.$_context.show().css({left:f.pageX+g,top:f.pageY-tdcAdminIFrameUI._liveIframeWindowObject.scrollY});tdcContextMenu.$_context.find(".tdc-copy-list-style, .tdc-paste-list-style").remove();f=!1;if(!_.isUndefined(window.tdcAdminSettings.listStyles))for(var m in window.tdcAdminSettings.listStyles)for(var n in window.tdcAdminSettings.listStyles[m])n===
e&&(tdcContextMenu.$_copyListAttrs.append('<li class="tdc-copy-list-style active" data-list-style="'+m+'">Copy '+m+"</li>"),tdcContextMenu.$_pasteListAttrs.append('<li class="tdc-paste-list-style active" data-list-style="'+m+'">Paste '+m+"</li>"),f=!0);f?(tdcContextMenu.$_copyAttrs.show(),tdcContextMenu.$_copyStyle.find("i").show(),tdcContextMenu.$_pasteStyle.find("i").show()):(tdcContextMenu.$_copyAttrs.hide(),tdcContextMenu.$_copyStyle.find("i").hide(),tdcContextMenu.$_pasteStyle.find("i").hide());
_.isUndefined(window.tdcAdminSettings.mappedShortcodes[e].tdc_style_params)&&!f?(tdcContextMenu._disable(tdcContextMenu.$_copyStyle),tdcContextMenu._disable(tdcContextMenu.$_resetStyle)):(tdcContextMenu._enable(tdcContextMenu.$_copyStyle),tdcContextMenu._enable(tdcContextMenu.$_resetStyle));jQuery.when(tdcUtil.getStorageItem("copyStyleType"),tdcUtil.getStorageItem("copyStyleAttrs")).then(function(a,b){if("undefined"!==typeof a.readyState&&"done"===a.readyState&&"undefined"!==typeof a.result)var c=
a.result.content;if("undefined"!==typeof b.readyState&&"done"===b.readyState&&"undefined"!==typeof b.result)var d=b.result.content;_.isUndefined(c)||_.isUndefined(d)?tdcContextMenu._disable(tdcContextMenu.$_pasteStyle):tdcContextMenu._enable(tdcContextMenu.$_pasteStyle)});"tdc_zone"!==e&&tdcContextMenu._enable(tdcContextMenu.$_copyShortcode);d?(tdcContextMenu._enable(tdcContextMenu.$_saveShortcode),tdcContextMenu._enable(tdcContextMenu.$_deleteShortcode),tdcContextMenu._enable(tdcContextMenu.$_cloneShortcode),
tdcContextMenu._enable(tdcContextMenu.$_cutShortcode)):(tdcContextMenu._disable(tdcContextMenu.$_saveShortcode),tdcContextMenu._disable(tdcContextMenu.$_deleteShortcode),tdcContextMenu._disable(tdcContextMenu.$_cloneShortcode),tdcContextMenu._disable(tdcContextMenu.$_cutShortcode));a?tdcContextMenu._enable(tdcContextMenu.$_clearShortcode):tdcContextMenu._disable(tdcContextMenu.$_clearShortcode);"tdc_zone"===e&&tdcContextMenu._enable(tdcContextMenu.$_saveShortcode);return!0}return!1},_enable:function(f){f.addClass("active")},
_disable:function(f){f.removeClass("active")},hide:function(){tdcContextMenu.$_context.hide()},_setCurrentElementOver:function(f){tdcContextMenu.$_currentElementOver=f},_getCurrentElementOver:function(){return tdcContextMenu.$_currentElementOver},_copyShortcode:function(f){tdcOperationUI.setCurrentElementOver(tdcContextMenu._getCurrentElementOver());tdcOperationUI._copyElement(f);tdcContextMenu.hide()}};tdcContextMenu.init()})();
(function(f,c,b,d){f.widget("wp.wpColorPicker",{options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0,width:255,mode:"hsv"},_create:function(){if(f.support.iris){var a=this,b=a.element;f.extend(a.options,b.data());a.close=f.proxy(a.close,a);a.initialValue=b.val();b.addClass("wp-color-picker").hide().wrap('<div class="wp-picker-container" />');a.wrap=b.parent();a.toggler=f('<a tabindex="0" class="wp-color-result" />').insertBefore(b).css({backgroundColor:a.initialValue}).attr("title",wp.i18n.__("Select Color")).attr("data-current",
"");a.pickerContainer=f('<div class="wp-picker-holder" />').insertAfter(b);a.button=f('<input type="button" class="button button-small hidden" />');a.options.defaultColor?a.button.addClass("wp-picker-default").val(wp.i18n.__("Default")):a.button.addClass("wp-picker-clear").val(wp.i18n.__("Clear"));b.wrap('<span class="wp-picker-input-wrap" />').after(a.button);b.iris({target:a.pickerContainer,hide:a.options.hide,width:a.options.width,mode:a.options.mode,palettes:a.options.palettes,change:function(b,
c){a.toggler.css({backgroundColor:c.color.toString()});f.isFunction(a.options.change)&&a.options.change.call(this,b,c)}});b.val(a.initialValue);a._addListeners();a.options.hide||a.toggler.click()}},_addListeners:function(){var a=this;a.wrap.on("click.wpcolorpicker",function(a){a.stopPropagation()});a.toggler.click(function(){a.toggler.hasClass("wp-picker-open")?a.close():a.open()});a.element.change(function(b){var c=f(this).val();if(""===c||"#"===c)a.toggler.css("backgroundColor",""),f.isFunction(a.options.clear)&&
a.options.clear.call(this,b)});a.toggler.on("keyup",function(b){if(13===b.keyCode||32===b.keyCode)b.preventDefault(),a.toggler.trigger("click").next().focus()});a.button.click(function(b){var c=f(this);c.hasClass("wp-picker-clear")?(a.element.val(""),a.toggler.css("backgroundColor",""),f.isFunction(a.options.clear)&&a.options.clear.call(this,b)):c.hasClass("wp-picker-default")&&a.element.val(a.options.defaultColor).change()})},open:function(){this.element.show().iris("toggle").focus();this.button.removeClass("hidden");
this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");f("body").trigger("click.wpcolorpicker").on("click.wpcolorpicker",this.close)},close:function(){this.element.hide();this.element.iris("instance")&&this.element.iris("toggle");this.button.addClass("hidden");this.wrap.removeClass("wp-picker-active");this.toggler.removeClass("wp-picker-open");f("body").off("click.wpcolorpicker",this.close)},color:function(a){if(a===d)return this.element.iris("option","color");this.element.iris("option",
"color",a)},defaultColor:function(a){if(a===d)return this.options.defaultColor;this.options.defaultColor=a}});typeof Color.fn.toString!==d&&(Color.fn.toString=function(){if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(6>a.length)for(var b=6-a.length-1;0<=b;b--)a="0"+a;return"#"+a});f.cs_ParseColorValue=function(a){a=a.replace(/\s+/g,"");var b=-1!==a.indexOf("rgba")?parseFloat(100*a.replace(/^.*,(.+)\)/,
"$1")):100;return{value:a,alpha:b,rgba:100>b?!0:!1}};f.widget("wp.tdGradientColorPicker",f.wp.wpColorPicker,{open_gradient:function(a){this.element.show().iris("show").focus();this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");this.wrap.find(".tdc-gradient-result-percentage").html("");this.element.tdGradient().get(0).init(a)}});f.widget("wp.tdPaletteColorPicker",f.wp.wpColorPicker,{open_palette:function(a){this.element.show().iris("show").focus();
this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");this.element.tdPalette().get(0).init(a)},save_color:function(){var a=this.element.tdPalette().get(0).color;if("undefined"!==typeof a){""===c.tdcAdminSettings.tdcSavings&&(c.tdcAdminSettings.tdcSavings={});"undefined"===typeof c.tdcAdminSettings.tdcSavings.recentColors&&(c.tdcAdminSettings.tdcSavings.recentColors=[]);var b=c.btoa(JSON.stringify(a)),d=c.tdcAdminSettings.tdcSavings.recentColors.indexOf(b),
g=f(".tdc-gradient-color-values"),m=f(".tdc-color-values");-1!==d&&(c.tdcAdminSettings.tdcSavings.recentColors.splice(d,1),f('.tdc-color-value[data-color="'+a+'"]').remove(),f('.tdc-gradient-color-value[data-color="'+a+'"]').remove());c.tdcAdminSettings.tdcSavings.recentColors.push(b);23<=c.tdcAdminSettings.tdcSavings.recentColors.length&&(m.find(".tdc-color-value:last").remove(),g.find(".tdc-gradient-color-value:last").remove(),c.tdcAdminSettings.tdcSavings.recentColors.splice(0,1));tdcUtil.updateTdcSavings();
d=b="";/var\(--[a-zA-z0-9\-]*\)/.test(a)&&(b='<i class="tdc-font-tdmp tdc-font-tdmp-globe"></i>',d="Global color: "+a);m.prepend('<div class="tdc-color-value" data-color="'+a+'" style="background-color:'+a+'" title="'+d+'"><div class="tdc-color-value-delete"></div>'+b+"</div>");g.prepend('<div class="tdc-gradient-color-value" data-color="'+a+'" style="background-color:'+a+'" title="'+d+'"><div class="tdc-gradient-color-value-delete"></div>'+b+"</div>")}}});"undefined"===typeof f.fn.tdGradient&&(f.fn.tdGradient=
function(){return this.each(function(){var a=this,b=f(this);a.$this=b;if(!1!==b.data("rgba")){var h=f.cs_ParseColorValue(b.val());b.tdGradientColorPicker({clear:function(){a.$container.find(".tdc-global-colors-values .tdc-global-color-value").each(function(){f(this).removeClass("current")});jQuery("#tdc-gradient").prev(".tdc-property-wrap").find("i").remove();b.trigger("keyup")},change:function(c,d){c=d.color.toString();b.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",
c);b.val(c).trigger("change");a.triggerSelection?a.setColor(c,!0):a.setColor(c)},create:function(){var e=b.data("a8cIris"),m=b.closest(".wp-picker-container"),n=f('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(m.find(".wp-picker-holder")),k=n.find(".cs-alpha-slider"),l=n.find(".cs-alpha-text"),p=n.find(".cs-alpha-slider-offset"),q=f('<div class="tdc-gradient-result-wrap"></div>').prependTo(m),
r=f('<div class="tdc-gradient-result"><div class="tdc-gradient-color tdc-gradient-left-color"></div><div class="tdc-gradient-color tdc-gradient-right-color"></div></div>').prependTo(q);f('<div class="tdc-gradient-degree-label">deg.</div><input class="tdc-gradient-degree" placeholder="0">').appendTo(m.find(".wp-picker-input-wrap"));f('<div class="tdc-gradient-result-labels"><div class="tdc-gradient-result-label">Solid color</div><div class="tdc-gradient-result-label tdc-gradient-result-percentage"></div><div class="tdc-gradient-result-label">Gradient</div></div>').prependTo(m);
f('<div class="tdc-gradient-save">Save Gradient</div>').appendTo(m);var u=f('<div class="tdc-gradient-presets">Gradient presets</div>').appendTo(m);q=f('<div class="tdc-gradient-values-wrapper"></div>').appendTo(m);var x=f('<div class="tdc-gradient-values"></div>').appendTo(q);q=f('<div class="tdc-gradient-color-values-wrapper"></div>').appendTo(m);q=f('<div class="tdc-gradient-color-values"></div>').appendTo(q);if("undefined"!==typeof c.tdcAdminSettings.tdcSavings.gradients&&c.tdcAdminSettings.tdcSavings.gradients.length)for(var t=
!1,v=c.tdcAdminSettings.tdcSavings.gradients.length-1;0<=v;v--){var B=c.tdcAdminSettings.tdcSavings.gradients[v];try{var z=JSON.parse(c.atob(B));"undefined"!==typeof z.css&&(t=!0,f('<div class="tdc-gradient-value" style="'+z.css+'" data-gradient="'+B+'"><div class="tdc-gradient-value-delete"></div></div>').appendTo(x))}catch(y){}}t||u.hide();a.$container=m;a.$gradientResult=r;if("undefined"!==typeof c.tdc_wm_global_colors){var w=f('<div class="tdc-global-colors-values"></div>').insertAfter(m.find(".tdc-gradient-values-wrapper"));
Object.entries(c.tdc_wm_global_colors).forEach(function(a){var b=a[1].color,c=a[1].name;a="var(--"+a[0].replace(/_/g,"-")+")";f('<div class="tdc-global-color-value" style="background-color: '+a+'" data-color="'+b+'" data-color-var="'+a+'" title="'+c+'"></div>').prependTo(w)})}k.slider({slide:function(a,c){a=parseFloat(c.value/100);e._color._alpha=a;b.tdGradientColorPicker("color",e._color.toString());l.text(1>a?a:"")},create:function(){var c=parseFloat(h.alpha/100);l.text(1>c?c:"");p.css("background-color",
h.value);m.on("click",".wp-picker-clear",function(){e._color._alpha=1;l.text("");k.slider("option","value",100).trigger("slide");a.triggerSelection?a.setColor(d,!0):a.setColor(d)});m.on("click",".wp-picker-default",function(){var a=f.cs_ParseColorValue(b.data("default-color")),c=parseFloat(a.alpha/100);e._color._alpha=c;l.text(1>c?c:"");k.slider("option","value",a.alpha).trigger("slide")});m.on("click",".wp-color-result",function(a){n.toggle()});f("body").on("click.wpcolorpicker",function(){n.hide()});
m.on("change keyup",".tdc-gradient-degree",function(b){b=f(this);a.degree=b.val().trim();a.mixedColors=a._getMixedColors();a._updateGradient();a._saveValue()})},value:h.alpha,step:1,min:0,max:100});if("undefined"!==typeof c.tdcAdminSettings.tdcSavings.recentColors&&c.tdcAdminSettings.tdcSavings.recentColors.length)for(v=c.tdcAdminSettings.tdcSavings.recentColors.length-1;0<=v;v--){t=c.tdcAdminSettings.tdcSavings.recentColors[v];try{z=JSON.parse(c.atob(t)),"undefined"!==typeof z&&(r=t="",/var\(--[a-zA-z0-9\-]*\)/.test(z)&&
(t='<i class="tdc-font-tdmp tdc-font-tdmp-globe"></i>',r="Global color: "+z),f('<div class="tdc-gradient-color-value" style="background-color: '+z+'" data-color="'+z+'" title="'+r+'"><div class="tdc-gradient-color-value-delete"></div>'+t+"</div>").appendTo(q))}catch(y){}}}})}else b.tdGradientColorPicker({clear:function(){b.trigger("keyup")},change:function(a,c){b.val(c.color.toString()).trigger("change")}});"undefined"===typeof a.setColor&&(a.setColor=function(b,c){"undefined"===typeof a.currentColor&&
(a.currentColor="left",a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<span class="tdc-gradient-selected-color"></span>'),a.color1=b);switch(a.currentColor){case "left":a.color1=b;"undefined"!==typeof b||"undefined"===typeof a.color2||a.mixedColors.length||(a.color1=a.color2,a.color2=b,a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),
a._showColor(a.color1));break;case "right":a.color2=b;"undefined"!==typeof b||"undefined"===typeof a.color1||a.mixedColors.length||(a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),a.currentColor="left",a._showColor(a.color1));break;case "mixed":a._setMixedColor(b),"undefined"===typeof b&&"undefined"!==typeof a.color1&&(a.$gradientResult.find(".tdc-gradient-selected-color").remove(),
a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),a.currentColor="left",a._showColor(a.color1))}b=a.$container.find(".tdc-gradient-degree");"undefined"===typeof a.degree?b.val(""):b.val(a.degree);a.mixedColors=a._getMixedColors();a._updateGradient();!0===c&&a._saveValue()},a._showColor=function(b){a.triggerSelection=!1;a.$this.tdGradientColorPicker("color",b);a.triggerSelection=!0;b=f.cs_ParseColorValue(b);var c=parseFloat(b.alpha/100);c=1>c?c:"";
a.$container.find(".cs-alpha-text").text(c);a.$container.find(".cs-alpha-slider-offset").css("background-color",b.value);a.$container.find(".cs-alpha-slider").slider("option","value",b.alpha).trigger("slide")},a.$container.on("mousedown",".tdc-gradient-color",function(b){b.stopImmediatePropagation();var c=f(this),d=a.$container.find(".tdc-gradient-result-percentage");a.$gradientResult.find(".tdc-gradient-selected-color").remove();c.html('<div class="tdc-gradient-selected-color"></div>');c.hasClass("tdc-gradient-mix-color")?
(c.addClass("tdc-gradient-current-mix"),a.eventOffsetX=b.offsetX,d.html(Math.round(100-c.data("percentage"))+"%")):d.html("");b=f(b.currentTarget);if(b.hasClass("tdc-gradient-left-color")){if(a.currentColor="left","undefined"!==typeof a.color1)var e=a.color1}else b.hasClass("tdc-gradient-right-color")?(a.currentColor="right","undefined"!==typeof a.color2&&(e=a.color2)):(a.currentColor="mixed",b=a._getCurrentMixedColor(),"undefined"!==typeof b&&(e=b.color));"undefined"!==typeof e&&a._showColor(e)}),
a.$container.on("mousedown",".tdc-gradient-result",function(b){if(b.target===b.currentTarget){var c=f(b.target);c.find(".tdc-gradient-selected-color").remove();var d=f('<div class="tdc-gradient-mix-color tdc-gradient-color"><div class="tdc-gradient-selected-color"></div></div>').appendTo(c);b=b.pageX-c.offset().left-d.outerWidth(!0)/2;c=Math.round(100-100*b/(c.width()-d.outerWidth(!0)));d.css("left",b);d.data("percentage",c);a.currentColor="mixed"}}),a.$container.on("mouseup",".tdc-gradient-mix-color",
function(b){f(this).removeClass("tdc-gradient-current-mix");a.eventOffsetX=d}),a.$container.on("mousemove",".tdc-gradient-result",function(b){var c=a.$container.find(".tdc-gradient-result-percentage"),d=a.$container.find(".tdc-gradient-result"),e=d.find(".tdc-gradient-right-color"),f=d.find(".tdc-gradient-current-mix");if(f.length){var g=0;"undefined"!==typeof a.eventOffsetX&&(g=a.eventOffsetX);b=b.pageX-d.offset().left-f.width()/2-g;g=100*b/(d.width()-f.outerWidth(!0));0>g?b=g=0:100<g&&(g=100,b=
d.width()-e.outerWidth(!0));c.html(Math.round(g)+"%");f.css("left",b);f.data("percentage",Math.round(100-g));a.mixedColors=a._getMixedColors();a._updateGradient();a._saveValue()}}),a._getCurrentMixedColor=function(){var b=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color > .tdc-gradient-selected-color"),c;b.length&&(c={color:b.parent().data("color"),percentage:b.parent().data("percentage")});return c},a._setMixedColor=function(b){var c=a.$container.find(".tdc-gradient-result-percentage"),
d=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color > .tdc-gradient-selected-color");d.length&&("undefined"===typeof b?(d.parent().remove(),c.html("")):d.parent().data("color",b))},a._getMixedColors=function(){var b=[];a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color").each(function(){var a=f(this),c=a.data("color");a=a.data("percentage");b.push({color:c,percentage:a})});b.sort(function(a,b){return a.percentage-b.percentage});return b},a._updateGradient=
function(){if("undefined"!==typeof a.color1&&"undefined"!==typeof a.color2&&a.color1!==a.color2){var b="",c="",e=c="",h=["-webkit-linear-gradient","linear-gradient"];c="undefined"!==typeof a.degree&&""!==a.degree.trim()?a.degree+"deg,":"0deg,";for(var l=0;l<h.length;l++){var p="";if("undefined"!==typeof a.mixedColors)for(var q=0;q<a.mixedColors.length;q++){var r="";"undefined"!==typeof a.mixedColors[q].percentage&&(r=a.mixedColors[q].percentage+"%");"undefined"!==typeof a.mixedColors[q].color&&(p+=
a.mixedColors[q].color+" "+r+",")}b+="background: "+h[l]+"("+c+a.color2+","+p+a.color1+");";e+="background: "+h[l]+"( -90deg,"+a.color2+","+p+a.color1+");"}c=c+a.color2+","+p+a.color1;a.result={type:"gradient",color1:a.color1,color2:a.color2,mixedColors:a.mixedColors,degree:a.degree,css:b,cssParams:c};a.$gradientResult.attr("style",e)}else if("undefined"!==typeof a.color1||"undefined"!==typeof a.color2){b="color1";var u="color2";"undefined"!==typeof a.color2&&(b="color2",u="color1");if(a.mixedColors.length){var x=
a.mixedColors[0];"undefined"!==typeof a.color2&&(x=a.mixedColors[a.mixedColors.length-1]);b=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color");f.each(b,function(){var b=f(this);x.color===b.data("color")&&x.percentage===b.data("percentage")&&(a[u]=b.data("color"),b.remove())});a.mixedColors=a._getMixedColors();a._updateGradient();a._showColor(a[u])}else a.result={type:"solid",color:a[b],css:"background: "+a[b]+";"},a.$gradientResult.css("background",a[b])}else a.result=d,a.$gradientResult.css("background",
"")},a.$container.on("mousedown",".tdc-gradient-save",function(b){var d=a.$container.find(".tdc-gradient-values");""===c.tdcAdminSettings.tdcSavings&&(c.tdcAdminSettings.tdcSavings={});"undefined"===typeof c.tdcAdminSettings.tdcSavings.gradients&&(c.tdcAdminSettings.tdcSavings.gradients=[]);if("gradient"===a.result.type){var e=c.btoa(JSON.stringify(a.result));-1===c.tdcAdminSettings.tdcSavings.gradients.indexOf(e)&&(c.tdcAdminSettings.tdcSavings.gradients.push(e),tdcUtil.updateTdcSavings(this,function(){f('<div class="tdc-gradient-value" style="'+
a.result.css+'" data-gradient="'+e+'"><div class="tdc-gradient-value-delete"></div></div>').prependTo(d);a.$container.find(".tdc-gradient-presets").show()}))}}),a.$container.on("mousedown",".tdc-gradient-value",function(b){b=jQuery(b.currentTarget).data("gradient");var c=a.$container.parent().prev(".tdc-property-gradient"),d=c.find("input");c=c.find(".tdc-gradient-wrap");a.init(b);d.val(b);c.attr("style",a.result.css);d.trigger("change")}),a.$container.on("mousedown",".tdc-gradient-color-value",function(b){var c=
jQuery(b.currentTarget).data("color"),d=a.$container.parent().prev(".tdc-property-gradient");b=d.find("input");d=d.find(".tdc-gradient-wrap");c=tdcUtil.b64EncodeUnicode(JSON.stringify({type:"gradient",color1:c,color2:c,mixedColors:[],degree:"-90",css:"background-color: "+c+";",cssParams:"0deg,"+c+","+c}));a.init(c);b.val(c);d.attr("style",a.result.css);b.trigger("change")}),a.$container.on("mousedown",".tdc-global-color-value",function(b){var c=jQuery(b.currentTarget);b=c.data("color");c=c.data("color-var");
"undefined"!==typeof c?a.init(c):a.init(b);a._saveValue()}),a.$container.on("tdc_wm_global_colors_update",".tdc-global-colors-values",function(b,c,d){if("new"===c){b=d.color;var e=d.color_name,g="var(--"+d.color_option_id.replace(/_/g,"-")+")";f('<div class="tdc-global-color-value" style="background-color: '+g+'" data-color="'+b+'" data-color-var="'+g+'" title="'+e+'"></div>').prependTo(f(this))}"update"===c&&(b=d.color,e="var(--"+d.option.replace(/_/g,"-")+")",f(this).find("[data-color-var='"+e+
"']").data("color",b));"col_name_update"===c&&(e=d.new_option,b="var(--"+d.option.replace(/_/g,"-")+")",e="var(--"+e.replace(/_/g,"-")+")",g=d.color_name,f(this).find("[data-color-var='"+b+"']").attr("title",g).data("color-var",e).attr("data-color-var",e).css("background",e));"delete"===c&&(c="var(--"+d.option.replace(/_/g,"-")+")",f(this).find("[data-color-var='"+c+"']").remove(),a.$container.find(".wp-picker-clear").trigger("click"),a.$container.find(".tdc-gradient-color-values [data-color='"+c+
"'] .tdc-gradient-color-value-delete").trigger("mousedown"))}),a.$container.on("mousedown",".tdc-gradient-value-delete",function(b){b.preventDefault();b.stopImmediatePropagation();if("undefined"===typeof c.tdcAdminSettings.tdcSavings.gradients||0===c.tdcAdminSettings.tdcSavings.gradients.length)a.$container.find(".tdc-gradient-value").remove();else{var d=f(this).parent();b=d.data("gradient");b=c.tdcAdminSettings.tdcSavings.gradients.indexOf(b);c.tdcAdminSettings.tdcSavings.gradients.splice(b,1);b=
!0;for(var e in c.tdcAdminSettings.tdcSavings)if(c.tdcAdminSettings.tdcSavings[e].length){b=!1;break}b&&(c.tdcAdminSettings.tdcSavings="");tdcUtil.updateTdcSavings(this,function(){""!==c.tdcAdminSettings.tdcSavings&&0!==c.tdcAdminSettings.tdcSavings.gradients.length||a.$container.find(".tdc-gradient-presets").hide();d.remove()})}}),a.$container.on("mousedown",".tdc-gradient-color-value-delete",function(a){a.preventDefault();a.stopImmediatePropagation();var b=f(this).parent();a=b.data("color");a=c.btoa(JSON.stringify(a));
a=c.tdcAdminSettings.tdcSavings.recentColors.indexOf(a);c.tdcAdminSettings.tdcSavings.recentColors.splice(a,1);a=!0;for(var d in c.tdcAdminSettings.tdcSavings)if(c.tdcAdminSettings.tdcSavings[d].length){a=!1;break}a&&(c.tdcAdminSettings.tdcSavings="");tdcUtil.updateTdcSavings(this,function(){b.remove()})}),a._saveValue=function(){var b=a.$container.parent().prev(".tdc-property-gradient"),d=b.find("input");b=b.find(".tdc-gradient-wrap");if("undefined"===typeof a.result)d.val(""),b.removeAttr("style");
else{var e=b.find("i");/var\(--[a-zA-z0-9\-]*\)/.test(a.result.color)?(e.length||b.append('<i class="tdc-font-tdmp tdc-font-tdmp-globe"></i>'),b.attr("title","Global color: "+a.result.color)):(a.$container.find(".tdc-global-colors-values .tdc-global-color-value").each(function(){f(this).removeClass("current")}),e.length&&e.remove());switch(a.result.type){case "solid":d.val(a.result.color);break;case "gradient":d.val(c.btoa(JSON.stringify(a.result)))}b.attr("style",a.result.css)}d.trigger("change")},
a.init=function(b){a.triggerSelection=!1;a.color1=d;a.color2=d;a.mixedColors=d;a.degree=d;a.currentColor=d;a.$container.find(".cs-alpha-text").text("");a.$container.find(".cs-alpha-slider-offset").css("background-color","");a.$container.find(".cs-alpha-slider").slider("option","value",100).trigger("slide");a.$container.find(".tdc-global-colors-values .tdc-global-color-value").each(function(){var a=f(this);a.removeClass("current");/var\(--[a-zA-z0-9\-]*\)/.test(b)&&a.data("color-var")===b&&a.addClass("current")});
var e=a.$container.find(".tdc-gradient-result");e.find(".tdc-gradient-mix-color").remove();if("undefined"!==typeof b&&""!==b){try{b=JSON.parse(c.atob(b));a.color1=b.color1;a.color2=b.color2;a.degree=b.degree;a.setColor(a.color1);a.$this.tdGradientColorPicker("color",a.color1);a.mixedColors=b.mixedColors;if("undefined"!==typeof a.mixedColors)for(var h=0;h<a.mixedColors.length;h++){var g=f('<div class="tdc-gradient-color tdc-gradient-mix-color"></div>').appendTo(e),l=(e.width()-g.outerWidth(!0))*(100-
a.mixedColors[h].percentage)/100;g.css("left",l);g.data("percentage",a.mixedColors[h].percentage);"undefined"!==typeof a.mixedColors[h].color&&g.data("color",a.mixedColors[h].color)}a._updateGradient()}catch(p){a.setColor(b),a.$this.tdGradientColorPicker("color",b)}e=f.cs_ParseColorValue(a.color1);h=parseFloat(e.alpha/100);h=1>h?h:"";a.$container.find(".cs-alpha-text").text(h);a.$container.find(".cs-alpha-slider-offset").css("background-color",e.value);a.$container.find(".cs-alpha-slider").slider("option",
"value",e.alpha).trigger("slide")}else a.setColor(d),a.$container.find(".wp-picker-clear").trigger("click");a.triggerSelection=!0})})});"undefined"===typeof f.fn.tdPalette&&(f.fn.tdPalette=function(){return this.each(function(){var a=this,b=f(this);a.$this=b;if(!1!==b.data("rgba")){var h=f.cs_ParseColorValue(b.val());b.tdPaletteColorPicker({clear:function(){a.$container.find(".tdc-global-colors-values .tdc-color-value").each(function(){f(this).removeClass("current")});jQuery("#tdc-palette").prev(".tdc-property-wrap").find("i").remove();
b.trigger("keyup")},change:function(c,d){c=d.color.toString();b.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",c);b.val(c).trigger("change");a.triggerSelection?a.setColor(c,!0):a.setColor(c)},create:function(){var e=b.data("a8cIris"),m=b.closest(".wp-picker-container"),n=f('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(m.find(".wp-picker-holder")),k=
n.find(".cs-alpha-slider"),l=n.find(".cs-alpha-text"),p=n.find(".cs-alpha-slider-offset"),q=f('<div class="tdc-color-values"></div>').appendTo(m.find(".wp-picker-holder"));a.$container=m;if("undefined"!==typeof c.tdcAdminSettings.tdcSavings.recentColors&&c.tdcAdminSettings.tdcSavings.recentColors.length)for(var r=c.tdcAdminSettings.tdcSavings.recentColors.length-1;0<=r;r--){var u=c.tdcAdminSettings.tdcSavings.recentColors[r];try{var x=JSON.parse(c.atob(u));if("undefined"!==typeof x){var t=u="";/var\(--[a-zA-z0-9\-]*\)/.test(x)&&
(u='<i class="tdc-font-tdmp tdc-font-tdmp-globe"></i>',t="Global color: "+x);f('<div class="tdc-color-value" style="background-color: '+x+'" data-color="'+x+'" title="'+t+'"><div class="tdc-color-value-delete"></div>'+u+"</div>").appendTo(q)}}catch(B){}}if("undefined"!==typeof c.tdc_wm_global_colors){var v=f('<div class="tdc-global-colors-values"></div>').insertAfter(m.find(".wp-picker-holder .cs-alpha-wrap"));Object.entries(c.tdc_wm_global_colors).forEach(function(a){var b=a[1].color,c=a[1].name;
a="var(--"+a[0].replace(/_/g,"-")+")";f('<div class="tdc-color-value" style="background-color: '+a+'" data-color="'+b+'" data-color-var="'+a+'" title="'+c+'"></div>').prependTo(v)})}k.slider({slide:function(a,c){a=parseFloat(c.value/100);e._color._alpha=a;b.tdPaletteColorPicker("color",e._color.toString());l.text(1>a?a:"")},create:function(){var c=parseFloat(h.alpha/100);l.text(1>c?c:"");p.css("background-color",h.value);m.on("click",".wp-picker-clear",function(){e._color._alpha=1;l.text("");k.slider("option",
"value",100).trigger("slide");a.triggerSelection?a.setColor(d,!0):a.setColor(d)});m.on("click",".wp-picker-default",function(){var a=f.cs_ParseColorValue(b.data("default-color")),c=parseFloat(a.alpha/100);e._color._alpha=c;l.text(1>c?c:"");k.slider("option","value",a.alpha).trigger("slide")});m.on("click",".wp-color-result",function(a){n.toggle()});f("body").on("click.wpcolorpicker",function(){n.hide()})},value:h.alpha,step:1,min:0,max:100})}})}else b.tdPaletteColorPicker({clear:function(){b.trigger("keyup")},
change:function(a,c){b.val(c.color.toString()).trigger("change")}});"undefined"===typeof a.setColor&&(a.setColor=function(b,c){a.color=b;!0===c&&a._saveValue()},a._saveValue=function(){var b=a.$container.parent().prev(".tdc-property-colorpicker"),c=b.find("input");b=b.find(".tdc-colorpicker-wrap");if("undefined"===typeof a.color)c.val(""),b.removeAttr("style");else{var d=b.find("i");/var\(--[a-zA-z0-9\-]*\)/.test(a.color)?(d.length||b.append('<i class="tdc-font-tdmp tdc-font-tdmp-globe"></i>'),b.attr("title",
"Global color: "+a.color)):(a.$container.find(".tdc-global-colors-values .tdc-color-value").each(function(){f(this).removeClass("current")}),d.length&&d.remove());c.val(a.color);b.attr("style","background: "+a.color)}c.trigger("change")},a.$container.on("mousedown",".tdc-color-value",function(b){var c=jQuery(b.currentTarget);b=c.data("color");c=c.data("color-var");"undefined"!==typeof c?a.init(c):a.init(b);a._saveValue()}),a.$container.on("mousedown",".tdc-color-value-delete",function(a){a.preventDefault();
a.stopImmediatePropagation();var b=f(this).parent();a=b.data("color");a=c.btoa(JSON.stringify(a));a=c.tdcAdminSettings.tdcSavings.recentColors.indexOf(a);c.tdcAdminSettings.tdcSavings.recentColors.splice(a,1);a=!0;for(var d in c.tdcAdminSettings.tdcSavings)if(c.tdcAdminSettings.tdcSavings[d].length){a=!1;break}a&&(c.tdcAdminSettings.tdcSavings="");tdcUtil.updateTdcSavings(this,function(){b.remove()})}),a.$container.on("tdc_wm_global_colors_update",".tdc-global-colors-values",function(b,c,d){if("new"===
c){b=d.color;var e=d.color_name,h="var(--"+d.color_option_id.replace(/_/g,"-")+")";f('<div class="tdc-color-value" style="background-color: '+h+'" data-color="'+b+'" data-color-var="'+h+'" title="'+e+'"></div>').prependTo(f(this))}"update"===c&&(b=d.color,e="var(--"+d.option.replace(/_/g,"-")+")",f(this).find("[data-color-var='"+e+"']").data("color",b));"col_name_update"===c&&(e=d.new_option,b="var(--"+d.option.replace(/_/g,"-")+")",e="var(--"+e.replace(/_/g,"-")+")",h=d.color_name,f(this).find("[data-color-var='"+
b+"']").attr("title",h).data("color-var",e).attr("data-color-var",e).css("background",e));"delete"===c&&(c="var(--"+d.option.replace(/_/g,"-")+")",f(this).find("[data-color-var='"+c+"']").remove(),a.$container.find(".tdc-color-values [data-color='"+c+"'] .tdc-color-value-delete").trigger("mousedown"))}),a.init=function(b){a.triggerSelection=!1;a.color=d;a.$container.find(".cs-alpha-text").text("");a.$container.find(".cs-alpha-slider-offset").css("background-color","");a.$container.find(".cs-alpha-slider").slider("option",
"value",100).trigger("slide");a.$container.find(".tdc-global-colors-values .tdc-color-value").each(function(){var a=f(this);a.removeClass("current");/var\(--[a-zA-z0-9\-]*\)/.test(b)&&a.data("color-var")===b&&a.addClass("current")});if("undefined"!==typeof b&&""!==b){a.setColor(b);a.$this.tdPaletteColorPicker("color",b);var c=f.cs_ParseColorValue(a.color),e=parseFloat(c.alpha/100);e=1>e?e:"";a.$container.find(".cs-alpha-text").text(e);a.$container.find(".cs-alpha-slider-offset").css("background-color",
c.value);a.$container.find(".cs-alpha-slider").slider("option","value",c.alpha).trigger("slide")}else a.setColor(d),a.$container.find(".wp-picker-clear").trigger("click");a.triggerSelection=!0})})})})(jQuery,window,document);
(function(f){var c=function(){this.cssImportStatements=[];this.cssKeyframeStatements=[];this.cssRegex=/([\s\S]*?){([\s\S]*?)}/gi;this.cssMediaQueryRegex="((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})";this.cssKeyframeRegex="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})";this.combinedCSSRegex="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})";this.cssCommentsRegex="(\\/\\*[\\s\\S]*?\\*\\/)";this.cssImportStatementRegex=/@import .*?;/gi};c.prototype.stripComments=
function(b){return b.replace(new RegExp(this.cssCommentsRegex,"gi"),"")};c.prototype.parseCSS=function(b){if(void 0===b)return[];for(var c=[];;){var a=this.cssImportStatementRegex.exec(b);if(null!==a)this.cssImportStatements.push(a[0]),c.push({selector:"@imports",type:"imports",styles:a[0]});else break}b=b.replace(this.cssImportStatementRegex,"");a=new RegExp(this.cssKeyframeRegex,"gi");for(var e;;){e=a.exec(b);if(null===e)break;c.push({selector:"@keyframes",type:"keyframes",styles:e[0]})}b=b.replace(a,
"");for(a=new RegExp(this.combinedCSSRegex,"gi");;){e=a.exec(b);if(null===e)break;var f=void 0===e[2]?e[5].split("\r\n").join("\n").trim():e[2].split("\r\n").join("\n").trim();var g=new RegExp(this.cssCommentsRegex,"gi"),m=g.exec(f);null!==m&&(f=f.replace(g,"").trim());f=f.replace(/\n+/,"\n");-1!==f.indexOf("@media")?(f={selector:f,type:"media",subStyles:this.parseCSS(e[3]+"\n}")},null!==m&&(f.comments=m[0]),c.push(f)):(e=this.parseRules(e[6]),e={selector:f,rules:e},"@font-face"===f&&(e.type="font-face"),
null!==m&&(e.comments=m[0]),c.push(e))}return c};c.prototype.parseRules=function(b){b=b.split("\r\n").join("\n");var c=[];b=b.split(";");for(var a=0;a<b.length;a++){var e=b[a];e=e.trim();if(-1!==e.indexOf(":")){e=e.split(":");var f=e[0].trim();e=e.slice(1).join(":").trim();1>f.length||1>e.length||c.push({directive:f,value:e})}else"base64,"===e.trim().substr(0,7)?c[c.length-1].value+=e.trim():0<e.length&&c.push({directive:"",value:e,defective:!0})}return c};c.prototype.findCorrespondingRule=function(b,
c,a){void 0===a&&(a=!1);for(var d=!1,f=0;f<b.length&&(b[f].directive!==c||(d=b[f],a!==b[f].value));f++);return d};c.prototype.findBySelector=function(b,c,a){void 0===a&&(a=!1);for(var d=[],f=0;f<b.length;f++)!1===a?b[f].selector===c&&d.push(b[f]):-1!==b[f].selector.indexOf(c)&&d.push(b[f]);if(2>d.length)return d;b=d[0];for(f=1;f<d.length;f++)this.intelligentCSSPush([b],d[f]);return[b]};c.prototype.deleteBySelector=function(b,c){for(var a=[],d=0;d<b.length;d++)b[d].selector!==c&&a.push(b[d]);return a};
c.prototype.compressCSS=function(b){for(var c=[],a={},e=0;e<b.length;e++){var f=b[e];if(!0!==a[f.selector]){var g=this.findBySelector(b,f.selector);0!==g.length&&(c.push(g[0]),a[f.selector]=!0)}}return c};c.prototype.cssDiff=function(b,c){if(b.selector!==c.selector||"media"===b.type||"media"===c.type)return!1;for(var a={selector:b.selector,rules:[]},d,f,g=0;g<b.rules.length;g++)d=b.rules[g],f=this.findCorrespondingRule(c.rules,d.directive,d.value),!1===f?a.rules.push(d):d.value!==f.value&&a.rules.push(d);
for(g=0;g<c.rules.length;g++)f=c.rules[g],d=this.findCorrespondingRule(b.rules,f.directive),!1===d&&(f.type="DELETED",a.rules.push(f));return 0===a.rules.length?!1:a};c.prototype.intelligentMerge=function(b,c,a){void 0===a&&(a=!1);for(var d=0;d<c.length;d++)this.intelligentCSSPush(b,c[d],a);for(d=0;d<b.length;d++)c=b[d],"media"!==c.type&&"keyframes"!==c.type&&(c.rules=this.compactRules(c.rules))};c.prototype.intelligentCSSPush=function(b,c,a){var d=!1;void 0===a&&(a=!1);if(!1===a)for(a=0;a<b.length;a++){if(b[a].selector===
c.selector){d=b[a];break}}else for(a=b.length-1;-1<a;a--)if(b[a].selector===c.selector){d=b[a];break}if(!1===d)b.push(c);else if("media"!==c.type)for(b=0;b<c.rules.length;b++){a=c.rules[b];var f=this.findCorrespondingRule(d.rules,a.directive);!1===f?d.rules.push(a):"DELETED"===a.type?f.type="DELETED":f.value=a.value}else d.subStyles=d.subStyles.concat(c.subStyles)};c.prototype.compactRules=function(b){for(var c=[],a=0;a<b.length;a++)"DELETED"!==b[a].type&&c.push(b[a]);return c};c.prototype.getCSSForEditor=
function(b,c){void 0===c&&(c=0);var a="";void 0===b&&(b=this.css);for(var d=0;d<b.length;d++)"imports"===b[d].type&&(a+=b[d].styles+"\n\n");for(d=0;d<b.length;d++){var f=b[d];if(void 0!==f.selector){var g="";void 0!==f.comments&&(g=f.comments+"\n");"media"===f.type?(a+=g+f.selector+"{\n",a+=this.getCSSForEditor(f.subStyles,c+1),a+="}\n\n"):"keyframes"!==f.type&&"imports"!==f.type&&(a+=this.getSpaces(c)+g+f.selector+" {\n",a+=this.getCSSOfRules(f.rules,c+1),a+=this.getSpaces(c)+"}\n\n")}}for(d=0;d<
b.length;d++)"keyframes"===b[d].type&&(a+=b[d].styles+"\n\n");return a};c.prototype.getImports=function(b){for(var c=[],a=0;a<b.length;a++)"imports"===b[a].type&&c.push(b[a].styles);return c};c.prototype.getCSSOfRules=function(b,c){for(var a="",d=0;d<b.length;d++)void 0!==b[d]&&(a=void 0===b[d].defective?a+(this.getSpaces(c)+b[d].directive+": "+b[d].value+";\n"):a+(this.getSpaces(c)+b[d].value+";\n"));return a||"\n"};c.prototype.getSpaces=function(b){for(var c="",a=0;a<4*b;a++)c+=" ";return c};c.prototype.applyNamespacing=
function(b,c){var a=b,d="."+this.cssPreviewNamespace;void 0!==c&&(d=c);"string"===typeof b&&(a=this.parseCSS(b));for(b=0;b<a.length;b++){var f=a[b];if(!(-1<f.selector.indexOf("@font-face")||-1<f.selector.indexOf("keyframes")||-1<f.selector.indexOf("@import")||-1<f.selector.indexOf(".form-all")||-1<f.selector.indexOf("#stage")))if("media"!==f.type){for(var g=f.selector.split(","),m=[],n=0;n<g.length;n++)-1===g[n].indexOf(".supernova")?m.push(d+" "+g[n]):m.push(g[n]);f.selector=m.join(",")}else f.subStyles=
this.applyNamespacing(f.subStyles,c)}return a};c.prototype.clearNamespacing=function(b,c){void 0===c&&(c=!1);var a=b,d="."+this.cssPreviewNamespace;"string"===typeof b&&(a=this.parseCSS(b));for(b=0;b<a.length;b++){var f=a[b];if("media"!==f.type){for(var g=f.selector.split(","),m=[],n=0;n<g.length;n++)m.push(g[n].split(d+" ").join(""));f.selector=m.join(",")}else f.subStyles=this.clearNamespacing(f.subStyles,!0)}return!1===c?this.getCSSForEditor(a):a};c.prototype.createStyleElement=function(b,c,a){void 0===
a&&(a=!1);!1===this.testMode&&"nonamespace"!==a&&(c=this.applyNamespacing(c));"string"!==typeof c&&(c=this.getCSSForEditor(c));!0===a&&(c=this.getCSSForEditor(this.parseCSS(c)));if(!1!==this.testMode)return this.testMode("create style #"+b,c);(a=document.getElementById(b))&&a.parentNode.removeChild(a);a=document.head||document.getElementsByTagName("head")[0];var d=document.createElement("style");d.id=b;d.type="text/css";a.appendChild(d);d.styleSheet&&!d.sheet?d.styleSheet.cssText=c:d.appendChild(document.createTextNode(c))};
f.cssjs=c})(this);
jQuery("#tdc-live-iframe").on("load",function(){(function(){var c=document.getElementsByTagName("html")[0];-1<navigator.userAgent.indexOf("MSIE 10.0")&&(c.className+=" ie10");navigator.userAgent.match(/Trident.*rv:11\./)&&(c.className+=" ie11");-1<navigator.userAgent.indexOf("Edge")&&(c.className+=" ieEdge");/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.className+=" td-md-is-ios");-1<navigator.userAgent.toLowerCase().indexOf("android")&&(c.className+=" td-md-is-android");-1!==navigator.userAgent.indexOf("Mac OS X")&&
(c.className+=" td-md-is-os-x");/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())&&(c.className+=" td-md-is-chrome");-1!==navigator.userAgent.indexOf("Firefox")&&(c.className+=" td-md-is-firefox");-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(c.className+=" td-md-is-safari");-1!==navigator.userAgent.indexOf("IEMobile")&&(c.className+=" td-md-is-iemobile")})();jQuery("body").addClass("tdcComposerLoaded").removeClass("block-editor-page");var f=jQuery(this).contents();
[".tdc-header-wrap",".tdc-footer-wrap",".td-footer-page"].forEach(function(c){var b=f.find(c+":first");if(b.length)b.on("mouseenter",function(c){b.addClass("tdc-restrict-standard-pack")}).on("mouseleave",function(c){b.removeClass("tdc-restrict-standard-pack")})})});var tdcLivePanel;
(function(f,c){tdcLivePanel={$tdcAction:c,$tdcContent:c,$tdcIframeCover:c,_iframeSrc:c,$panel:c,_currentSettingsPanel:c,_currentSettingsPanelInLoading:!1,init:function(){tdcLivePanel.$panel=jQuery("#tdc-live-panel");tdcLivePanel.$token=jQuery("#td_magic_token");tdcLivePanel.$tdcAction=tdcLivePanel.$panel.find("#tdc_action");tdcLivePanel.$tdcPostId=tdcLivePanel.$panel.find("#tdc_post_id");tdcLivePanel.$tdcContent=tdcLivePanel.$panel.find("#tdc_content");tdcLivePanel.$tdcCustomized=tdcLivePanel.$panel.find("#tdc_customized");
tdcLivePanel.$tdcSinglePostContentWidth=tdcLivePanel.$panel.find("#tdc_single_post_content_width");tdcLivePanel.$tdcIframeCover=jQuery("#tdc-iframe-cover");tdcLivePanel.$panel.submit({},function(b){var c=jQuery("#tdc-live-iframe-temp");c.on("load",function(){var a=jQuery(this);if("tdc-live-iframe-temp"!==a.attr("id"))tdcAdminIFrameUI.checkIframe(a);else{var b=jQuery("#tdc-live-iframe");tdcLivePanel.$tdcIframeCover.removeClass("tdc-iframe-cover-show");b.addClass("tdc-remove-iframe");setTimeout(function(){c.attr("class",
b.attr("class"));c.removeClass("tdc-remove-iframe");b.remove();c.attr("id","tdc-live-iframe");tdcAdminIFrameUI.checkIframe(c);tdcLivePanel.$panel.attr("action","")},400)}})});tdcLivePanel.$panel.on("change","#tdc_page_template",function(b){b.preventDefault();b=jQuery(this);var c=b.data("control-id");jQuery("#hidden_"+c).val(b.closest(".td-box").attr("id"));tdcLivePanel.submit()});tdcLivePanel.$panel.on("click",".tdc-page-template",function(b){b=jQuery(this);var c=b.data("control-id");jQuery("#hidden_"+
c).val(b.closest(".td-box").attr("id"));tdcLivePanel.submit()});tdcLivePanel.$panel.on("click",".tdc-page-settings",function(b){tdcLivePanelPageSettings.showSettings()})},setCurrentSettingsPanel:function(b){if(!f.isUndefined(b)){if(!f.isUndefined(tdcLivePanel._currentSettingsPanel)){if(tdcLivePanel._currentSettingsPanel===b)return;var c=tdcLivePanel._currentSettingsPanel.hasClass("clear-position"),a=c?tdcLivePanel._currentSettingsPanel.getPosition(!1):tdcLivePanel._currentSettingsPanel.getPosition(!0);
tdcLivePanel._currentSettingsPanel.removeClass("clear-position");tdcLivePanel._currentSettingsPanel.closeSettings()}tdcLivePanel._currentSettingsPanel=b;!f.isUndefined(c)&&c&&(tdcLivePanel._currentSettingsPanel.addClass("clear-position"),tdcLivePanel._currentSettingsPanel.setPosition(a))}},getCurrentSettingsPanel:function(){return tdcLivePanel._currentSettingsPanel},submit:function(){var b=jQuery("#tdc-live-iframe");f.isUndefined(tdcLivePanel._iframeSrc)&&(tdcLivePanel._iframeSrc=b.attr("src"));var d=
"uid_"+Math.floor(1E4*Math.random()+1)+"_"+Math.floor(100*Math.random()+1),a=jQuery('<iframe id="tdc-live-iframe-temp" name="'+d+'" scrolling="auto" src="about:blank" style="width: 100%; height: 100%" class="tdc-live-iframe-temp"></iframe>');a.insertAfter(b);a.on("load",function(){jQuery(a.get(0).contentWindow).scrollTop(jQuery(b.get(0).contentWindow).scrollTop())});tdcLivePanel.$panel.attr("target",d);tdcLivePanel.$panel.attr("action",tdcLivePanel._iframeSrc);tdcLivePanel.$tdcIframeCover.show();
tdcLivePanel.$tdcIframeCover.addClass("tdc-iframe-cover-show");d={error:c,getShortcode:""};tdcIFrameData.getShortcodeFromData(d);f.isUndefined(d.error)||tdcDebug.log(d.error);f.isUndefined(d.getShortcode)||(tdcLivePanel.$tdcContent.val(d.getShortcode),window.tdcPostSettings.postContent=tdcUtil.b64EncodeUnicode(d.getShortcode));tdcLivePanel.$tdcAction.val("preview");tdcLivePanel.$tdcCustomized.val(JSON.stringify(window.tdcAdminSettings.customized));tdcLivePanel.$panel.submit()}};tdcLivePanel.init()})(_);
function preinit(f){api.menuList=f.find("#menu-to-edit");api.targetList=api.menuList}var tdcLivePanelMenuSettings;
(function(f,c){tdcLivePanelMenuSettings={_isInitialized:!1,_menuId:c,_menuName:c,_url:c,_currentIframeId:c,$_currentIframeMenuSettings:c,$_tdcMenuSettings:c,$_iframeCloseButton:c,$_iframeApplyButton:c,$_iframeOkButton:c,init:function(){tdcLivePanelMenuSettings._isInitialized||(tdcLivePanelMenuSettings.$_tdcMenuSettings=jQuery("#tdc-menu-settings"),tdcLivePanelMenuSettings._isInitialized=!0)},showSettings:function(b,c){tdcLivePanel.setCurrentSettingsPanel(tdcLivePanelMenuSettings);tdcLivePanelMenuSettings._menuId=
b;tdcLivePanelMenuSettings._menuName=c;tdcLivePanelMenuSettings._url=window.tdcAdminSettings.adminUrl+"/nav-menus.php?action=edit&menu="+b+"&tdc-menu-settings=1";tdcLivePanelMenuSettings._currentIframeId="tdc-iframe-settings-menu-"+tdcLivePanelMenuSettings._menuId;tdcLivePanelMenuSettings.$_currentIframeMenuSettings=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+tdcLivePanelMenuSettings._currentIframeId);var a=tdcLivePanelMenuSettings._currentIframeId+"-data",d=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+
a);d.length||(d=jQuery('<div id="'+a+'" style="display: none"></div>'),tdcLivePanelMenuSettings.$_tdcMenuSettings.append(d));tdcLivePanelMenuSettings.$_tdcMenuSettings.show();tdcWindowFrame.setWindowFrame(tdcLivePanelMenuSettings.$_tdcMenuSettings);tdcLivePanelMenuSettings.$_currentIframeMenuSettings.length?(tdcLivePanelMenuSettings.$_currentIframeMenuSettings.show(),tdcLivePanelMenuSettings._setIframeInterface({type:"menu",menuId:b,menuName:c}),tdcLivePanelMenuSettings._synchronizeIframeMenuData(tdcLivePanelMenuSettings._currentIframeId)):
(tdcLivePanelMenuSettings.$_tdcMenuSettings.addClass("tdc-dropped"),tdcLivePanelMenuSettings.$_currentIframeMenuSettings=jQuery('<iframe id="'+tdcLivePanelMenuSettings._currentIframeId+'" class="tdc-iframe-settings-menu" src="'+tdcLivePanelMenuSettings._url+'" data-menu_id="'+tdcLivePanelMenuSettings._menuId+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>'),tdcLivePanelMenuSettings.$_tdcMenuSettings.children(".content").append(tdcLivePanelMenuSettings.$_currentIframeMenuSettings),
tdcLivePanelMenuSettings.$_currentIframeMenuSettings.on("load",function(){var a=tdcLivePanelMenuSettings.$_currentIframeMenuSettings.contents();tdcLivePanelMenuSettings.$_tdcMenuSettings.removeClass("tdc-dropped");tdcLivePanelMenuSettings._setIframeInterface({type:"menu",menuId:tdcLivePanelMenuSettings._menuId,menuName:tdcLivePanelMenuSettings._menuName});tdcLivePanelMenuSettings._synchronizeIframeMenuData(tdcLivePanelMenuSettings._currentIframeId);a.find("body").on("mousedown mouseup",function(a){window.parent.jQuery("#tdc-menu-settings").trigger(a)});
tdcLivePanelMenuSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelMenuSettings.closeSettings()}));tdcLivePanelMenuSettings.$_currentIframeMenuSettings.siblings(".tdc-iframe-settings-menu").each(function(a,b){a=jQuery(b);a.is(":visible")&&(tdcLivePanelMenuSettings._synchronizeIframeMenuData(a.attr("id")),a.hide())});tdcLivePanelMenuSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelMenuSettings.closeSettings()},_closeSettings:function(){if(!f.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)){var b=
jQuery("#"+tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe")),c=jQuery("#"+tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe")+"-data"),a=c.html(),e=b.contents().find("#update-nav-menu");""!==a&&(e.html(a),tdcLivePanelMenuSettings._reinitWpNavMenu(b[0].contentWindow||b[0].contentDocument),c.html(""));tdcLivePanelMenuSettings.$_tdcMenuSettings.hide();b.hide()}},closeSettings:function(){f.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)||(tdcLivePanelMenuSettings.$_iframeCloseButton.trigger("click"),
tdcLivePanelMenuSettings.removeClass("clear-position"))},setPosition:function(b){tdcLivePanelMenuSettings.$_tdcMenuSettings.css({top:b.top,left:b.left})},getPosition:function(b){var c={};c.top=tdcLivePanelMenuSettings.$_tdcMenuSettings.offset().top-jQuery(window).scrollTop();c.left=tdcLivePanelMenuSettings.$_tdcMenuSettings.offset().left-jQuery(window).scrollLeft();b&&(c.top+=tdcLivePanelMenuSettings.$_tdcMenuSettings.height()/2,c.left+=tdcLivePanelMenuSettings.$_tdcMenuSettings.width()/2);return c},
addClass:function(b){tdcLivePanelMenuSettings.$_tdcMenuSettings.addClass(b)},removeClass:function(b){tdcLivePanelMenuSettings.$_tdcMenuSettings.removeClass(b)},hasClass:function(b){return tdcLivePanelMenuSettings.$_tdcMenuSettings.hasClass(b)},_synchronizeIframeMenuData:function(b){var c=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+b+"-data"),a=c.html();b=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+b);var e=b.contents().find("#update-nav-menu");""===a?c.html(e.contents().clone()):(e.html(a),
tdcLivePanelMenuSettings._reinitWpNavMenu(b[0].contentWindow||b[0].contentDocument))},_reinitWpNavMenu:function(b){b.menus.oneThemeLocationNoMenus=!1;b.wpNavMenu.jQueryExtensions=function(){};b.wpNavMenu.attachMenuEditListeners=function(){};b.wpNavMenu.attachQuickSearchListeners=function(){};b.wpNavMenu.attachThemeLocationsListeners=function(){};b.wpNavMenu.attachMenuSaveSubmitListeners=function(){};b.wpNavMenu.attachTabsPanelListeners=function(){};b.wpNavMenu.attachUnsavedChangesListener=function(){};
b.wpNavMenu.initManageLocations=function(){};b.wpNavMenu.initAccessibility=function(){};b.wpNavMenu.initToggles=function(){};b.wpNavMenu.initPreviewing=function(){};b.wpNavMenu.init()},_setIframeInterface:function(b){function c(a,b){var c=jQuery("#"+a),d=c.contents();a=jQuery("#"+a+"-data");d.find("#update-nav-menu").find("select[name*=td_mega_menu_cat]").each(function(a,b){var c=jQuery(b);a=c.find("option");b=c.find("option:first");""===c.val()?(a.removeAttr("selected"),b.attr("selected","selected")):
a.each(function(a,b){a=jQuery(b);c.val()===a.attr("value")?a.attr("selected","selected"):a.removeAttr("selected")})});d.find("#update-nav-menu").find("input").each(function(a,b){a=jQuery(b);a.attr("value",a.val())});a.html(d.find("#update-nav-menu").contents().clone());!0===b&&(tdcLivePanelMenuSettings.$_tdcMenuSettings.hide(),c.hide())}function a(a){a=jQuery(a);var b=a.data("current_iframe");a=a.data("current_menu");b=jQuery("#"+b);var c=b.contents();(b[0].contentWindow||b[0].contentDocument).wpNavMenu.eventOnClickMenuSave();
b=c.find("#update-nav-menu").serializeArray();window.tdcAdminSettings.customized.menus["existing_menu_"+a]=JSON.stringify(b);tdcLivePanel.submit()}if(f.isUndefined(b))tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeOkButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_menu",""),tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_menu",
""),tdcLivePanelMenuSettings.$_iframeOkButton.data("current_menu",""),tdcLivePanelMenuSettings.$_iframeCloseButton.hide(),tdcLivePanelMenuSettings.$_iframeApplyButton.hide(),tdcLivePanelMenuSettings.$_iframeOkButton.hide();else{var e=b.menuId;b=b.menuName;f.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)&&(tdcLivePanelMenuSettings.$_iframeCloseButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-close-button"),tdcLivePanelMenuSettings.$_iframeCloseButton.click(function(a){tdcLivePanelMenuSettings._closeSettings()}));
f.isUndefined(tdcLivePanelMenuSettings.$_iframeApplyButton)&&(tdcLivePanelMenuSettings.$_iframeApplyButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-apply-button"),tdcLivePanelMenuSettings.$_iframeApplyButton.click(function(b){c(jQuery(this).data("current_iframe"),!1);a(this)}));f.isUndefined(tdcLivePanelMenuSettings.$_iframeOkButton)&&(tdcLivePanelMenuSettings.$_iframeOkButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-ok-button"),tdcLivePanelMenuSettings.$_iframeOkButton.click(function(b){c(jQuery(this).data("current_iframe"),
!0);a(this)}));tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".title").html("MENU: "+b);tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe","tdc-iframe-settings-menu-"+e);tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_iframe","tdc-iframe-settings-menu-"+e);tdcLivePanelMenuSettings.$_iframeOkButton.data("current_iframe","tdc-iframe-settings-menu-"+e);tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_menu",e);tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_menu",
e);tdcLivePanelMenuSettings.$_iframeOkButton.data("current_menu",e);tdcLivePanelMenuSettings.$_iframeCloseButton.show();tdcLivePanelMenuSettings.$_iframeApplyButton.show();tdcLivePanelMenuSettings.$_iframeOkButton.show()}},saveMenuSettings:function(){tdcLivePanelMenuSettings.$_tdcMenuSettings.find("iframe").each(function(b,c){b=jQuery(c);tdcLivePanelMenuSettings._synchronizeIframeMenuData(b.attr("id"));(c.contentWindow||c.contentDocument).wpNavMenu.eventOnClickMenuSave();c=b.data("menu_id");b=b.contents().find("#update-nav-menu");
var a=b.serializeArray(),d={};b.find("input[name=nav-menu-data]").val(JSON.stringify(a));b.find("input[type=hidden]").each(function(a,b){a=jQuery(b);d[a.attr("name")]=a.val()});jQuery.ajax({url:"nav-menus.php?menu="+c,method:"POST",data:d})})}};tdcLivePanelMenuSettings.init()})(_);var tdcLivePanelPageSettings;
(function(f,c){tdcLivePanelPageSettings={_isInitialized:!1,_url:c,_currentIframeId:c,$_tdcPageSettings:c,$_currentIframePageSettings:c,$_iframeCloseButton:c,$_iframeApplyButton:c,$_iframeOkButton:c,init:function(){tdcLivePanelPageSettings._isInitialized||(tdcLivePanelPageSettings.$_tdcPageSettings=jQuery("#tdc-page-settings"),tdcLivePanelMenuSettings._isInitialized=!0)},showSettings:function(){tdcLivePanel.setCurrentSettingsPanel(tdcLivePanelPageSettings);tdcLivePanelPageSettings._url=window.tdcAdminSettings.editPostUrl+
"&tdc-page-settings=1";tdcLivePanelPageSettings.$_currentIframePageSettings=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-settings-page");tdcLivePanelPageSettings.$_tdcPageSettings.show();tdcWindowFrame.setWindowFrame(tdcLivePanelPageSettings.$_tdcPageSettings);tdcLivePanelPageSettings.$_currentIframePageSettings.length?(tdcLivePanelPageSettings.$_currentIframePageSettings.show(),tdcLivePanelPageSettings._setIframeInterface({type:"page_settings"})):(tdcLivePanelPageSettings.$_tdcPageSettings.addClass("tdc-dropped"),
tdcLivePanelPageSettings.$_currentIframePageSettings=jQuery('<iframe class="tdc-iframe-settings-page" src="'+tdcLivePanelPageSettings._url+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>'),tdcLivePanelPageSettings.$_tdcPageSettings.children(".content").append(tdcLivePanelPageSettings.$_currentIframePageSettings),tdcLivePanelPageSettings.$_currentIframePageSettings.on("load",function(){var b=tdcLivePanelPageSettings.$_currentIframePageSettings.contents();tdcLivePanelPageSettings.$_tdcPageSettings.removeClass("tdc-dropped");
tdcLivePanelPageSettings._setIframeInterface({type:"page_settings"});b.find("body").on("mousedown mouseup",function(b){window.parent.jQuery("#tdc-page-settings").trigger(b)});tdcLivePanelPageSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelPageSettings.closeSettings()}));tdcLivePanelPageSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelPageSettings.closeSettings()},_setIframeInterface:function(b){function c(a){var b=jQuery("iframe.tdc-iframe-settings-page");b.contents();
!0===a&&(tdcLivePanelPageSettings.$_tdcPageSettings.hide(),b.hide())}function a(a){a=jQuery("iframe.tdc-iframe-settings-page").contents().find("#post").serializeArray();for(var b={td_homepage_loop:{},td_page:{},page_template:""},c=0;c<a.length;c++){var d=a[c].name;"td_homepage_loop[td_sidebar_position]"===d||"td_homepage_loop[td_sidebar]"===d||"td_homepage_loop[td_layout]"===d||"td_homepage_loop[list_custom_title_show]"===d||"td_homepage_loop[list_custom_title]"===d||"td_homepage_loop[post_ids]"===
d||"td_homepage_loop[category_id]"===d||"td_homepage_loop[category_ids]"===d||"td_homepage_loop[tag_slug]"===d||"td_homepage_loop[autors_id]"===d||"td_homepage_loop[installed_post_types]"===d||"td_homepage_loop[sort]"===d||"td_homepage_loop[limit]"===d||"td_homepage_loop[offset]"===d||"td_homepage_loop[el_class]"===d||"td_homepage_loop[show_featured_posts]"===d||"td_homepage_loop[td_unique_articles]"===d||"td_homepage_loop[td_unique_articles]"===d?(d=d.replace(/td_homepage_loop\[|\]/gi,""),b.td_homepage_loop[d]=
a[c].value):"td_page[td_unique_articles]"===d?b.td_page[d.replace(/td_page\[|\]/gi,"")]=a[c].value:"page_template"===d&&(b.page_template=a[c].value)}window.tdcAdminSettings.customized.page_settings=JSON.stringify(b);tdcLivePanel.submit()}f.isUndefined(b)?(tdcLivePanelPageSettings.$_iframeCloseButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeApplyButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeOkButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeCloseButton.hide(),
tdcLivePanelPageSettings.$_iframeApplyButton.hide(),tdcLivePanelPageSettings.$_iframeOkButton.hide()):(f.isUndefined(tdcLivePanelPageSettings.$_iframeCloseButton)&&(tdcLivePanelPageSettings.$_iframeCloseButton=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-close-button"),tdcLivePanelPageSettings.$_iframeCloseButton.click(function(a){tdcLivePanelPageSettings._closeSettings()})),f.isUndefined(tdcLivePanelPageSettings.$_iframeApplyButton)&&(tdcLivePanelPageSettings.$_iframeApplyButton=
tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-apply-button"),tdcLivePanelPageSettings.$_iframeApplyButton.click(function(b){c(!1);a(this)})),f.isUndefined(tdcLivePanelPageSettings.$_iframeOkButton)&&(tdcLivePanelPageSettings.$_iframeOkButton=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-ok-button"),tdcLivePanelPageSettings.$_iframeOkButton.click(function(b){c(!0);a(this)})),tdcLivePanelPageSettings.$_tdcPageSettings.find(".title").html("Page settings"),tdcLivePanelPageSettings.$_iframeCloseButton.data("current_iframe",
"tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeApplyButton.data("current_iframe","tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeOkButton.data("current_iframe","tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeCloseButton.show(),tdcLivePanelPageSettings.$_iframeApplyButton.show(),tdcLivePanelPageSettings.$_iframeOkButton.show())},_closeSettings:function(){tdcLivePanelPageSettings.$_tdcPageSettings.hide();tdcLivePanelPageSettings.removeClass("clear-position");
tdcLivePanelPageSettings.setPosition({top:"",left:""})},closeSettings:function(){f.isUndefined(tdcLivePanelPageSettings.$_iframeCloseButton)||tdcLivePanelPageSettings.$_iframeCloseButton.trigger("click")},setPosition:function(b){tdcLivePanelPageSettings.$_tdcPageSettings.css({top:b.top,left:b.left})},getPosition:function(b){var c={};c.top=tdcLivePanelPageSettings.$_tdcPageSettings.offset().top-jQuery(window).scrollTop();c.left=tdcLivePanelPageSettings.$_tdcPageSettings.offset().left-jQuery(window).scrollLeft();
b&&(c.top+=tdcLivePanelPageSettings.$_tdcPageSettings.height()/2,c.left+=tdcLivePanelPageSettings.$_tdcPageSettings.width()/2);return c},addClass:function(b){tdcLivePanelPageSettings.$_tdcPageSettings.addClass(b)},removeClass:function(b){tdcLivePanelPageSettings.$_tdcPageSettings.removeClass(b)},hasClass:function(b){return tdcLivePanelPageSettings.$_tdcPageSettings.hasClass(b)}};tdcLivePanelPageSettings.init()})(_);var tdcTemplateSettingsPanel;
(function(f,c){tdcTemplateSettingsPanel={$panel:c,_initialized:!1,init:function(){var b=["module"];if("undefined"!==typeof window.tdcPostSettings.tdbTemplateSettings&&-1<b.indexOf(window.tdcPostSettings.tdbTemplateType))switch(tdcTemplateSettingsPanel._initialized=!0,f("body").append('<div class="tdc-template-settings" data-template-type="'+window.tdcPostSettings.tdbTemplateType+'" style="right:'+tdcUtil.getScrollBarWidth()+'px"><div class="tdc-ts-inner"><div class="tdc-ts-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3-1A4,4,0,1,1-1,3,4,4,0,0,1,3-1ZM3,5A2,2,0,1,0,1,3,2,2,0,0,0,3,5Z" transform="translate(9 9)"/><path d="M12.08,24a3,3,0,0,1-3-3v-.076a.646.646,0,0,0-.425-.586L8.6,20.315a.65.65,0,0,0-.714.127l-.055.055a3,3,0,1,1-4.244-4.245l.055-.055a.647.647,0,0,0,.127-.714l0-.01a.65.65,0,0,0-.595-.394H3a3,3,0,1,1,0-6h.076a.646.646,0,0,0,.586-.425q.011-.03.024-.059a.647.647,0,0,0-.127-.714L3.5,7.827A3,3,0,1,1,7.747,3.583l.055.055a.65.65,0,0,0,.714.127,1,1,0,0,1,.2-.064A.65.65,0,0,0,9,3.166V3a3,3,0,1,1,6,0v.09a.648.648,0,0,0,.394.591l.01,0a.65.65,0,0,0,.714-.127l.055-.055a3,3,0,1,1,4.244,4.245l-.055.055a.647.647,0,0,0-.127.714,1,1,0,0,1,.064.2A.65.65,0,0,0,20.834,9H21a3,3,0,0,1,0,6h-.09a.648.648,0,0,0-.591.394l0,.01a.647.647,0,0,0,.127.714l.055.055a3,3,0,1,1-4.245,4.244l-.055-.055a.65.65,0,0,0-.714-.127l-.01,0a.65.65,0,0,0-.394.595V21A3,3,0,0,1,12.08,24ZM9.375,18.473a2.635,2.635,0,0,1,1.7,2.414q0,.012,0,.023V21a1,1,0,0,0,2,0v-.17A2.662,2.662,0,0,1,17.6,18.935l.008.008.06.06a1,1,0,1,0,1.416-1.415l-.06-.06-.008-.008A2.663,2.663,0,0,1,20.906,13H21a1,1,0,0,0,0-2h-.17A2.65,2.65,0,0,1,18.4,9.394a1,1,0,0,1-.072-.263,2.636,2.636,0,0,1,.607-2.73l.008-.008.06-.06a1,1,0,1,0-1.415-1.416l-.06.06-.008.008A2.663,2.663,0,0,1,13,3.094V3a1,1,0,0,0-2,0v.17A2.65,2.65,0,0,1,9.394,5.6a1,1,0,0,1-.264.072A2.65,2.65,0,0,1,6.4,5.065l-.008-.008L6.333,5A1,1,0,1,0,4.917,6.413l.06.06.008.008a2.637,2.637,0,0,1,.543,2.894,2.635,2.635,0,0,1-2.414,1.7H3a1,1,0,0,0,0,2h.17A2.663,2.663,0,0,1,5.065,17.6l-.008.008-.06.06a1,1,0,1,0,1.415,1.416l.06-.06.008-.008a2.65,2.65,0,0,1,2.894-.543Z"/></svg></div><div class="tdc-ts-content"><div class="tdc-ts-c-header">'+
window.tdcPostSettings.tdbTemplateType.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()})+' Template Settings</div><div class="tdc-ts-c-body"></div><div class="tdc-ts-c-footer"><button class="tdc-ts-btn tdc-ts-save">Save</button></div></div></div></div>'),tdcTemplateSettingsPanel.$panel=f(".tdc-template-settings"),tdcTemplateSettingsPanel.$panel.on("click",".tdc-ts-toggle",tdcTemplateSettingsPanel.panelToggle),tdcTemplateSettingsPanel.$panel.on("click",".tdc-ts-save",tdcTemplateSettingsPanel.panelSave),
window.tdcPostSettings.tdbTemplateType){case "module":var c=b="",a="",e="";"undefined"!==typeof window.tdcPostSettings.tdbTemplateSettings.viewport_widths&&("undefined"!==typeof window.tdcPostSettings.tdbTemplateSettings.viewport_widths.all&&(b=window.tdcPostSettings.tdbTemplateSettings.viewport_widths.all),"undefined"!==typeof window.tdcPostSettings.tdbTemplateSettings.viewport_widths.tablet_landscape&&(c=window.tdcPostSettings.tdbTemplateSettings.viewport_widths.tablet_landscape),"undefined"!==
typeof window.tdcPostSettings.tdbTemplateSettings.viewport_widths.tablet_portrait&&(a=window.tdcPostSettings.tdbTemplateSettings.viewport_widths.tablet_portrait),"undefined"!==typeof window.tdcPostSettings.tdbTemplateSettings.viewport_widths.phone&&(e=window.tdcPostSettings.tdbTemplateSettings.viewport_widths.phone));tdcTemplateSettingsPanel.$panel.find(".tdc-ts-c-body").append('<div class="tdc-ts-cb-section"><div class="tdc-tsc-input-wrap tdc-tsc-viewport-width"><div class="tdc-tsc-label">Viewport width <span>(Desktop)</span></div><input type="number" min="0" step="1" name="tdc-tsc-viewport-all" id="tdc-tsc-viewport-all" class="tdc-tsc-input" data-viewport="all" value="'+
b+'" /><input type="number" min="0" step="1" name="tdc-tsc-viewport-tablet-landscape" id="tdc-tsc-viewport-tablet-landscape" class="tdc-tsc-input" data-viewport="landscape" '+(""===c?'placeholder="'+b+'"':"")+' value="'+c+'" /><input type="number" min="0" step="1" name="tdc-tsc-viewport-tablet-portrait" id="tdc-tsc-viewport-tablet-portrait" class="tdc-tsc-input" data-viewport="portrait" '+(""===a?'placeholder="'+b+'"':"")+' value="'+a+'" /><input type="number" min="0" step="1" name="tdc-tsc-viewport-phone" id="tdc-tsc-viewport-phone" class="tdc-tsc-input" data-viewport="phone" '+
(""===e?'placeholder="'+b+'"':"")+' value="'+e+'" /></div><div class="tdc-tsc-input-wrap tdc-tsc-bg-color"><div class="tdc-tsc-label">Background color</div><input type="text" name="tdc-tsc-bg-color" id="tdc-tsc-bg-color" class="tdc-tsc-input" placeholder="#fff" /></div></div>');tdcTemplateSettingsPanel.$panel.on("keydown",'[id*="tdc-tsc-viewport"]',function(a){"-"===a.key&&a.preventDefault()});tdcTemplateSettingsPanel.$panel.on("keyup",'[id*="tdc-tsc-viewport"]',function(a){if("-"!==a.key){a=f(this);
var b=tdcAdminIFrameUI.getLiveIframe().contents();if("all"===tdcSidebar.currentViewportSettings.name)var c=""!==a.val()?a.val():"100%";else""!==a.val()?c=a.val():(c=tdcTemplateSettingsPanel.$panel.find('[data-viewport="all"]'),c=""!==c.val()?c.val():"100%","100%"!==c&&a.attr("placeholder",c));b.find("body").css("width",c)}});tdcTemplateSettingsPanel.$panel.on("keyup","#tdc-tsc-bg-color",function(a){a=f(this);tdcAdminIFrameUI.getLiveIframe().contents().find("body").css("--tdb-tpl-bg-color",a.val())})}},
panelToggle:function(b){b=f(this).closest(".tdc-template-settings");b.hasClass("tdc-ts-open")?b.removeClass("tdc-ts-open"):b.addClass("tdc-ts-open")},panelSave:function(b){b.preventDefault();if(!tdcTemplateSettingsPanel.$panel.hasClass("tdc-ts-loading")){tdcTemplateSettingsPanel.$panel.addClass("tdc-ts-loading");b={td_magic_token:tdcLivePanel.$token.val(),action:"update_"+window.tdcPostSettings.tdbTemplateType+"_template_settings",templateID:window.tdcPostSettings.postId};switch(window.tdcPostSettings.tdbTemplateType){case "module":b.tdcDesktopWidth=
tdcTemplateSettingsPanel.$panel.find("#tdc-tsc-viewport-all").val(),b.tdcTabletLandscapeWidth=tdcTemplateSettingsPanel.$panel.find("#tdc-tsc-viewport-tablet-landscape").val(),b.tdcTabletPortraitWidth=tdcTemplateSettingsPanel.$panel.find("#tdc-tsc-viewport-tablet-portrait").val(),b.tdcPhoneWidth=tdcTemplateSettingsPanel.$panel.find("#tdc-tsc-viewport-phone").val(),b.tdcBgColor=tdcTemplateSettingsPanel.$panel.find("#tdc-tsc-bg-color").val()}f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/update_"+
window.tdcPostSettings.tdbTemplateType+"_template_settings","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},data:b}).done(function(b,a,c){tdcTemplateSettingsPanel.$panel.removeClass("tdc-ts-loading")})}}};tdcTemplateSettingsPanel.init()})(jQuery);
